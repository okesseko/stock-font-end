{"version":3,"sources":["pages/echart-example/mock-data.js","pages/echart-example/candlestick/index.jsx","pages/echart-example/bar/index.jsx","pages/echart-example/bar-line/index.jsx","pages/echart-example/index.jsx","pages/main/index.jsx","environment/api.js","utils/errorNotification.js","pages/login/create.jsx","pages/login/index.jsx","pages/auto-chart/settings/math-model.js","pages/auto-chart/settings/index.jsx","pages/echart-example/bar-statistics/index.jsx","component/stock-selector/index.jsx","component/chart/index.jsx","pages/auto-chart/realTimeQ1Chart.jsx","pages/auto-chart/index.jsx","pages/case/create.jsx","pages/case/index.jsx","pages/frequent-data/index.jsx","pages/real-data-upload/index.jsx","pages/simulator/index.jsx","component/stock-date-picker/index.jsx","pages/table/downloadButton.jsx","pages/table/order-table/index.jsx","pages/table/price-table/index.jsx","pages/quick-order/read-file/index.jsx","pages/quick-order/index.jsx","pages/replay/index.jsx","pages/stock/modal.jsx","pages/stock/index.jsx","pages/Q1-chart/index.jsx","pages/role-manage/create.jsx","pages/role-manage/index.jsx","pages/investor-manage/create.jsx","pages/investor-manage/index.jsx","authData.js","component/router-link/index.jsx","App.jsx","index.js"],"names":["data","rawData","categoryData","values","i","length","push","splice","splitData","calculateMA","dayCount","result","len","sum","j","options","tooltip","trigger","axisPointer","type","legend","grid","left","right","bottom","xAxis","scale","boundaryGap","axisLine","onZero","splitLine","show","splitNumber","min","max","yAxis","splitArea","dataZoom","start","end","top","series","name","itemStyle","color","color0","borderColor","borderColor0","markPoint","label","normal","formatter","param","Math","round","value","coord","valueDim","markLine","symbol","symbolSize","emphasis","smooth","lineStyle","opacity","Candlestick","option","BarChart","originData","showType","useState","yAxisMax","setYAxisMax","setData","setCenter","useEffect","centerBuffer","tickRange","sort","a","b","price","fiveTickRange","forEach","obj","sellQuantity","buyQuantity","index","console","log","b1","a1","undefined","showValue","deta","abs","seriesName","containLabel","axisLabel","findIndex","tick","dataIndex","matchPrice","y","BarLineChart","quantity","onDateFormatChange","setDataZoom","dateFormat","setDateFormat","backgroundColor","dayjs","format","realtime","startValue","endValue","onChange","val","step","buy","sell","yAxisIndex","className","EchartExample","Main","process","defaultAxios","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","api","login","url","method","logout","getOrder","postOrder","deleteOrder","getDisplay","getDisplayChart","getTransaction","getStock","postStock","putStock","deleteStock","resetStock","getVirtualOrder","postVirtualOrder","resetVirtualOrder","getVirtualOrderContainer","getContainer","postContainer","putContainer","deleteContainer","getGroup","getAvailableStock","getAvailableFuture","getRealDataStockOrder","postRealDataStockOrder","putRealDataStockOrder","deleteRealDataStockOrder","getRealDataStockOrderContent","postRealDataStockOrderContent","getRealDataStockTransaction","postRealDataStockTransaction","putRealDataStockTransaction","deleteRealDataStockTransaction","getRealDataStockTransactionContent","postRealDataStockTransactionContent","getRealDataStockDisplay","postRealDataStockDisplay","putRealDataStockDisplay","deleteRealDataStockDisplay","getRealDataStockDisplayContent","postRealDataStockDisplayContent","getRealDataFutureOrder","postRealDataFutureOrder","putRealDataFutureOrder","deleteRealDataFutureOrder","getRealDataFutureOrderContent","postRealDataFutureOrderContent","getRealDataFutureTransaction","postRealDataFutureTransaction","putRealDataFutureTransaction","deleteRealDataFutureTransaction","getRealDataFutureTransactionContent","postRealDataFutureTransactionContent","getRealDataFutureDisplay","postRealDataFutureDisplay","putRealDataFutureDisplay","deleteRealDataFutureDisplay","getRealDataFutureDisplayContent","postRealDataFutureDisplayContent","getRole","postRole","putRole","deleteRole","getRolePermission","getInvestor","postInvestor","putInvestor","deleteInvestor","errorNotification","error","statusCode","appEventEmitter","emit","notification","open","message","description","duration","Create","visible","setVisible","Form","useForm","form","title","onOk","submit","onCancel","resetFields","okText","cancelText","layout","onFinish","catch","err","response","finally","initialValues","remember","Item","rules","required","placeholder","Login","setToken","setPermission","loginError","setLoginError","isModalVisible","setIsModalVisible","history","useHistory","style","height","showIcon","then","res","setItem","JSON","stringify","permission","replace","Password","htmlType","onClick","nextExponential","lambda","Number","TypeError","random","randomChoice","p","rnd","reduce","C_n_m","n","m","output","getBatches","batch_size","current_tab","prob","q","pow","ceil","geometricDistribution","n_1","probability_list","getBinomialSampling","sendOrderApi","investorId","stockId","priceType","timeRestriction","subMethod","renderData","params","content","firstTime","default_alpha_B","default_alpha_A","default_lambda_B","default_lambda_B_K","default_lambda_A","default_lambda_A_K","R_B","R_A","default_theta_B","default_theta_B1","default_theta_B2","default_theta_B3","default_theta_B4","default_theta_B5","default_theta_A","default_theta_A1","default_theta_A2","default_theta_A3","default_theta_A4","default_theta_A5","R_theta_B","R_theta_A","mu_B","mu_A","array_a","s","max_a","max_b","gap","array_b","q1_array","T","count","firstOrderSellPrice","firstOrderBuyPrice","buyLeftQueue","buyRightQueue","sellLeftQueue","sellRightQueue","newTickRange","parse","lambda_B","theta_B","lambda_A","theta_A","lowest","Object","entries","lowestItems","lowestValueAndKey","next","kind","substring","find","element","key","keys","b_price","a_price","check","midprice","randomProperty","filter","TabPane","Typography","Title","Tabs","Settings","buttonStatus","displayData","useRef","nextTime","setNextTime","setting","setSetting","columns","dataSource","isGetLatest","current","setTimeout","handleInputChangeMuB","handleInputChangeMuA","centered","tab","BarStatisticsChart","quantityA5","quantityA4","quantityA3","quantityA2","quantityA1","quantityB1","quantityB2","quantityB3","quantityB4","quantityB5","marketBuyQuantity","marketSellQuantity","charts","dataChart","setDataChart","setQuantity","getQuantity","Option","Select","StockSelector","mode","isRealData","onEnd","stocks","setStocks","stockList","setStockList","marketType","fileType","map","id","e","showSearch","onDropdownVisibleChange","stock","DisplayTimeChart","v","DisplayStatisticsChart","DisplayTickChart","setShowType","width","marginLeft","DisplaySplitChart","x","DisplayChart","onStockIdChange","isResetChart","setIsResetChart","isRunning","setIsRunning","frequency","setFrequency","interval","setStockId","latestTimeChartTime","setLatestTimeChartTime","tickChartData","setTickChartData","timeChartData","setTimeChartData","statisticsChartData","setStatisticsChartData","splitChartData","setSplitChartData","clearInterval","window","resetChart","handleInterval","useCallback","Promise","all","_statisticsChartData","newStatisticsChartData","createdTime","Date","toISOString","getChartData","_timeChartData","newTimeChartData","originCreatedTime","timeChart","LENGTH","close","firstOrderBuy","firstOrderSell","getTime","slice","setInterval","useMemo","display","disabled","background","danger","RealTimeQ1Chart","rowBuffer","startTime","repeatTimer","g","q1Variable","setQ1Variable","table","setTable","rowData","newColumn","unshift","render","raise","total","toFixed","last","columnCount","newRow","rowCount","filteredData","timeTicker","targetData","ticker","level","onValuesChange","_","allValues","AutoChart","setButtonStatus","isReset","defaultValue","reset","setFieldsValue","Input","Search","Case","orederData","setOrderData","page","setPage","pageSize","setPageSize","totalSize","setTotalSize","setReset","editValue","setEditValue","checked","setChecked","searchCondition","setSearchCondition","rowSelection","selectedRowKeys","selectedRows","preserveSelectedRowKeys","justify","align","span","size","target","rowKey","record","shape","icon","EditOutlined","DeleteOutlined","pagination","onShowSizeChange","cur","sticky","ORDER_FIELDS","TRANSACTION_FIELDS","DISPLAY_FIELDS","getFileTypeFields","getRealDataContentAPI","FILET_TYPE","header","DATE_FORMAT","SAMPLE_MODE","FrequentDataElement","group","setGroup","setFileType","datePickerMode","setDatePickerMode","unit","setUnit","isSample","setIsSample","sampleMode","setSampleMode","fields","setFields","availableDate","setAvailableDate","setStartTime","endTime","setEndTime","isLoading","setIsLoading","isButtonLoading","setIsButtonLoading","isGroup","groupList","setGroupList","handleStockSelectorChange","getRealDataAvailableAPI","datas","dateSet","Set","date","add","Array","from","spinning","padding","getTitle","marginTop","flexDirection","alignItems","ExclamationCircleOutlined","picker","onPanelChange","onOpenChange","allowClear","disabledDate","transferedCurrent","startOf","transferedEndTime","moment","includes","diff","time","transferedStartTime","floor","field","loading","stockIds","isNaN","futureId","endOf","fileName","transferData","join","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","revokeObjectURL","FrequentData","getGetRealDataApiByType","getPostRealDataApiByType","getPutRealDataApiByType","getDeleteRealDataApiByType","getPostRealDataContentApiByType","getRealData","postRealData","putRealData","deleteRealData","ids","postRealDataContent","UploadProgress","file","progress","setProgress","currentFile","setCurrentFile","isError","setIsError","isFirstUpload","restString","handleNextProgress","ADDER","partFile","fileReader","FileReader","addEventListener","split","pop","insertArr","cnt","arr","readAsText","ContentContainer","fileList","setFileList","isLoadingList","setIsLoadingList","realData","setRealData","handleGetRealData","multiple","files","fileArray","fill","Modal","closable","maskClosable","isFinished","RealDataUpload","textAlign","marginBottom","justifyContent","getRealDataOrderContent","isSimulatedOrder","isAutoDisplay","order","orderBy","debugOrders","orders","OrderSender","onReset","currentIndex","setCurrentIndex","setIsRunnung","speed","setSpeed","timeOut","speedRef","sliderDelay","clearTimeout","handleTimeOut","currentOrder","nextOrder","realDataOrderId","sendOrder","delay","RealDataSimulator","customResetStock","setOrders","tempStockId","ReplaySimulator","showTime","CaseSimulator","caseData","setCaseData","selectedCaseId","setSelectedCaseId","caseId","virtualOrderContainerId","baseTime","accumulatedDelay","Simulator","StockDatePicker","onStockChange","onStartChange","onEndChange","tempTime","DownloadButton","apiName","csvFile","pre","encodeURI","OrderTable","PriceTable","buttonRef","React","createRef","QuickOrder","Component","timer","containerData","setContainerData","setTimeRestriction","isAutoTime","setDisplay","matchFiveTick","B1","A1","refreshDisplay","sendMarketOrder","cancelOrder","newFiveTickRangeData","item","marginRight","border","range","investorBuyQuantity","investorSellQuantity","ReplayChart","replayStockId","setReplayStockId","CreateAndEdit","isVisible","setIsVisible","initVal","reload","axiosType","groupId","TYPE_MAPPING","Stock","selectStock","setSelectStock","reloadData","setReloadData","editData","setEditData","deleteAxios","Group","noStyle","RangePicker","Q1Chart","other","validator","resolve","reject","confirm","RoleManagement","roleData","setRoleData","permissionData","setPermissionData","showDeleteConfirm","okType","prev","curr","totalApiTime","permissions","role","restApiTime","parseInt","AUTH_MAPPING_DATA","investorData","setInvestorData","account","password","roleId","case","simulator","LINK_MAPPING_DATA","RouterLink","to","exact","require","EventEmitter","App","router","setRouter","auth","setAuth","GuardedRoute","component","rest","path","props","on","msg","removeItem","defaults","common","settingToken","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c6578d2d.chunk.js","sourcesContent":["export const data = splitData([\r\n  [\"2013/1/24\", 2320.26, 2320.26, 2287.3, 2362.94],\r\n  [\"2013/1/25\", 2300, 2291.3, 2288.26, 2308.38],\r\n  [\"2013/1/28\", 2295.35, 2346.5, 2295.35, 2346.92],\r\n  [\"2013/1/29\", 2347.22, 2358.98, 2337.35, 2363.8],\r\n  [\"2013/1/30\", 2360.75, 2382.48, 2347.89, 2383.76],\r\n  [\"2013/1/31\", 2383.43, 2385.42, 2371.23, 2391.82],\r\n  [\"2013/2/1\", 2377.41, 2419.02, 2369.57, 2421.15],\r\n  [\"2013/2/4\", 2425.92, 2428.15, 2417.58, 2440.38],\r\n  [\"2013/2/5\", 2411, 2433.13, 2403.3, 2437.42],\r\n  [\"2013/2/6\", 2432.68, 2434.48, 2427.7, 2441.73],\r\n  [\"2013/2/7\", 2430.69, 2418.53, 2394.22, 2433.89],\r\n  [\"2013/2/8\", 2416.62, 2432.4, 2414.4, 2443.03],\r\n  [\"2013/2/18\", 2441.91, 2421.56, 2415.43, 2444.8],\r\n  [\"2013/2/19\", 2420.26, 2382.91, 2373.53, 2427.07],\r\n  [\"2013/2/20\", 2383.49, 2397.18, 2370.61, 2397.94],\r\n  [\"2013/2/21\", 2378.82, 2325.95, 2309.17, 2378.82],\r\n  [\"2013/2/22\", 2322.94, 2314.16, 2308.76, 2330.88],\r\n  [\"2013/2/25\", 2320.62, 2325.82, 2315.01, 2338.78],\r\n  [\"2013/2/26\", 2313.74, 2293.34, 2289.89, 2340.71],\r\n  [\"2013/2/27\", 2297.77, 2313.22, 2292.03, 2324.63],\r\n  [\"2013/2/28\", 2322.32, 2365.59, 2308.92, 2366.16],\r\n  [\"2013/3/1\", 2364.54, 2359.51, 2330.86, 2369.65],\r\n  [\"2013/3/4\", 2332.08, 2273.4, 2259.25, 2333.54],\r\n  [\"2013/3/5\", 2274.81, 2326.31, 2270.1, 2328.14],\r\n  [\"2013/3/6\", 2333.61, 2347.18, 2321.6, 2351.44],\r\n  [\"2013/3/7\", 2340.44, 2324.29, 2304.27, 2352.02],\r\n  [\"2013/3/8\", 2326.42, 2318.61, 2314.59, 2333.67],\r\n  [\"2013/3/11\", 2314.68, 2310.59, 2296.58, 2320.96],\r\n  [\"2013/3/12\", 2309.16, 2286.6, 2264.83, 2333.29],\r\n  [\"2013/3/13\", 2282.17, 2263.97, 2253.25, 2286.33],\r\n  [\"2013/3/14\", 2255.77, 2270.28, 2253.31, 2276.22],\r\n  [\"2013/3/15\", 2269.31, 2278.4, 2250, 2312.08],\r\n  [\"2013/3/18\", 2267.29, 2240.02, 2239.21, 2276.05],\r\n  [\"2013/3/19\", 2244.26, 2257.43, 2232.02, 2261.31],\r\n  [\"2013/3/20\", 2257.74, 2317.37, 2257.42, 2317.86],\r\n  [\"2013/3/21\", 2318.21, 2324.24, 2311.6, 2330.81],\r\n  [\"2013/3/22\", 2321.4, 2328.28, 2314.97, 2332],\r\n  [\"2013/3/25\", 2334.74, 2326.72, 2319.91, 2344.89],\r\n  [\"2013/3/26\", 2318.58, 2297.67, 2281.12, 2319.99],\r\n  [\"2013/3/27\", 2299.38, 2301.26, 2289, 2323.48],\r\n  [\"2013/3/28\", 2273.55, 2236.3, 2232.91, 2273.55],\r\n  [\"2013/3/29\", 2238.49, 2236.62, 2228.81, 2246.87],\r\n  [\"2013/4/1\", 2229.46, 2234.4, 2227.31, 2243.95],\r\n  [\"2013/4/2\", 2234.9, 2227.74, 2220.44, 2253.42],\r\n  [\"2013/4/3\", 2232.69, 2225.29, 2217.25, 2241.34],\r\n  [\"2013/4/8\", 2196.24, 2211.59, 2180.67, 2212.59],\r\n  [\"2013/4/9\", 2215.47, 2225.77, 2215.47, 2234.73],\r\n  [\"2013/4/10\", 2224.93, 2226.13, 2212.56, 2233.04],\r\n  [\"2013/4/11\", 2236.98, 2219.55, 2217.26, 2242.48],\r\n  [\"2013/4/12\", 2218.09, 2206.78, 2204.44, 2226.26],\r\n  [\"2013/4/15\", 2199.91, 2181.94, 2177.39, 2204.99],\r\n  [\"2013/4/16\", 2169.63, 2194.85, 2165.78, 2196.43],\r\n  [\"2013/4/17\", 2195.03, 2193.8, 2178.47, 2197.51],\r\n  [\"2013/4/18\", 2181.82, 2197.6, 2175.44, 2206.03],\r\n  [\"2013/4/19\", 2201.12, 2244.64, 2200.58, 2250.11],\r\n  [\"2013/4/22\", 2236.4, 2242.17, 2232.26, 2245.12],\r\n  [\"2013/4/23\", 2242.62, 2184.54, 2182.81, 2242.62],\r\n  [\"2013/4/24\", 2187.35, 2218.32, 2184.11, 2226.12],\r\n  [\"2013/4/25\", 2213.19, 2199.31, 2191.85, 2224.63],\r\n  [\"2013/4/26\", 2203.89, 2177.91, 2173.86, 2210.58],\r\n  [\"2013/5/2\", 2170.78, 2174.12, 2161.14, 2179.65],\r\n  [\"2013/5/3\", 2179.05, 2205.5, 2179.05, 2222.81],\r\n  [\"2013/5/6\", 2212.5, 2231.17, 2212.5, 2236.07],\r\n  [\"2013/5/7\", 2227.86, 2235.57, 2219.44, 2240.26],\r\n  [\"2013/5/8\", 2242.39, 2246.3, 2235.42, 2255.21],\r\n  [\"2013/5/9\", 2246.96, 2232.97, 2221.38, 2247.86],\r\n  [\"2013/5/10\", 2228.82, 2246.83, 2225.81, 2247.67],\r\n  [\"2013/5/13\", 2247.68, 2241.92, 2231.36, 2250.85],\r\n  [\"2013/5/14\", 2238.9, 2217.01, 2205.87, 2239.93],\r\n  [\"2013/5/15\", 2217.09, 2224.8, 2213.58, 2225.19],\r\n  [\"2013/5/16\", 2221.34, 2251.81, 2210.77, 2252.87],\r\n  [\"2013/5/17\", 2249.81, 2282.87, 2248.41, 2288.09],\r\n  [\"2013/5/20\", 2286.33, 2299.99, 2281.9, 2309.39],\r\n  [\"2013/5/21\", 2297.11, 2305.11, 2290.12, 2305.3],\r\n  [\"2013/5/22\", 2303.75, 2302.4, 2292.43, 2314.18],\r\n  [\"2013/5/23\", 2293.81, 2275.67, 2274.1, 2304.95],\r\n  [\"2013/5/24\", 2281.45, 2288.53, 2270.25, 2292.59],\r\n  [\"2013/5/27\", 2286.66, 2293.08, 2283.94, 2301.7],\r\n  [\"2013/5/28\", 2293.4, 2321.32, 2281.47, 2322.1],\r\n  [\"2013/5/29\", 2323.54, 2324.02, 2321.17, 2334.33],\r\n  [\"2013/5/30\", 2316.25, 2317.75, 2310.49, 2325.72],\r\n  [\"2013/5/31\", 2320.74, 2300.59, 2299.37, 2325.53],\r\n  [\"2013/6/3\", 2300.21, 2299.25, 2294.11, 2313.43],\r\n  [\"2013/6/4\", 2297.1, 2272.42, 2264.76, 2297.1],\r\n  [\"2013/6/5\", 2270.71, 2270.93, 2260.87, 2276.86],\r\n  [\"2013/6/6\", 2264.43, 2242.11, 2240.07, 2266.69],\r\n  [\"2013/6/7\", 2242.26, 2210.9, 2205.07, 2250.63],\r\n  [\"2013/6/13\", 2190.1, 2148.35, 2126.22, 2190.1],\r\n]);\r\nfunction splitData(rawData) {\r\n  var categoryData = [];\r\n  var values = [];\r\n  for (var i = 0; i < rawData.length; i++) {\r\n    categoryData.push(rawData[i].splice(0, 1)[0]);\r\n    values.push(rawData[i]);\r\n  }\r\n  return {\r\n    categoryData: categoryData,\r\n    values: values,\r\n  };\r\n}","import React from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport { data } from \"../mock-data\";\r\n\r\nfunction calculateMA(dayCount) {\r\n  var result = [];\r\n  for (var i = 0, len = data.values.length; i < len; i++) {\r\n    if (i < dayCount) {\r\n      result.push(\"-\");\r\n      continue;\r\n    }\r\n    var sum = 0;\r\n    for (var j = 0; j < dayCount; j++) {\r\n      sum += data.values[i - j][1];\r\n    }\r\n    result.push(sum / dayCount);\r\n  }\r\n  return result;\r\n}\r\nconst options = {\r\n  tooltip: {\r\n    trigger: \"axis\",\r\n    axisPointer: {\r\n      type: \"cross\",\r\n    },\r\n  },\r\n  legend: {\r\n    data: [\"日K\", \"MA5\", \"MA10\", \"MA20\", \"MA30\"],\r\n  },\r\n  grid: {\r\n    left: \"10%\",\r\n    right: \"10%\",\r\n    bottom: \"15%\",\r\n  },\r\n  xAxis: {\r\n    type: \"category\",\r\n    data: data.categoryData,\r\n    scale: true,\r\n    boundaryGap: false,\r\n    axisLine: { onZero: false },\r\n    splitLine: { show: false },\r\n    splitNumber: 20,\r\n    min: \"dataMin\",\r\n    max: \"dataMax\",\r\n  },\r\n  yAxis: {\r\n    scale: true,\r\n    splitArea: {\r\n      show: true,\r\n    },\r\n  },\r\n  dataZoom: [\r\n    {\r\n      type: \"inside\",\r\n      start: 50,\r\n      end: 100,\r\n    },\r\n    {\r\n      show: true,\r\n      type: \"slider\",\r\n      top: \"90%\",\r\n      start: 50,\r\n      end: 100,\r\n    },\r\n  ],\r\n  series: [\r\n    {\r\n      name: \"日K\",\r\n      type: \"candlestick\",\r\n      data: data.values,\r\n      itemStyle: {\r\n        color: \"#ec0000\",\r\n        color0: \"#00da3c\",\r\n        borderColor: \"#8A0000\",\r\n        borderColor0: \"#008F28\",\r\n      },\r\n      markPoint: {\r\n        label: {\r\n          normal: {\r\n            formatter: function (param) {\r\n              return param != null ? Math.round(param.value) : \"\";\r\n            },\r\n          },\r\n        },\r\n        data: [\r\n          {\r\n            name: \"XX標點\",\r\n            coord: [\"2013/5/31\", 2300],\r\n            value: 2300,\r\n            itemStyle: {\r\n              color: \"rgb(41,60,85)\",\r\n            },\r\n          },\r\n          {\r\n            name: \"highest value\",\r\n            type: \"max\",\r\n            valueDim: \"highest\",\r\n          },\r\n          {\r\n            name: \"lowest value\",\r\n            type: \"min\",\r\n            valueDim: \"lowest\",\r\n          },\r\n          {\r\n            name: \"average value on close\",\r\n            type: \"average\",\r\n            valueDim: \"close\",\r\n          },\r\n        ],\r\n        tooltip: {\r\n          formatter: function (param) {\r\n            return param.name + \"<br>\" + (param.data.coord || \"\");\r\n          },\r\n        },\r\n      },\r\n      markLine: {\r\n        symbol: [\"none\", \"none\"],\r\n        data: [\r\n          [\r\n            {\r\n              name: \"from lowest to highest\",\r\n              type: \"min\",\r\n              valueDim: \"lowest\",\r\n              symbol: \"circle\",\r\n              symbolSize: 10,\r\n              label: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: false,\r\n                },\r\n              },\r\n            },\r\n            {\r\n              type: \"max\",\r\n              valueDim: \"highest\",\r\n              symbol: \"circle\",\r\n              symbolSize: 10,\r\n              label: {\r\n                show: false,\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: false,\r\n                },\r\n              },\r\n            },\r\n          ],\r\n          {\r\n            name: \"min line on close\",\r\n            type: \"min\",\r\n            valueDim: \"close\",\r\n          },\r\n          {\r\n            name: \"max line on close\",\r\n            type: \"max\",\r\n            valueDim: \"close\",\r\n          },\r\n        ],\r\n      },\r\n    },\r\n    {\r\n      name: \"MA5\",\r\n      type: \"line\",\r\n      data: calculateMA(5),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA10\",\r\n      type: \"line\",\r\n      data: calculateMA(10),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA20\",\r\n      type: \"line\",\r\n      data: calculateMA(20),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n    {\r\n      name: \"MA30\",\r\n      type: \"line\",\r\n      data: calculateMA(30),\r\n      smooth: true,\r\n      lineStyle: {\r\n        opacity: 0.5,\r\n      },\r\n    },\r\n  ],\r\n};\r\nconst Candlestick = () => {\r\n  return <ReactECharts option={options} />;\r\n};\r\n\r\nexport default Candlestick;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\n\r\nconst BarChart = ({ originData = {}, showType }) => {\r\n  const [yAxisMax, setYAxisMax] = useState(10);\r\n  const [data, setData] = useState({});\r\n  const [center, setCenter] = useState(0);\r\n  function showValue() {\r\n    let xAxis = [],\r\n      series = [],\r\n      centerBuffer = 0,\r\n      tickRange = (originData.tickRange || []).sort(\r\n        (a, b) => a.price - b.price\r\n      ),\r\n      fiveTickRange = (originData.fiveTickRange || []).sort(\r\n        (a, b) => a.price - b.price\r\n      );\r\n    switch (showType) {\r\n      case \"all\": {\r\n        tickRange.forEach((obj) => {\r\n          xAxis.push(obj.price);\r\n          series.push(\r\n            obj.sellQuantity\r\n              ? obj.sellQuantity\r\n              : obj.buyQuantity\r\n              ? -obj.buyQuantity\r\n              : 0\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case \"allfive\": {\r\n        fiveTickRange.forEach((obj, index) => {\r\n          xAxis.push(obj.price);\r\n          series.push(\r\n            obj.sellQuantity\r\n              ? obj.sellQuantity\r\n              : obj.buyQuantity\r\n              ? -obj.buyQuantity\r\n              : 0\r\n          );\r\n          if (index === 4) {\r\n            console.log(\"dec\");\r\n            let b1 = fiveTickRange[index].price,\r\n              a1 = fiveTickRange[index + 1].price;\r\n            while (a1 - b1 > 0.5) {\r\n              b1 += 0.5;\r\n              centerBuffer++;\r\n              xAxis.push(b1);\r\n              series.push(\"0\");\r\n            }\r\n          }\r\n        });\r\n        break;\r\n      }\r\n      case \"buyfive\": {\r\n        fiveTickRange.forEach((obj) => {\r\n          if (obj.buyQuantity !== undefined) {\r\n            xAxis.push(obj.price);\r\n            series.push(-obj.buyQuantity);\r\n          }\r\n        });\r\n        break;\r\n      }\r\n      case \"sellfive\": {\r\n        fiveTickRange.forEach((obj) => {\r\n          if (obj.sellQuantity !== undefined) {\r\n            xAxis.push(obj.price);\r\n            series.push(obj.sellQuantity);\r\n          }\r\n        });\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n    setCenter(centerBuffer);\r\n    return { xAxis, series };\r\n  }\r\n\r\n  useEffect(() => {\r\n    setData(showValue());\r\n  }, [originData, showType]);\r\n\r\n  useEffect(() => {\r\n    if (data?.series?.length) {\r\n      let max = 10;\r\n      data.series.forEach((deta) => {\r\n        if (Math.abs(deta) > max) max = Math.abs(deta);\r\n      });\r\n      setYAxisMax(max);\r\n    }\r\n  }, [data]);\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"shadow\",\r\n      },\r\n      formatter: (param) => {\r\n        if (typeof param[0].data === \"string\") return \"\";\r\n        return (\r\n          \"Price: \" +\r\n          param[0].name +\r\n          \"<br/>\" +\r\n          param[0].seriesName +\r\n          \" : \" +\r\n          Math.abs(param[0].data)\r\n        );\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      bottom: \"3%\",\r\n      containLabel: true,\r\n    },\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        data: data.xAxis,\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        splitNumber: 10,\r\n        max: yAxisMax,\r\n        min: -yAxisMax,\r\n        axisLabel: {\r\n          formatter: (value) => {\r\n            return Math.abs(value);\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    series: [\r\n      {\r\n        name: \"委託量\",\r\n        type: \"bar\",\r\n        data: data.series,\r\n        itemStyle: {\r\n          color: (param) => {\r\n            if (\r\n              originData?.fiveTickRange &&\r\n              originData?.fiveTickRange.findIndex(\r\n                (tick) => tick.price === data.xAxis[param.dataIndex]\r\n              ) !== -1\r\n            ) {\r\n              return param.data > 0 ? \"green\" : \"red\";\r\n            } else {\r\n              return param.data > 0 ? \"DarkSeaGreen\" : \"LightCoral\";\r\n            }\r\n          },\r\n        },\r\n        markPoint: {\r\n          symbol:\r\n            \"path://M479.046,283.925c-1.664-3.989-5.547-6.592-9.856-6.592H352.305V10.667C352.305,4.779,347.526,0,341.638,0H170.971 c-5.888,0-10.667,4.779-10.667,10.667v266.667H42.971c-4.309,0-8.192,2.603-9.856,6.571c-1.643,3.989-0.747,8.576,2.304,11.627 l212.8,213.504c2.005,2.005,4.715,3.136,7.552,3.136s5.547-1.131,7.552-3.115l213.419-213.504 C479.793,292.501,480.71,287.915,479.046,283.925z\",\r\n          symbolSize: 30,\r\n          itemStyle: {\r\n            color: \"black\",\r\n          },\r\n          data: [\r\n            {\r\n              coord: [`${originData.matchPrice}`, 0],\r\n              value: originData.matchPrice,\r\n              y: 50,\r\n              name: \"qwe\",\r\n            },\r\n            // ...new Array(center).fill(0).map((e, index) => {\r\n            //   return { xAxis: index + 5, yAxis: 0, symbolSize: [50, 300] };\r\n            // }),\r\n          ],\r\n        },\r\n        // markPoint:\r\n        //   {\r\n        //     symbol: \"rect\",\r\n        //     symbolSize: 40,\r\n        //     itemStyle: {\r\n        //       color: \"rgba(0,0,0,0.2)\",\r\n        //     },\r\n        // data: new Array(center).fill(0).map((e, index) => {\r\n        //   return { xAxis: index + 5, yAxis: 0, symbolSize: [50, 300] };\r\n        // }),\r\n        //       .push({\r\n        //         type:'average',\r\n        //         name:'qweqwe'\r\n        //         // xAxis: 5,\r\n        //         // yAxis: 0,\r\n        //         // symbolSize: [50, 300],\r\n        //       }),\r\n        //   },\r\n      },\r\n    ],\r\n  };\r\n  return <ReactECharts option={options} />;\r\n};\r\n\r\nexport default BarChart;\r\n","import React, { useState } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport { Select } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst BarLineChart = ({\r\n  data = { xAxis: [], price: [], quantity: [] },\r\n  onDateFormatChange,\r\n}) => {\r\n  const [dataZoom, setDataZoom] = useState(10);\r\n  const [dateFormat, setDateFormat] = useState(4);\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"cross\",\r\n        label: {\r\n          backgroundColor: \"#283b56\",\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      containLabel: true,\r\n    },\r\n    legend: {\r\n      data: [\"成交價\", \"最佳買價\", \"最佳賣價\", \"成交量\"],\r\n    },\r\n    // backgroundColor: \"black\",\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        boundaryGap: true,\r\n        data: data.xAxis,\r\n        axisLabel: {\r\n          formatter: (value, index) => {\r\n            const day = dayjs(value).format(\"HH:mm:ss\");\r\n            return day;\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        scale: true,\r\n        name: \"成交價\",\r\n      },\r\n      {\r\n        type: \"value\",\r\n        scale: true,\r\n        name: \"成交量\",\r\n      },\r\n    ],\r\n    dataZoom: [\r\n      {\r\n        show: true,\r\n        realtime: true,\r\n        startValue: dataZoom ? data.xAxis.length - dataZoom : 0,\r\n        endValue: data.xAxis.length - 1,\r\n        onChange: (val) => {\r\n          console.log(val);\r\n        },\r\n      },\r\n    ],\r\n    series: [\r\n      {\r\n        name: \"成交價\",\r\n        type: \"line\",\r\n        step: \"end\",\r\n        data: data.price,\r\n        itemStyle: {\r\n          color: \"black\",\r\n        },\r\n      },\r\n      {\r\n        name: \"最佳買價\",\r\n        type: \"line\",\r\n        step: \"end\",\r\n        data: data.buy,\r\n        itemStyle: {\r\n          color: \"red\",\r\n        },\r\n      },\r\n      {\r\n        name: \"最佳賣價\",\r\n        type: \"line\",\r\n        step: \"end\",\r\n        data: data.sell,\r\n        itemStyle: {\r\n          color: \"green\",\r\n        },\r\n      },\r\n      {\r\n        name: \"成交量\",\r\n        type: \"bar\",\r\n        yAxisIndex: 1,\r\n        data: data.quantity,\r\n        itemStyle: {\r\n          color: \"yellow\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-row\">\r\n        <div className=\"flex flex-col justify-end p-4\">\r\n          分時走勢圖顯示筆數\r\n          <Select\r\n            className=\"w-40\"\r\n            value={dataZoom}\r\n            options={[\r\n              { label: \"顯示10筆\", value: 10 },\r\n              { label: \"顯示50筆\", value: 50 },\r\n              { label: \"顯示100筆\", value: 100 },\r\n              { label: \"顯示全部筆\", value: 0 },\r\n            ]}\r\n            onChange={(val) => setDataZoom(val)}\r\n          />\r\n        </div>\r\n        <div className=\"flex flex-col justify-end p-4\">\r\n          分時走勢圖時間格局\r\n          <Select\r\n            className=\"w-40\"\r\n            value={dateFormat}\r\n            options={[\r\n              { label: \"毫秒\", value: 4 },\r\n              { label: \"秒\", value: 3 },\r\n              { label: \"分\", value: 0 },\r\n              { label: \"時\", value: 1 },\r\n              { label: \"日\", value: 2 },\r\n            ]}\r\n            onChange={(val) => {\r\n              onDateFormatChange && onDateFormatChange(val);\r\n              setDateFormat(val);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ReactECharts option={options} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BarLineChart;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport Candlestick from \"./candlestick\";\r\nimport BarChart from \"./bar\";\r\nimport BarLineChart from \"./bar-line\";\r\n\r\nconst EchartExample = () => {\r\n  return (\r\n    <div>\r\n      <Candlestick />\r\n      <BarChart\r\n        data={{\r\n          100: 15,\r\n          102: 11,\r\n          108: 23,\r\n          109: 2,\r\n          111: 12,\r\n        }}\r\n      />\r\n      <BarLineChart />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EchartExample;\r\n","import React from \"react\";\r\n\r\nconst Main = () => {\r\n  return <div></div>;\r\n};\r\n\r\nexport default Main;\r\n","import axios from \"axios\";\r\n\r\nconsole.log(process.env.NODE_ENV)\r\n\r\nexport const defaultAxios = axios.create({\r\n  baseURL: \"http://140.118.118.173:20023/\",\r\n  // baseURL: \"http://localhost:8080/\",\r\n  // baseURL: \"http://192.168.1.3:8080/\",\r\n});\r\nexport function settingToken(token) {\r\n  defaultAxios.defaults.headers.common[\"token\"] = token;\r\n}\r\n\r\ndefaultAxios.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!config.headers.token) config.headers.token = token;\r\n  return config;\r\n});\r\n\r\n// api\r\n\r\nexport const api = {\r\n  login: { url: \"api/investor/login\", method: \"POST\" },\r\n  logout: { url: \"api/investor/logout\", method: \"POST\" },\r\n\r\n  getOrder: { url: \"api/order\", method: \"GET\" },\r\n  postOrder: { url: \"api/order\", method: \"POST\" },\r\n  deleteOrder: { url: \"api/order\", method: \"DELETE\" },\r\n  getDisplay: { url: \"api/display\", method: \"GET\" },\r\n  getDisplayChart: { url: \"api/display/chart\", method: \"GET\" },\r\n  getTransaction: { url: \"api/transaction\", method: \"GET\" },\r\n  getStock: { url: \"api/stock\", method: \"GET\" },\r\n  postStock: { url: \"api/stock\", method: \"POST\" },\r\n  putStock: { url: \"api/stock\", method: \"PUT\" },\r\n  deleteStock: { url: \"api/stock\", method: \"DELETE\" },\r\n  resetStock: { url: \"api/stock/reset\", method: \"PUT\" },\r\n  getVirtualOrder: { url: \"api/virtualOrder\", method: \"GET\" },\r\n  postVirtualOrder: { url: \"api/virtualOrder\", method: \"POST\" },\r\n  resetVirtualOrder: { url: \"api/virtualOrder\", method: \"PUT\" },\r\n  getVirtualOrderContainer: {\r\n    url: \"api/virtualOrder/container\",\r\n    method: \"GET\",\r\n  },\r\n\r\n  getContainer: { url: \"api/virtualOrder/container\", method: \"GET\" },\r\n  postContainer: { url: \"api/virtualOrder/container\", method: \"POST\" },\r\n  putContainer: { url: \"api/virtualOrder/container\", method: \"PUT\" },\r\n  deleteContainer: {\r\n    url: \"api/virtualOrder/container\",\r\n    method: \"DELETE\",\r\n  },\r\n  getGroup: { url: \"api/group\", method: \"GET\" },\r\n\r\n  //Available -----\r\n  getAvailableStock: {\r\n    url: \"api/available/stock\",\r\n    method: \"GET\",\r\n  },\r\n\r\n  getAvailableFuture: {\r\n    url: \"api/available/future\",\r\n    method: \"GET\",\r\n  },\r\n  //Available -----\r\n\r\n  //Real data -----\r\n  getRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"GET\" },\r\n  postRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"POST\" },\r\n  putRealDataStockOrder: { url: \"api/real-data/stock/order\", method: \"PUT\" },\r\n  deleteRealDataStockOrder: {\r\n    url: \"api/real-data/stock/order\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockOrderContent: {\r\n    url: \"api/real-data/stock/order/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockOrderContent: {\r\n    url: \"api/real-data/stock/order/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataStockTransaction: {\r\n    url: \"api/real-data/stock/transaction\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockTransactionContent: {\r\n    url: \"api/real-data/stock/transaction/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockTransactionContent: {\r\n    url: \"api/real-data/stock/transaction/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataStockDisplay: {\r\n    url: \"api/real-data/stock/display\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataStockDisplayContent: {\r\n    url: \"api/real-data/stock/display/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataStockDisplayContent: {\r\n    url: \"api/real-data/stock/display/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFutureOrder: { url: \"api/real-data/future/order\", method: \"GET\" },\r\n  postRealDataFutureOrder: {\r\n    url: \"api/real-data/future/order\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFutureOrder: { url: \"api/real-data/future/order\", method: \"PUT\" },\r\n  deleteRealDataFutureOrder: {\r\n    url: \"api/real-data/future/order\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFutureOrderContent: {\r\n    url: \"api/real-data/future/order/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFutureOrderContent: {\r\n    url: \"api/real-data/future/order/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFutureTransaction: {\r\n    url: \"api/real-data/future/transaction\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFutureTransaction: {\r\n    url: \"api/real-data/future/transaction\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFutureTransaction: {\r\n    url: \"api/real-data/future/transaction\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataFutureTransaction: {\r\n    url: \"api/real-data/future/transaction\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFutureTransactionContent: {\r\n    url: \"api/real-data/future/transaction/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFutureTransactionContent: {\r\n    url: \"api/real-data/future/transaction/content\",\r\n    method: \"POST\",\r\n  },\r\n\r\n  getRealDataFutureDisplay: {\r\n    url: \"api/real-data/future/display\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFutureDisplay: {\r\n    url: \"api/real-data/future/display\",\r\n    method: \"POST\",\r\n  },\r\n  putRealDataFutureDisplay: {\r\n    url: \"api/real-data/future/display\",\r\n    method: \"PUT\",\r\n  },\r\n  deleteRealDataFutureDisplay: {\r\n    url: \"api/real-data/future/display\",\r\n    method: \"DELETE\",\r\n  },\r\n  getRealDataFutureDisplayContent: {\r\n    url: \"api/real-data/future/display/content\",\r\n    method: \"GET\",\r\n  },\r\n  postRealDataFutureDisplayContent: {\r\n    url: \"api/real-data/future/display/content\",\r\n    method: \"POST\",\r\n  },\r\n  //Real data -----\r\n\r\n  getRole: { url: \"api/rbac/role\", method: \"GET\" },\r\n  postRole: { url: \"api/rbac/role\", method: \"POST\" },\r\n  putRole: { url: \"api/rbac/role\", method: \"PUT\" },\r\n  deleteRole: { url: \"api/rbac/role\", method: \"DELETE\" },\r\n  getRolePermission: { url: \"api/rbac/permission\", method: \"GET\" },\r\n\r\n  getInvestor: { url: \"api/investor\", method: \"GET\" },\r\n  postInvestor: { url: \"api/investor\", method: \"POST\" },\r\n  putInvestor: { url: \"api/investor\", method: \"PUT\" },\r\n  deleteInvestor: { url: \"api/investor\", method: \"DELETE\" },\r\n};\r\n","import { notification } from \"antd\";\r\nimport { appEventEmitter } from \"../App\";\r\n\r\nfunction errorNotification(error) {\r\n  if (error?.statusCode === 401) {\r\n    appEventEmitter.emit(\"unauthorization\");\r\n  }\r\n  notification.open({\r\n    type: \"error\",\r\n    message: error?.statusCode,\r\n    description: error?.message,\r\n    duration: 3,\r\n  });\r\n}\r\n\r\nexport default errorNotification;\r\n","import React from \"react\";\r\nimport { Modal, Form, Input } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({ visible, setVisible }) => {\r\n  const [form] = Form.useForm();\r\n\r\n  return (\r\n    <Modal\r\n      title=\"註冊\"\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          defaultAxios({\r\n            url: api.postInvestor.url,\r\n            method: api.postInvestor.method,\r\n            data: value,\r\n          })\r\n            .catch((err) => {\r\n              errorNotification(err?.response?.data);\r\n            })\r\n            .finally(() => {\r\n              form.resetFields();\r\n              setVisible(false);\r\n            });\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"帳戶名稱\"\r\n          name=\"account\"\r\n          rules={[{ required: true, message: \"請輸入帳戶名稱\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入帳戶名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"密碼\"\r\n          name=\"password\"\r\n          rules={[{ required: true, message: \"請輸入密碼\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入密碼\" />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useState } from \"react\";\r\nimport { Form, Input, Button, Alert } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Create from \"./create\";\r\n\r\nconst Login = ({ setToken, setPermission }) => {\r\n  const [loginError, setLoginError] = useState();\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const history = useHistory();\r\n  return (\r\n    <div\r\n      className=\" flex flex-col justify-center items-center\"\r\n      style={{ height: \"90vh\" }}\r\n    >\r\n      {loginError && (\r\n        <Alert\r\n          className=\"w-96 mb-4\"\r\n          message=\"登入錯誤\"\r\n          description={loginError}\r\n          type=\"error\"\r\n          showIcon\r\n        />\r\n      )}\r\n      <Form\r\n        layout=\"vertical\"\r\n        name=\"login\"\r\n        className=\"w-96\"\r\n        onChange={() => {\r\n          setLoginError(null);\r\n        }}\r\n        onFinish={(data) => {\r\n          defaultAxios({ url: api.login.url, method: api.login.method, data })\r\n            .then((res) => {\r\n              localStorage.setItem(\"token\", res.data.token);\r\n              localStorage.setItem(\r\n                \"permission\",\r\n                JSON.stringify(res.data.permission)\r\n              );\r\n              setToken(res.data.token);\r\n              setPermission(res.data.permission);\r\n              history.replace(\"/stock-font-end/\");\r\n            })\r\n            .catch((err) => {\r\n              errorNotification(err?.response?.data);\r\n              setLoginError(err.message);\r\n            });\r\n        }}\r\n      >\r\n        <Form.Item\r\n          name=\"account\"\r\n          label=\"帳號\"\r\n          rules={[{ required: true, message: \"請填入帳號\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          label=\"密碼\"\r\n          rules={[{ required: true, message: \"請填入密碼\" }]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n        <Form.Item className=\"mt-4\">\r\n          <Button type=\"primary\" htmlType=\"submit\" className=\"w-full\">\r\n            登入\r\n          </Button>\r\n        </Form.Item>\r\n        <Form.Item className=\"mt-4\">\r\n          <Button\r\n            onClick={() => {\r\n              setIsModalVisible(true);\r\n            }}\r\n            className=\"w-full\"\r\n          >\r\n            註冊\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n      <Create visible={isModalVisible} setVisible={setIsModalVisible} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { defaultAxios, api } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\n\r\nfunction nextExponential(lambda) {\r\n  // if (\"number\" !== typeof lambda) {\r\n  //   throw new TypeError(\"nextExponential: lambda must be number.\");\r\n  // }\r\n  lambda = Number(lambda);\r\n\r\n  if (lambda <= 0) {\r\n    throw new TypeError(\"nextExponential: \" + \"lambda must be greater than 0.\");\r\n  }\r\n  return -Math.log(1 - Math.random()) / lambda;\r\n}\r\n\r\nfunction lowestValueAndKey(obj) {\r\n  let [lowestItems] = Object.entries(obj).sort(([, v1], [, v2]) => v1 - v2);\r\n  return [lowestItems[0], lowestItems[1]];\r\n}\r\n\r\nfunction geometricDistribution(min, max, prob) {\r\n  let q = 0;\r\n  let p = Math.pow(prob, 1 / (max - min));\r\n  while (true) {\r\n    q = Math.ceil(Math.log(1 - Math.random()) / Math.log(p)) + (min - 1);\r\n    if (q <= max) {\r\n      return q;\r\n    }\r\n  }\r\n}\r\n\r\nfunction randomChoice(p) {\r\n  let rnd = p.reduce( (a, b) => a + b ) * Math.random();\r\n  return p.findIndex( a => (rnd -= a) < 0 );\r\n}\r\n\r\nfunction randomChoices(p, count) {\r\n  return Array.from(Array(count), randomChoice.bind(null, p));\r\n}\r\n\r\nfunction C_n_m(n, m) {\r\n    if (m>(n-m)) {\r\n      return C_n_m(n, n-m);\r\n    }\r\n    let output = 1.0;\r\n    for(var i=0; i<m; i++) {\r\n      output=output*(n-i)/(i+1)\r\n    }\r\n    return Math.round(output);\r\n}\r\n\r\nfunction getBinomialSampling(n, p) {\r\n  const n_1 = n-1;\r\n  let probability_list = [];\r\n  // number_list = list(range(1,n+1));\r\n  for(var i=0; i<n_1+1; i++) {\r\n    probability_list.push(\r\n      C_n_m(n_1,i)*(p**i)*((1-p)**(n_1-i))\r\n    );\r\n  }\r\n  \r\n  return randomChoice(probability_list, 1);\r\n}\r\n\r\nfunction getBatches(batch_size, n, p, current_tab){\r\n if (current_tab == 1) {\r\n  let p = 0.5;\r\n  return geometricDistribution(1, batch_size, p);\r\n } else if (current_tab == 2) {\r\n  return getBinomialSampling(n, p);\r\n }\r\n}\r\n\r\nfunction sendOrderApi(data) {\r\n  // console.log(\"sendData\", data);\r\n  defaultAxios({\r\n    url: api.postOrder.url,\r\n    method: api.postOrder.method,\r\n    data: {\r\n      investorId: data.investorId,\r\n      stockId: data.stockId,\r\n      method: data.method, // BUY = 0, SELL = 1\r\n      price: data.price,\r\n      quantity: data.quantity,\r\n      priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n      timeRestriction: data.timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n      subMethod: data.subMethod,\r\n    },\r\n  }).catch((err) => {\r\n    errorNotification(err?.response?.data);\r\n  });\r\n}\r\n\r\nexport const renderData = function (params, q, content, firstTime, stockId) {\r\n  let current_tab = params.current_tab;\r\n  let default_alpha_B = params.default_alpha_B;\r\n  let default_alpha_A = params.default_alpha_A;\r\n  let default_lambda_B = params.default_lambda_B;\r\n  let default_lambda_B_K = params.default_lambda_B_K;\r\n  let default_lambda_A = params.default_lambda_A;\r\n  let default_lambda_A_K = params.default_lambda_A_K;\r\n  let R_B = params.R_B;\r\n  let R_A = params.R_A;\r\n  let default_theta_B = params.default_theta_B;\r\n  let default_theta_B1 = params.default_theta_B1;\r\n  let default_theta_B2 = params.default_theta_B2;\r\n  let default_theta_B3 = params.default_theta_B3;\r\n  let default_theta_B4 = params.default_theta_B4;\r\n  let default_theta_B5 = params.default_theta_B5;\r\n  let default_theta_A = params.default_theta_A;\r\n  let default_theta_A1 = params.default_theta_A1;\r\n  let default_theta_A2 = params.default_theta_A2;\r\n  let default_theta_A3 = params.default_theta_A3;\r\n  let default_theta_A4 = params.default_theta_A4;\r\n  let default_theta_A5 = params.default_theta_A5;\r\n  let R_theta_B = params.R_theta_B;\r\n  let R_theta_A = params.R_theta_A;\r\n  let mu_B = params.mu_B;\r\n  let mu_A = params.mu_A;\r\n  let n = params.n;\r\n  let p = params.p;\r\n  let batch_size = params.batch_size;\r\n  let s = params.s;\r\n  let max_a = params.max_a;\r\n  let max_b = params.max_b;\r\n  let gap = params.gap;\r\n\r\n  let array_a = q.array_a;\r\n  let array_b = q.array_b;\r\n  let q1_array = q.q1_array;\r\n\r\n  let T = {};\r\n  var count = 0;\r\n\r\n  const firstOrderSellPrice =\r\n    content.firstOrderSellPrice == null\r\n      ? content.matchPrice\r\n      : content.firstOrderSellPrice;\r\n  const firstOrderBuyPrice =\r\n    content.firstOrderBuyPrice == null\r\n      ? content.matchPrice\r\n      : content.firstOrderBuyPrice;\r\n  let buyLeftQueue = [];\r\n  let buyRightQueue = [];\r\n  let sellLeftQueue = [];\r\n  let sellRightQueue = [];\r\n  content.tickRange.forEach(function (data) {\r\n    if (data.price < firstOrderSellPrice) {\r\n      buyLeftQueue.push(data.price);\r\n    }\r\n    if (data.price < firstOrderBuyPrice) {\r\n      sellLeftQueue.push(data.price);\r\n    }\r\n  });\r\n  let newTickRange = JSON.parse(JSON.stringify(content.tickRange));\r\n  newTickRange = newTickRange.sort((a, b) => a.price - b.price);\r\n  newTickRange.forEach(function (data) {\r\n    if (data.price > firstOrderSellPrice) {\r\n      buyRightQueue.push(data.price);\r\n    }\r\n    if (data.price > firstOrderBuyPrice) {\r\n      sellRightQueue.push(data.price);\r\n    }\r\n  });\r\n\r\n  count = 0;\r\n  buyLeftQueue.forEach(function (price) {\r\n    let lambda_B = default_lambda_B * Math.pow(R_B, count);\r\n    let theta_B = default_theta_B * Math.pow(R_theta_B, count);\r\n    if (current_tab == 2) {\r\n      lambda_B = default_lambda_B_K / Math.pow(count+1, default_alpha_B);\r\n      switch(count) {\r\n        case 0:\r\n        theta_B = default_theta_B1;\r\n        return;\r\n        case 1: \r\n        theta_B = default_theta_B2;\r\n        return;\r\n        case 2: \r\n        theta_B = default_theta_B3;\r\n        return;\r\n        case 3: \r\n        theta_B = default_theta_B4;\r\n        return;\r\n        default: \r\n        theta_B = default_theta_B5;\r\n        return;\r\n      }\r\n    }\r\n    T[\"LB\" + price] = nextExponential(lambda_B);\r\n    T[\"CB\" + price] = nextExponential(theta_B);\r\n    count++;\r\n  });\r\n  count = 0;\r\n  buyRightQueue.forEach(function (price) {\r\n    let lambda_B = default_lambda_B * Math.pow(R_B, count);\r\n    let theta_B = default_theta_B * Math.pow(R_theta_B, count);\r\n    if (current_tab == 2) {\r\n      lambda_B = default_lambda_B_K / Math.pow(count+1, default_alpha_B);\r\n      switch(count) {\r\n        case 0:\r\n        theta_B = default_theta_B1;\r\n        return;\r\n        case 1: \r\n        theta_B = default_theta_B2;\r\n        return;\r\n        case 2: \r\n        theta_B = default_theta_B3;\r\n        return;\r\n        case 3: \r\n        theta_B = default_theta_B4;\r\n        return;\r\n        default: \r\n        theta_B = default_theta_B5;\r\n        return;\r\n      }\r\n    }\r\n    T[\"LB\" + price] = nextExponential(lambda_B);\r\n    T[\"CB\" + price] = nextExponential(theta_B);\r\n    count++;\r\n  });\r\n  count = 0;\r\n  sellLeftQueue.forEach(function (price) {\r\n    let lambda_A = default_lambda_A * Math.pow(R_A, count);\r\n    let theta_A = default_theta_A * Math.pow(R_theta_A, count);\r\n    if (current_tab == 2) {\r\n      lambda_A = default_lambda_A_K / Math.pow(count+1, default_alpha_A);\r\n      switch(count) {\r\n        case 0:\r\n        theta_A = default_theta_A1;\r\n        return;\r\n        case 1: \r\n        theta_A = default_theta_A2;\r\n        return;\r\n        case 2: \r\n        theta_A = default_theta_A3;\r\n        return;\r\n        case 3: \r\n        theta_A = default_theta_A4;\r\n        return;\r\n        default: \r\n        theta_A = default_theta_A5;\r\n        return;\r\n      }\r\n    }\r\n    T[\"LA\" + price] = nextExponential(lambda_A);\r\n    T[\"CA\" + price] = nextExponential(theta_A);\r\n    count++;\r\n  });\r\n  count = 0;\r\n  sellRightQueue.forEach(function (price) {\r\n    let lambda_A = default_lambda_A * Math.pow(R_A, count);\r\n    let theta_A = default_theta_A * Math.pow(R_theta_A, count);\r\n    if (current_tab == 2) {\r\n      lambda_A = default_lambda_A_K / Math.pow(count+1, default_alpha_A);\r\n      switch(count) {\r\n        case 0:\r\n        theta_A = default_theta_A1;\r\n        return;\r\n        case 1: \r\n        theta_A = default_theta_A2;\r\n        return;\r\n        case 2: \r\n        theta_A = default_theta_A3;\r\n        return;\r\n        case 3: \r\n        theta_A = default_theta_A4;\r\n        return;\r\n        default: \r\n        theta_A = default_theta_A5;\r\n        return;\r\n      }\r\n    }\r\n    T[\"LA\" + price] = nextExponential(lambda_A);\r\n    T[\"CA\" + price] = nextExponential(theta_A);\r\n    count++;\r\n  });\r\n\r\n  T[\"MB\"] = nextExponential(mu_B);\r\n  T[\"MS\"] = nextExponential(mu_A);\r\n\r\n  let lowest = lowestValueAndKey(T);\r\n  let next = lowest[1] * 1000 * 100;\r\n\r\n  let kind = lowest[0].substring(0, 1);\r\n  let type = lowest[0].substring(1, 2);\r\n\r\n  function checkMidPrice() {\r\n    q1_array.forEach((element, key) => {\r\n      let check = true;\r\n      for (const value of Object.entries(element)) {\r\n        if (value == false) {\r\n          check = false;\r\n        }\r\n      }\r\n      if (check == true && q1_array[key].midprice == 0) {\r\n        q1_array[key].midprice = (element.b_price + element.a_price) / 2;\r\n      } else if (check == true && q1_array[key].midprice != 0) {\r\n        \r\n      }\r\n    });\r\n\r\n    console.log('q1_array', q1_array);\r\n  }\r\n\r\n  // console.log(\"T\", T);\r\n\r\n  if (!firstTime)\r\n    switch (kind) {\r\n      // 限價單\r\n      case \"L\":\r\n        // console.log(\"Limit order\");\r\n        let price = Number(lowest[0].substring(2, 10));\r\n        let quantity = getBatches(batch_size, n, p, current_tab);\r\n        sendOrderApi({\r\n          investorId: null,\r\n          stockId,\r\n          method: type == \"B\" ? 0 : 1, // BUY = 0, SELL = 1\r\n          price: price,\r\n          quantity: quantity,\r\n          priceType: 1, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: 0, // ROD = 0, IOC = 1, FOK = 2\r\n        });\r\n\r\n        if (type == \"B\") {\r\n          if (array_b.find(element => element == quantity) != undefined) {\r\n            q1_array.forEach((element, key) => {\r\n              if (Object.keys(element)[0] == quantity) {\r\n                q1_array[key][quantity] = true;\r\n                q1_array[key].b_price = price;\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          if (array_a.find(element => element == quantity) != undefined) {\r\n            q1_array.forEach((element, key) => {\r\n              if (Object.keys(element)[1] == quantity) {\r\n                q1_array[key][quantity] = true;\r\n                q1_array[key].a_price = price;\r\n              }\r\n            })\r\n          }\r\n        }\r\n\r\n        checkMidPrice();\r\n        break;\r\n\r\n      // 市價單\r\n      case \"M\":\r\n        // console.log(\"Market order\");\r\n        sendOrderApi({\r\n          investorId: null,\r\n          stockId,\r\n          method: type == \"B\" ? 0 : 1, // BUY = 0, SELL = 1\r\n          price: 0,\r\n          quantity: getBatches(batch_size, n, p, current_tab),\r\n          priceType: 0, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: 0, // ROD = 0, IOC = 1, FOK = 2\r\n        });\r\n        break;\r\n\r\n      // 取消單\r\n      case \"C\":\r\n        defaultAxios({\r\n          url: api.getOrder.url,\r\n          method: api.getOrder.method,\r\n        })\r\n          .then((res) => {\r\n            const orderData = res.data;\r\n            // console.log(\"order datas\", orderData);\r\n            let content = orderData.content.filter(function (data) {\r\n              return data.price == lowest[0].substring(2, 10);\r\n            });\r\n\r\n            let randomProperty = function (obj) {\r\n              let keys = Object.keys(obj);\r\n              return obj[keys[(keys.length * Math.random()) << 0]];\r\n            };\r\n            let random = randomProperty(content);\r\n            if (random) {\r\n              // console.log(\"randomProperty\", random);\r\n              // console.log(\"random\", random);\r\n              // console.log(random.price, random.priceType);\r\n              sendOrderApi({\r\n                investorId: null,\r\n                stockId,\r\n                method: random.method, // BUY = 0, SELL = 1\r\n                price: random.price,\r\n                quantity: random.quantity,\r\n                priceType: random.priceType, // MARKET = 0, LIMIT = 1\r\n                timeRestriction: random.timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n                subMethod: 0,\r\n              });\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          });\r\n\r\n        break;\r\n    }\r\n  return next;\r\n};\r\n","import { configConsumerProps } from \"antd/lib/config-provider\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { renderData } from \"./math-model\";\r\nimport { defaultAxios, api } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport { Slider, Tabs, Typography, Table } from \"antd\";\r\n\r\nconst { Title } = Typography;\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function Settings({ buttonStatus = \"stop\", stockId }) {\r\n  const displayData = useRef();\r\n  const timeSet = useRef();\r\n  const [nextTime, setNextTime] = useState(0);\r\n\r\n  const [q, setQ] = useState({\r\n    array_a: [],\r\n    array_b: [],\r\n    q1_array: [],\r\n  });\r\n\r\n  const [setting, setSetting] = useState({\r\n    current_tab: 1,\r\n    default_alpha_B: 0.52,\r\n    default_alpha_A: 0.52,\r\n    default_lambda_B: 10,\r\n    default_lambda_B_K: 1.92,\r\n    default_lambda_A: 10,\r\n    default_lambda_A_K: 1.92,\r\n    R_B: 0.8,\r\n    R_A: 0.8,\r\n    default_theta_B: 10,\r\n    default_theta_B1: 0.71,\r\n    default_theta_B2: 0.81,\r\n    default_theta_B3: 0.68,\r\n    default_theta_B4: 0.56,\r\n    default_theta_B5: 0.47,\r\n    default_theta_A: 10,\r\n    default_theta_A1: 0.71,\r\n    default_theta_A2: 0.81,\r\n    default_theta_A3: 0.68,\r\n    default_theta_A4: 0.56,\r\n    default_theta_A5: 0.47,\r\n    R_theta_B: 0.8,\r\n    R_theta_A: 0.8,\r\n    mu_B: 0.94,\r\n    mu_A: 0.94,\r\n    n: 10, \r\n    p: 0.5,\r\n    batch_size: 10,\r\n    s: 1,\r\n    max_a: 13,\r\n    max_b: 11,\r\n    gap: 3,\r\n  });\r\n\r\n  const [table, setTable] = useState({\r\n    columns: [\r\n      {\r\n        title: 'b \\\\ a',\r\n        dataIndex: 'name',\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 1,\r\n        dataIndex: 1,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 4,\r\n        dataIndex: 4,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 7,\r\n        dataIndex: 7,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 10,\r\n        dataIndex: 10,\r\n        key: Math.random(),\r\n      },\r\n      {\r\n        title: 13,\r\n        dataIndex: 13,\r\n        key: Math.random(),\r\n      },\r\n    ],\r\n    dataSource: [\r\n      {\r\n        key: 2,\r\n        name: 2,\r\n      },\r\n      {\r\n        key: 5,\r\n        name: 5,\r\n      },\r\n      {\r\n        key: 8,\r\n        name: 8,\r\n      },\r\n      {\r\n        key: 11,\r\n        name: 11,\r\n      },\r\n    ],\r\n  });\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        isGetLatest: true,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        displayData.current = res.data;\r\n        setNextTime(renderData(setting, q, res.data, true));\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (nextTime && buttonStatus !== \"stop\") {\r\n      setTimeout(() => {\r\n        setNextTime(() =>\r\n          renderData(setting, q, displayData.current, false, stockId)\r\n        );\r\n      }, nextTime);\r\n    }\r\n  }, [nextTime, buttonStatus]);\r\n\r\n  const handleInputChangeAlphaB = (value) => {\r\n    setSetting({ ...setting, default_alpha_B: value });\r\n  };\r\n\r\n  const handleInputChangeAlphaA = (value) => {\r\n    setSetting({ ...setting, default_alpha_A: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaB = (value) => {\r\n    setSetting({ ...setting, default_lambda_B: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaBK = (value) => {\r\n    setSetting({ ...setting, default_lambda_B_K: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaA = (value) => {\r\n    setSetting({ ...setting, default_lambda_A: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaAK = (value) => {\r\n    setSetting({ ...setting, default_lambda_A_K: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaRatioB = (value) => {\r\n    setSetting({ ...setting, R_B: value });\r\n  };\r\n\r\n  const handleInputChangeLambdaRatioA = (value) => {\r\n    setSetting({ ...setting, R_A: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB = (value) => {\r\n    setSetting({ ...setting, default_theta_B: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB1 = (value) => {\r\n    setSetting({ ...setting, default_theta_B1: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB2 = (value) => {\r\n    setSetting({ ...setting, default_theta_B2: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB3 = (value) => {\r\n    setSetting({ ...setting, default_theta_B3: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB4 = (value) => {\r\n    setSetting({ ...setting, default_theta_B4: value });\r\n  };\r\n\r\n  const handleInputChangeThetaB5 = (value) => {\r\n    setSetting({ ...setting, default_theta_B5: value });\r\n  };\r\n\r\n  const handleInputChangeThetaA = (value) => {\r\n    setSetting({ ...setting, default_theta_A: value });\r\n  };\r\n\r\n  const handleInputChangeThetaA1 = (value) => {\r\n    setSetting({ ...setting, default_theta_A1: value });\r\n  };\r\n  const handleInputChangeThetaA2 = (value) => {\r\n    setSetting({ ...setting, default_theta_A2: value });\r\n  };\r\n  const handleInputChangeThetaA3 = (value) => {\r\n    setSetting({ ...setting, default_theta_A3: value });\r\n  };\r\n  const handleInputChangeThetaA4 = (value) => {\r\n    setSetting({ ...setting, default_theta_A4: value });\r\n  };\r\n  const handleInputChangeThetaA5 = (value) => {\r\n    setSetting({ ...setting, default_theta_A5: value });\r\n  };\r\n\r\n  const handleInputChangeThetaRatioB = (value) => {\r\n    setSetting({ ...setting, R_theta_B: value });\r\n  };\r\n\r\n  const handleInputChangeThetaRatioA = (value) => {\r\n    setSetting({ ...setting, R_theta_A: value });\r\n  };\r\n\r\n  const handleInputChangeMuB = (value) => {\r\n    setSetting({ ...setting, mu_B: value });\r\n  };\r\n\r\n  const handleInputChangeMuA = (value) => {\r\n    setSetting({ ...setting, mu_A: value });\r\n  };\r\n\r\n  const handleInputChangeN = (value) => {\r\n    setSetting({ ...setting, n: value });\r\n  };\r\n\r\n  const handleInputChangeP = (value) => {\r\n    setSetting({ ...setting, p: value });\r\n  };\r\n\r\n  const handleInputChangeBatchSize = (value) => {\r\n    setSetting({ ...setting, batch_size: value });\r\n  };\r\n\r\n  const handleTabsChange = (key) => {\r\n    setSetting({ ...setting, current_tab: key });\r\n  };\r\n\r\n  const handleInputChangeS = (key) => {\r\n    setSetting({ ...setting, s: key });\r\n  };\r\n\r\n  const handleInputChangeMaxA = (key) => {\r\n    setSetting({ ...setting, max_a: key });\r\n    renderTable(setting.gap, key, setting.max_b);\r\n    setQ1Array();\r\n  };\r\n\r\n  const handleInputChangeMaxB = (key) => {\r\n    setSetting({ ...setting, max_b: key });\r\n    renderTable(setting.gap, setting.max_a, key);\r\n    setQ1Array();\r\n  };\r\n\r\n  const handleInputChangeGap = (key) => {\r\n    setSetting({ ...setting, gap: key });\r\n    renderTable(key, setting.max_a, setting.max_b);\r\n    setQ1Array();\r\n  };\r\n\r\n  function setQ1Array() { \r\n    let array_a = [];\r\n    let array_b = [];\r\n    let q1_array = [];\r\n\r\n    let start_a = (setting.max_a % setting.gap == 0) ? setting.gap : setting.max_a % setting.gap;\r\n    for(var i=start_a; i<=setting.max_a; i=i+setting.gap) {\r\n      array_a.push(i)\r\n    }\r\n    let start_b = (setting.max_b % setting.gap == 0) ? setting.gap : setting.max_b % setting.gap;\r\n    for(var i=start_b; i<=setting.max_b; i=i+setting.gap) {\r\n      array_b.push(i)\r\n    }\r\n  \r\n    array_a.forEach(a => {\r\n      array_b.forEach(b => {\r\n        q1_array.push({\r\n          [a]: false, \r\n          [b]: false,\r\n          midprice: 0,\r\n          count_up: 0, \r\n          count_down: 0,\r\n        });\r\n      });\r\n    });  \r\n    setQ({ ...q, array_a: array_a, array_b: array_b, q1_array, q1_array });\r\n  }\r\n\r\n  function renderTable(gap, max_a, max_b) {\r\n    let columns = [\r\n      {\r\n        title: 'b \\\\ a',\r\n        dataIndex: 'name',\r\n        key: Math.random(),\r\n      },\r\n    ];\r\n    let dataSource = [];\r\n\r\n    let start_a = (max_a % gap == 0) ? gap : max_a % gap;\r\n    for(var i=start_a; i<=max_a; i=i+gap) {\r\n      columns.push({\r\n        title: i,\r\n        dataIndex: i,\r\n        key: i,\r\n      })\r\n    }\r\n    let start_b = (max_b % gap == 0) ? gap : max_b % gap;\r\n    for(var i=start_b; i<=max_b; i=i+gap) {\r\n      dataSource.push({\r\n        key: i,\r\n        name: i,\r\n      })\r\n    }\r\n    setTable({ ...table, columns: columns, dataSource: dataSource });\r\n  }\r\n\r\n  return (\r\n    <div className=\"card-container px-5\">\r\n      <Tabs type=\"card\" centered onChange={handleTabsChange}>\r\n        <TabPane tab=\"Model (1)\" key=\"1\">\r\n          <div>\r\n            <div className=\"flex justify-center\">\r\n              <div className=\"w-full mx-5\">\r\n                <div>batch size: {setting.batch_size}</div>\r\n                <Slider\r\n                  min={1}\r\n                  max={100}\r\n                  step={1}\r\n                  value={setting.batch_size}\r\n                  onChange={handleInputChangeBatchSize}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-center mx-5\">\r\n              <div className=\"mr-5 pr-5 border-r w-1/2\">\r\n                <div>\r\n                  <div>\r\n                    λ<sub>B</sub>: {setting.default_lambda_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={setting.default_lambda_B}\r\n                    onChange={handleInputChangeLambdaB}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    R<sub>B</sub>: {setting.R_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.1}\r\n                    max={5}\r\n                    step={0.1}\r\n                    value={setting.R_B}\r\n                    onChange={handleInputChangeLambdaRatioB}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B</sub>: {setting.default_theta_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={setting.default_theta_B}\r\n                    onChange={handleInputChangeThetaB}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    R<sub>B</sub>: {setting.R_theta_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.1}\r\n                    max={5}\r\n                    step={0.1}\r\n                    value={setting.R_theta_B}\r\n                    onChange={handleInputChangeThetaRatioB}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    μ<sub>B</sub>: {setting.mu_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.mu_B}\r\n                    onChange={handleInputChangeMuB}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"w-1/2\">\r\n                <div>\r\n                  <div>\r\n                    λ<sub>A</sub>: {setting.default_lambda_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={setting.default_lambda_A}\r\n                    onChange={handleInputChangeLambdaA}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    R<sub>A</sub>: {setting.R_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.1}\r\n                    max={5}\r\n                    step={0.1}\r\n                    value={setting.R_A}\r\n                    onChange={handleInputChangeLambdaRatioA}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A</sub>: {setting.default_theta_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={100}\r\n                    step={0.1}\r\n                    value={setting.default_theta_A}\r\n                    onChange={handleInputChangeThetaA}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    R<sub>A</sub>: {setting.R_theta_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.1}\r\n                    max={5}\r\n                    step={0.1}\r\n                    value={setting.R_theta_A}\r\n                    onChange={handleInputChangeThetaRatioA}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    μ<sub>A</sub>: {setting.mu_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.mu_A}\r\n                    onChange={handleInputChangeMuA}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </TabPane>\r\n        <TabPane tab=\"Model (2)\" key=\"2\">\r\n          <div>\r\n            <div className=\"flex justify-center mx-5 border-b pb-3\">\r\n              <div className=\"mr-5 pr-5 w-1/2\">\r\n                <div>n: {setting.n}</div>\r\n                <Slider\r\n                  min={1}\r\n                  max={100}\r\n                  step={1}\r\n                  value={setting.n}\r\n                  onChange={handleInputChangeN}\r\n                />\r\n              </div>\r\n              <div className=\"w-1/2\">\r\n                <div>p: {setting.p}</div>\r\n                <Slider\r\n                  min={0}\r\n                  max={1}\r\n                  step={0.01}\r\n                  value={setting.p}\r\n                  onChange={handleInputChangeP}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-center mx-5 mt-3\">\r\n              <div className=\"mr-5 pr-5 border-r w-1/2\">\r\n                <div>\r\n                  <div>\r\n                    α<sub>B</sub>: {setting.default_alpha_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_alpha_B}\r\n                    onChange={handleInputChangeAlphaB}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    k<sub>B</sub>: {setting.default_lambda_B_K}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_lambda_B_K}\r\n                    onChange={handleInputChangeLambdaBK}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B1</sub>: {setting.default_theta_B1}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_B1}\r\n                    onChange={handleInputChangeThetaB1}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B2</sub>: {setting.default_theta_B2}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_B2}\r\n                    onChange={handleInputChangeThetaB2}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B3</sub>: {setting.default_theta_B3}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_B3}\r\n                    onChange={handleInputChangeThetaB3}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B4</sub>: {setting.default_theta_B4}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_B4}\r\n                    onChange={handleInputChangeThetaB4}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>B5</sub>: {setting.default_theta_B5}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_B5}\r\n                    onChange={handleInputChangeThetaB5}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    μ<sub>B</sub>: {setting.mu_B}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.mu_B}\r\n                    onChange={handleInputChangeMuB}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"w-1/2\">\r\n                <div>\r\n                  <div>\r\n                    α<sub>A</sub>: {setting.default_alpha_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_alpha_A}\r\n                    onChange={handleInputChangeAlphaA}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    k<sub>A</sub>: {setting.default_lambda_A_K}\r\n                  </div>\r\n                  <Slider\r\n                    min={1}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_lambda_A_K}\r\n                    onChange={handleInputChangeLambdaAK}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A1</sub>: {setting.default_theta_A1}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_A1}\r\n                    onChange={handleInputChangeThetaA1}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A2</sub>: {setting.default_theta_A2}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_A2}\r\n                    onChange={handleInputChangeThetaA2}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A3</sub>: {setting.default_theta_A3}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_A3}\r\n                    onChange={handleInputChangeThetaA3}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A4</sub>: {setting.default_theta_A4}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_A4}\r\n                    onChange={handleInputChangeThetaA4}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    θ<sub>A5</sub>: {setting.default_theta_A5}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.default_theta_A5}\r\n                    onChange={handleInputChangeThetaA5}\r\n                  />\r\n                </div>\r\n                <hr className=\"my-3\" />\r\n                <div>\r\n                  <div>\r\n                    μ<sub>A</sub>: {setting.mu_A}\r\n                  </div>\r\n                  <Slider\r\n                    min={0.01}\r\n                    max={10}\r\n                    step={0.01}\r\n                    value={setting.mu_A}\r\n                    onChange={handleInputChangeMuA}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </TabPane>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport { Select } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst BarStatisticsChart = ({\r\n  data = { \r\n    xAxis: [], \r\n    quantity: [], \r\n    quantityA5: [],\r\n    quantityA4: [],\r\n    quantityA3: [],\r\n    quantityA2: [],\r\n    quantityA1: [],\r\n    quantityB1: [],\r\n    quantityB2: [],\r\n    quantityB3: [],\r\n    quantityB4: [],\r\n    quantityB5: [],\r\n    marketBuyQuantity: [],\r\n    marketSellQuantity: [],\r\n    charts: [], \r\n    type: \"\"\r\n  },\r\n  onDateFormatChange,\r\n}) => {  \r\n  const [dataChart, setDataChart] = useState(1);\r\n  const [dataZoom, setDataZoom] = useState(10);\r\n  const [dateFormat, setDateFormat] = useState(4);\r\n  const [quantity, setQuantity] = useState([]);\r\n\r\n  const getQuantity = (value) => {\r\n    if (data.type == \"buy\") {\r\n      switch(value) { \r\n        case 0: setQuantity(data.marketBuyQuantity); break;\r\n        case 1: setQuantity(data.quantityB1); break;\r\n        case 2: setQuantity(data.quantityB2); break;\r\n        case 3: setQuantity(data.quantityB3); break;\r\n        case 4: setQuantity(data.quantityB4); break;\r\n        case 5: setQuantity(data.quantityB5); break;\r\n        default: setQuantity(data.marketBuyQuantity); break;\r\n      }\r\n    } else if (data.type == \"sell\") {\r\n      switch(value) { \r\n        case 0: setQuantity(data.marketSellQuantity); break;\r\n        case 1: setQuantity(data.quantityA1); break;\r\n        case 2: setQuantity(data.quantityA2); break;\r\n        case 3: setQuantity(data.quantityA3); break;\r\n        case 4: setQuantity(data.quantityA4); break;\r\n        case 5: setQuantity(data.quantityA5); break;\r\n        default: setQuantity(data.marketSellQuantity); break;\r\n      }\r\n    }\r\n  }\r\n  const options = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"shadow\",\r\n        label: {\r\n          backgroundColor: \"#283b56\",\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"4%\",\r\n      containLabel: true,\r\n    },\r\n    legend: {\r\n      data: [\"成交量\"],\r\n    },\r\n    // backgroundColor: \"black\",\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        boundaryGap: true,\r\n        data: data.xAxis,\r\n        axisLabel: {\r\n          formatter: (value, index) => {\r\n            const day = dayjs(value).format(\"HH:mm:ss\");\r\n            return day;\r\n          },\r\n        },\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n        scale: true,\r\n        name: \"成交量\",\r\n      },\r\n    ],\r\n    dataZoom: [\r\n      {\r\n        show: true,\r\n        realtime: true,\r\n        startValue: dataZoom ? data.xAxis.length - dataZoom : 0,\r\n        endValue: data.xAxis.length - 1,\r\n        onChange: (val) => {\r\n          console.log(val);\r\n        },\r\n      },\r\n    ],\r\n    series: [\r\n      {\r\n        name: \"成交量\",\r\n        type: \"bar\",\r\n        yAxisIndex: 0,\r\n        data: quantity,\r\n        itemStyle: {\r\n          color: (data.type == \"buy\") ? \"LightCoral\" : \"DarkSeaGreen\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-row\">\r\n        <div className=\"flex flex-col justify-end p-4\">\r\n          統計圖表之表\r\n          <Select\r\n            className=\"w-40\"\r\n            value={dataChart}\r\n            options={[\r\n              { label: \"Market\", value: 0 },\r\n              { label: \"Order \" + data.charts[0], value: 1 },\r\n              { label: \"Order \" + data.charts[1], value: 2 },\r\n              { label: \"Order \" + data.charts[2], value: 3 },\r\n              { label: \"Order \" + data.charts[3], value: 4 },\r\n              { label: \"Order \" + data.charts[4], value: 5 },\r\n              // { label: \"Cancel \" + data.charts[0], value: 6 },\r\n              // { label: \"Cancel \" + data.charts[1], value: 7 },\r\n              // { label: \"Cancel \" + data.charts[2], value: 8 },\r\n              // { label: \"Cancel \" + data.charts[3], value: 9 },\r\n              // { label: \"Cancel \" + data.charts[4], value: 10 },\r\n            ]}\r\n            onChange={(val) => { setDataChart(val); getQuantity(val); }}\r\n          />\r\n        </div>\r\n        <div className=\"flex flex-col justify-end p-4\">\r\n          統計圖表顯示筆數\r\n          <Select\r\n            className=\"w-40\"\r\n            value={dataZoom}\r\n            options={[\r\n              { label: \"顯示10筆\", value: 10 },\r\n              { label: \"顯示50筆\", value: 50 },\r\n              { label: \"顯示100筆\", value: 100 },\r\n              { label: \"顯示全部筆\", value: 0 },\r\n            ]}\r\n            onChange={(val) => setDataZoom(val)}\r\n          />\r\n        </div>\r\n        <div className=\"flex flex-col justify-end p-4\">\r\n          統計圖表時間格局\r\n          <Select\r\n            className=\"w-40\"\r\n            value={dateFormat}\r\n            options={[\r\n              { label: \"毫秒\", value: 4 },\r\n              { label: \"秒\", value: 3 },\r\n              { label: \"分\", value: 0 },\r\n              { label: \"時\", value: 1 },\r\n              { label: \"日\", value: 2 },\r\n            ]}\r\n            onChange={(val) => {\r\n              onDateFormatChange && onDateFormatChange(val);\r\n              setDateFormat(val);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ReactECharts option={options} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BarStatisticsChart;\r\n","import { Select } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst { Option } = Select;\r\nexport const StockSelector = ({ style, mode, onChange, isRealData, onEnd }) => {\r\n  const [stocks, setStocks] = useState();\r\n  const [stockList, setStockList] = useState();\r\n\r\n  useEffect(() => {\r\n    if (isRealData) {\r\n      const { marketType, fileType } = isRealData;\r\n      const { url, method } =\r\n        marketType === \"future\"\r\n          ? api.getAvailableFuture\r\n          : api.getAvailableStock;\r\n      defaultAxios({\r\n        url,\r\n        method,\r\n        params: {\r\n          type: fileType,\r\n        },\r\n      })\r\n        .then(({ data }) => {\r\n          setStockList(\r\n            data.map((id) => {\r\n              return { id };\r\n            })\r\n          );\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.getStock.url,\r\n        method: api.getStock.method,\r\n      })\r\n        .then(({ data: { content: stockList } }) => {\r\n          setStockList(stockList);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }, [isRealData]);\r\n\r\n  return (\r\n    <Select\r\n      style={{ ...style }}\r\n      onChange={(e) => {\r\n        setStocks(e);\r\n        onChange && onChange(e);\r\n      }}\r\n      mode={mode}\r\n      value={stocks}\r\n      placeholder=\"選擇股票\"\r\n      showSearch\r\n      onDropdownVisibleChange={(e) => {\r\n        if (e === false) {\r\n          onEnd && onEnd();\r\n        }\r\n      }}\r\n    >\r\n      {stockList &&\r\n        stockList.map((stock) => {\r\n          return (\r\n            <Option key={Math.random()} value={stock.id}>\r\n              {stock.id}\r\n            </Option>\r\n          );\r\n        })}\r\n    </Select>\r\n  );\r\n};\r\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport BarChart from \"../../pages/echart-example/bar\";\r\nimport BarStatisticsChart from \"../../pages/echart-example/bar-statistics\";\r\nimport BarLineChart from \"../../pages/echart-example/bar-line\";\r\nimport { Button, Select } from \"antd\";\r\nimport { StockSelector } from \"../stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport ReactECharts from \"echarts-for-react\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst check = (...arg) => {\r\n  if (false) {\r\n    console.log(...arg);\r\n  }\r\n};\r\n\r\nconst getChartData = (stockId, dateFormat, latestTimeChartTime) => {\r\n  return Promise.all([\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        stockId,\r\n        isGetLatest: true,\r\n      },\r\n    }),\r\n    defaultAxios({\r\n      url: api.getDisplayChart.url,\r\n      method: api.getDisplayChart.method,\r\n      params: {\r\n        stockId,\r\n        dateFormat,\r\n        createdTime:\r\n          latestTimeChartTime &&\r\n          JSON.stringify({\r\n            min: new Date(latestTimeChartTime).toISOString(),\r\n          }),\r\n      },\r\n    }),\r\n  ]);\r\n};\r\n\r\nconst DisplayTimeChart = ({\r\n  data = { xAxis: [], price: [], quantity: [] },\r\n  onDateFormatChange,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <BarLineChart\r\n        data={data}\r\n        onDateFormatChange={(v) => {\r\n          onDateFormatChange && onDateFormatChange(v);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DisplayStatisticsChart = ({\r\n  data = { xAxis: [], quantity: [], type: \"\", },\r\n  onDateFormatChange,\r\n}) => {\r\n  return (\r\n    <div>      \r\n      <BarStatisticsChart \r\n        data={data}\r\n        onDateFormatChange={(v) => {\r\n          onDateFormatChange && onDateFormatChange(v);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nconst DisplayTickChart = ({ data = {} }) => {\r\n  const [showType, setShowType] = useState(\"all\");\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div>\r\n          圖表模式\r\n          <Select\r\n            value={showType}\r\n            style={{ width: 120, marginLeft: \"20px\" }}\r\n            onChange={(value) => {\r\n              setShowType(value);\r\n            }}\r\n            options={[\r\n              {\r\n                label: \"全部\",\r\n                value: \"all\",\r\n              },\r\n              {\r\n                label: \"買賣五檔\",\r\n                value: \"allfive\",\r\n              },\r\n              {\r\n                label: \"買五檔\",\r\n                value: \"buyfive\",\r\n              },\r\n              {\r\n                label: \"賣五檔\",\r\n                value: \"sellfive\",\r\n              },\r\n            ]}\r\n          />\r\n        </div>\r\n      </div>\r\n      <BarChart originData={data} showType={showType} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DisplaySplitChart = ({ data = [] }) => {\r\n  const option = {\r\n    xAxis: {\r\n      type: \"category\",\r\n      data: data.map((v) => v.x),\r\n      axisLabel: {\r\n        formatter: (value, index) => {\r\n          const day = dayjs(value).format(\"HH:mm:ss\");\r\n          return day;\r\n        },\r\n      },\r\n    },\r\n    yAxis: {\r\n      type: \"value\",\r\n    },\r\n    series: [\r\n      {\r\n        data: data.map((v) => v.y),\r\n        type: \"line\",\r\n      },\r\n    ],\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"cross\",\r\n        label: {\r\n          backgroundColor: \"#283b56\",\r\n        },\r\n      },\r\n    },\r\n  };\r\n  return <ReactECharts option={option} />;\r\n};\r\n\r\nconst DisplayChart = ({\r\n  onStockIdChange,\r\n  stock,\r\n  isResetChart,\r\n  setIsResetChart,\r\n}) => {\r\n  //chart status\r\n  const [isRunning, setIsRunning] = useState(false);\r\n  const [frequency, setFrequency] = useState(1);\r\n  const interval = useRef();\r\n\r\n  //query state\r\n  const [stockId, setStockId] = useState();\r\n  const [dateFormat, setDateFormat] = useState(4);\r\n  const [latestTimeChartTime, setLatestTimeChartTime] = useState();\r\n\r\n  // chart data\r\n  const [tickChartData, setTickChartData] = useState({});\r\n  const [timeChartData, setTimeChartData] = useState([]);\r\n  const [statisticsChartData, setStatisticsChartData] = useState([]);\r\n  const [splitChartData, setSplitChartData] = useState([]);\r\n\r\n  const clearInterval = () => {\r\n    if (interval.current) window.clearInterval(interval.current);\r\n    interval.current = undefined;\r\n  };\r\n\r\n  const resetChart = () => {\r\n    setTickChartData({});\r\n    setTimeChartData([]);\r\n    setStatisticsChartData([]);\r\n    setSplitChartData([]);\r\n    setLatestTimeChartTime(undefined);\r\n  };\r\n\r\n  useEffect(() => {\r\n    resetChart();\r\n    check(\"----\");\r\n  }, [stock, stockId, dateFormat]);\r\n\r\n  useEffect(() => {\r\n    if (isResetChart) {\r\n      resetChart();\r\n      setIsResetChart(false);\r\n    }\r\n  }, [isResetChart, setIsResetChart]);\r\n\r\n  const handleInterval = useCallback(() => {\r\n    check(\r\n      (stock && stock.id) || stockId,\r\n      dateFormat,\r\n      interval.current,\r\n      latestTimeChartTime\r\n    );\r\n    Promise.all([\r\n      defaultAxios({\r\n        url: api.getDisplay.url,\r\n        method: api.getDisplay.method,\r\n        params: {\r\n          stockId,\r\n          isGetLatest: true,\r\n        },\r\n      })\r\n    ]).then((data) => {\r\n      const _statisticsChartData = data[0].data;\r\n      const newStatisticsChartData = JSON.parse(JSON.stringify(statisticsChartData));\r\n      \r\n      newStatisticsChartData.push({\r\n        xAxis: _statisticsChartData.createdTime,\r\n        fiveTickRange: _statisticsChartData.fiveTickRange,\r\n        marketBuyQuantity: _statisticsChartData.marketBuyQuantity,\r\n        marketSellQuantity: _statisticsChartData.marketSellQuantity,\r\n      });\r\n\r\n      setStatisticsChartData(newStatisticsChartData);\r\n    })\r\n    getChartData(\r\n      (stock && stock.id) || stockId,\r\n      dateFormat,\r\n      latestTimeChartTime\r\n    )\r\n      .then(([{ data: tickChartData }, { data: _timeChartData }]) => {\r\n        // tick chart\r\n        setTickChartData(tickChartData);\r\n\r\n        // time chart\r\n        const newTimeChartData = JSON.parse(JSON.stringify(timeChartData));\r\n        if (_timeChartData.length) {\r\n          _timeChartData.forEach(({ originCreatedTime, ...timeChart }) => {\r\n            const LENGTH = newTimeChartData.length;\r\n            if (\r\n              LENGTH &&\r\n              newTimeChartData[LENGTH - 1].xAxis === timeChart.createdTime\r\n            ) {\r\n              newTimeChartData[LENGTH - 1] = {\r\n                xAxis: timeChart.createdTime,\r\n                price: timeChart.close,\r\n                quantity:\r\n                  timeChart.quantity + newTimeChartData[LENGTH - 1].quantity,\r\n                buy: timeChart.firstOrderBuy,\r\n                sell: timeChart.firstOrderSell,\r\n              };\r\n            } else {\r\n              newTimeChartData.push({\r\n                xAxis: timeChart.createdTime,\r\n                price: timeChart.close,\r\n                quantity: timeChart.quantity,\r\n                buy: timeChart.firstOrderBuy,\r\n                sell: timeChart.firstOrderSell,\r\n              });\r\n            }\r\n            if (originCreatedTime) {\r\n              setLatestTimeChartTime(new Date(originCreatedTime).getTime() + 1);\r\n            }\r\n          });\r\n          setTimeChartData(newTimeChartData);\r\n          // setStatisticsChartData(newTimeChartData);\r\n          // split chart\r\n          setSplitChartData(\r\n            newTimeChartData.slice(-10).map(({ buy, sell, xAxis }) => {\r\n              return {\r\n                x: xAxis,\r\n                y: sell - buy,\r\n              };\r\n            })\r\n          );\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [stock, stockId, dateFormat, timeChartData, statisticsChartData, latestTimeChartTime]);\r\n\r\n  useEffect(() => {\r\n    clearInterval();\r\n\r\n    if (isRunning) {\r\n      interval.current = setInterval(() => {\r\n        handleInterval();\r\n      }, 1000 * frequency);\r\n    }\r\n\r\n    return () => {\r\n      clearInterval();\r\n    };\r\n  }, [handleInterval, isRunning, frequency]);\r\n\r\n  return (\r\n    <div>\r\n      {useMemo(() => {\r\n        return <DisplayTickChart data={tickChartData} />;\r\n      }, [tickChartData])}\r\n      {useMemo(() => {\r\n        return (\r\n          <DisplayTimeChart\r\n            data={timeChartData.reduce(\r\n              (p, v) => {\r\n                const { xAxis, price, quantity, buy, sell } = v;\r\n                p.xAxis.push(xAxis);\r\n                p.price.push(price);\r\n                p.quantity.push(quantity);\r\n                p.buy.push(buy);\r\n                p.sell.push(sell);\r\n                return p;\r\n              },\r\n              {\r\n                xAxis: [],\r\n                price: [],\r\n                quantity: [],\r\n                buy: [],\r\n                sell: [],\r\n              }\r\n            )}\r\n            onDateFormatChange={(v) => {\r\n              setDateFormat(v);\r\n            }}\r\n          />\r\n        );\r\n      }, [timeChartData])}\r\n      {useMemo(() => {\r\n        return <DisplaySplitChart data={splitChartData} />;\r\n      }, [splitChartData])}\r\n      {useMemo(() => {\r\n        return (\r\n          <div className=\"flex justify-around mt-3 mb-0 items-center\">\r\n            <div className=\"w-1/2\">\r\n              <DisplayStatisticsChart\r\n                data={statisticsChartData.reduce(\r\n                  (p, v) => {\r\n                    const { \r\n                      xAxis,\r\n                      // quantity,\r\n                      fiveTickRange,\r\n                      marketBuyQuantity,\r\n                      marketSellQuantity\r\n                    } = v;\r\n                    p.xAxis.push(xAxis);\r\n                    p.quantityB1.push(fiveTickRange[5].buyQuantity);\r\n                    p.quantityB2.push(fiveTickRange[6].buyQuantity);\r\n                    p.quantityB3.push(fiveTickRange[7].buyQuantity);\r\n                    p.quantityB4.push(fiveTickRange[8].buyQuantity);\r\n                    p.quantityB5.push(fiveTickRange[9].buyQuantity);\r\n                    p.marketBuyQuantity.push(marketBuyQuantity);\r\n                    p.marketSellQuantity.push(marketSellQuantity);\r\n                    return p;\r\n                  },\r\n                  {\r\n                    xAxis: [],\r\n                    quantityA5: [],\r\n                    quantityA4: [],\r\n                    quantityA3: [],\r\n                    quantityA2: [],\r\n                    quantityA1: [],\r\n                    quantityB1: [],\r\n                    quantityB2: [],\r\n                    quantityB3: [],\r\n                    quantityB4: [],\r\n                    quantityB5: [],\r\n                    fiveTickRange: [],\r\n                    marketBuyQuantity: [],\r\n                    marketSellQuantity: [],\r\n                    charts: [\r\n                      \"B1\", \"B2\", \"B3\", \"B4\", \"B5\"\r\n                    ],\r\n                    type: \"buy\",\r\n                  }\r\n                )}\r\n                onDateFormatChange={(v) => {\r\n                  setDateFormat(v);\r\n                }}\r\n              />\r\n            </div>\r\n            <div className=\"w-1/2\">\r\n              <DisplayStatisticsChart\r\n                data={statisticsChartData.reduce(\r\n                  (p, v) => {\r\n                    const { \r\n                      xAxis,\r\n                      // quantity,\r\n                      fiveTickRange,\r\n                      marketBuyQuantity,\r\n                      marketSellQuantity\r\n                    } = v;\r\n                    p.xAxis.push(xAxis);\r\n                    p.quantityA5.push(fiveTickRange[0].sellQuantity);\r\n                    p.quantityA4.push(fiveTickRange[1].sellQuantity);\r\n                    p.quantityA3.push(fiveTickRange[2].sellQuantity);\r\n                    p.quantityA2.push(fiveTickRange[3].sellQuantity);\r\n                    p.quantityA1.push(fiveTickRange[4].sellQuantity);\r\n                    p.marketBuyQuantity.push(marketBuyQuantity);\r\n                    p.marketSellQuantity.push(marketSellQuantity);\r\n                    return p;\r\n                  },\r\n                  {\r\n                    xAxis: [],\r\n                    quantityA5: [],\r\n                    quantityA4: [],\r\n                    quantityA3: [],\r\n                    quantityA2: [],\r\n                    quantityA1: [],\r\n                    quantityB1: [],\r\n                    quantityB2: [],\r\n                    quantityB3: [],\r\n                    quantityB4: [],\r\n                    quantityB5: [],\r\n                    fiveTickRange: [],\r\n                    marketBuyQuantity: [],\r\n                    marketSellQuantity: [],\r\n                    charts: [\r\n                      \"A1\", \"A2\", \"A3\", \"A4\", \"A5\"\r\n                    ],\r\n                    type: \"sell\",\r\n                  }\r\n                )}\r\n                onDateFormatChange={(v) => {\r\n                  setDateFormat(v);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      }, [statisticsChartData])}\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\" style={{ display: stock ? \"none\" : undefined }}>\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              onStockIdChange && onStockIdChange(e);\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => setIsRunning(true)}\r\n          disabled={!stockId && !(stock && stock.id)}\r\n        >\r\n          開始播放\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => setIsRunning(false)}\r\n          disabled={!isRunning}\r\n        >\r\n          暫停播放\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          danger\r\n          onClick={() => {\r\n            resetChart();\r\n          }}\r\n          disabled={!stockId && !(stock && stock.id)}\r\n        >\r\n          重製畫面\r\n        </Button>\r\n        <div>\r\n          圖表更新頻率\r\n          <Select\r\n            className=\"w-20 ml-2\"\r\n            value={frequency}\r\n            options={[\r\n              { value: 60, label: \"1m\" },\r\n              { value: 10, label: \"10s\" },\r\n              { value: 5, label: \"5s\" },\r\n              { value: 1, label: \"1s\" },\r\n              { value: 0.5, label: \"0.5s\" },\r\n            ]}\r\n            onChange={(val) => {\r\n              setFrequency(val);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayChart;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Slider, Typography, Table, Button, Form } from \"antd\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst RealTimeQ1Chart = ({ stockId, buttonStatus }) => {\r\n  const [form] = Form.useForm();\r\n  const rowBuffer = useRef({});\r\n  const startTime = useRef(\"\");\r\n  const repeatTimer = useRef();\r\n  const [q1Variable, setQ1Variable] = useState({\r\n    s: 2,\r\n    a: 10,\r\n    b: 10,\r\n    g: 2,\r\n  });\r\n  const [table, setTable] = useState({\r\n    columns: [\r\n      {\r\n        title: \"b \\\\ a\",\r\n        dataIndex: \"name\",\r\n      },\r\n    ],\r\n    dataSource: [],\r\n  });\r\n\r\n  function columnCount() {\r\n    const newColumn = [];\r\n    for (let index = q1Variable.a; index > 0; index -= q1Variable.g) {\r\n      newColumn.unshift({\r\n        title: index,\r\n        dataIndex: index,\r\n        render: ({ raise, total }) => {\r\n          console.log(raise, total);\r\n          return (raise / total || 0).toFixed(2);\r\n        },\r\n      });\r\n      rowBuffer.current = {\r\n        ...rowBuffer.current,\r\n        [index]: { last: 0, total: 0, raise: 0 },\r\n      };\r\n    }\r\n    newColumn.unshift({\r\n      title: \"b \\\\ a\",\r\n      dataIndex: \"name\",\r\n    });\r\n    return newColumn;\r\n  }\r\n\r\n  function rowCount() {\r\n    let newRow = {};\r\n    for (let index = q1Variable.b; index > 0; index -= q1Variable.g) {\r\n      newRow = {\r\n        ...newRow,\r\n        [index]: JSON.parse(JSON.stringify(rowBuffer.current)),\r\n      };\r\n    }\r\n    return newRow;\r\n  }\r\n  function getData(columns, rowData) {\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        stockId,\r\n        createdTime: {\r\n          min: startTime.current,\r\n          max: dayjs().toISOString(),\r\n        },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const filteredData = res.data.content.filter(\r\n          (data) => data.firstOrderBuyPrice && data.firstOrderSellPrice\r\n        );\r\n        console.log(filteredData);\r\n\r\n        const timeTicker =\r\n          Math.round(\r\n            (filteredData[0].fiveTickRange[0].price -\r\n              filteredData[0].fiveTickRange[1].price) *\r\n              1e2\r\n          ) / 1e2;\r\n\r\n        for (let index = 0; index < filteredData.length; index++) {\r\n          const targetData = filteredData[index];\r\n          let a1 = 0;\r\n          let b1 = 0;\r\n          let s =\r\n            Math.round(\r\n              (targetData.firstOrderSellPrice - targetData.firstOrderBuyPrice) *\r\n                1e2\r\n            ) /\r\n            1e2 /\r\n            timeTicker;\r\n\r\n          if (s !== q1Variable.s) continue;\r\n\r\n          targetData.fiveTickRange.forEach((ticker) => {\r\n            if (ticker.price === targetData.firstOrderBuyPrice) {\r\n              b1 = ticker.buyQuantity;\r\n            }\r\n            if (ticker.price === targetData.firstOrderSellPrice) {\r\n              a1 = ticker.sellQuantity;\r\n            }\r\n          });\r\n\r\n          if (rowData[b1] && rowData[b1][a1]) {\r\n            let m =\r\n              (targetData.firstOrderBuyPrice + targetData.firstOrderSellPrice) /\r\n              2;\r\n            if (\r\n              rowData[b1][a1].last &&\r\n              rowData[b1][a1].last !== m &&\r\n              rowData[b1][a1].last < m\r\n            ) {\r\n              rowData[b1][a1].raise++;\r\n            }\r\n            rowData[b1][a1].total++;\r\n            rowData[b1][a1].last = m;\r\n          }\r\n        }\r\n\r\n        const dataSource = Object.entries(rowData).map(([key, val]) => ({\r\n          name: key,\r\n          ...val,\r\n        }));\r\n        setTable({ columns, dataSource });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (buttonStatus === \"start\") {\r\n      startTime.current = dayjs().toISOString();\r\n      repeatTimer.current = setInterval(() => {\r\n        getData(columnCount(), rowCount());\r\n      }, 1000);\r\n    } else {\r\n      clearInterval(repeatTimer.current);\r\n    }\r\n  }, [buttonStatus]);\r\n\r\n  return (\r\n    <div className=\"px-4\">\r\n      <Title className=\"mt-4 mb-3\" level={5}>\r\n        Q1 數值表格\r\n      </Title>\r\n      <div className=\"flex flex-col items-start pb-5\">\r\n        <Form\r\n          form={form}\r\n          className=\"w-full\"\r\n          initialValues={{\r\n            s: 2,\r\n            a: 10,\r\n            b: 10,\r\n            g: 2,\r\n          }}\r\n          onValuesChange={(_, allValues) => {\r\n            setQ1Variable(allValues);\r\n          }}\r\n        >\r\n          <Form.Item label={`s: ${q1Variable.s}`} name=\"s\">\r\n            <Slider min={1} max={5} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`a: ${q1Variable.a}`} name=\"a\">\r\n            <Slider min={1} max={100} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`b: ${q1Variable.b}`} name=\"b\">\r\n            <Slider min={1} max={100} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`g: ${q1Variable.g}`} name=\"g\">\r\n            <Slider min={1} max={10} step={1} />\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n      <Table\r\n        className=\"max-w-full\"\r\n        dataSource={table.dataSource}\r\n        columns={table.columns}\r\n        // pagination={{\r\n        //   pageSize: 100,\r\n        // }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RealTimeQ1Chart;\r\n","import React, { useState } from \"react\";\r\nimport Settings from \"./settings\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport { Button, Typography } from \"antd\";\r\nimport DisplayChart from \"../../component/chart\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport RealTimeQ1Chart from \"./realTimeQ1Chart\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst AutoChart = () => {\r\n  const [stockId, setStockId] = useState();\r\n  const [buttonStatus, setButtonStatus] = useState(\"stop\");\r\n\r\n  function resetStock() {\r\n    defaultAxios({\r\n      url: api.resetStock.url,\r\n      method: api.resetStock.method,\r\n      data: {\r\n        id: stockId,\r\n        isReset: true,\r\n      },\r\n    }).catch((err) => {\r\n      errorNotification(err?.response?.data);\r\n    });\r\n\r\n    setButtonStatus(\"stop\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <DisplayChart\r\n        onStockIdChange={(e) => {\r\n          setStockId(e);\r\n        }}\r\n      />\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => setButtonStatus(\"start\")}\r\n          disabled={!stockId}\r\n        >\r\n          開始模擬\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => setButtonStatus(\"stop\")}\r\n          disabled={!stockId}\r\n        >\r\n          暫停模擬\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          danger\r\n          onClick={() => {\r\n            resetStock();\r\n          }}\r\n          disabled={!stockId}\r\n        >\r\n          重製模擬\r\n        </Button>\r\n      </div>\r\n      <Title className=\"m-4 mb-0\" level={5}>\r\n        使用情境\r\n      </Title>\r\n      <Settings buttonStatus={buttonStatus} stockId={stockId} />\r\n      <RealTimeQ1Chart stockId={stockId} buttonStatus={buttonStatus} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AutoChart;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({ visible, setVisible, defaultValue, reset }) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    console.log(defaultValue);\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改情境\" : \"新增情境\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n        console.log(\"cancel\");\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putContainer.url,\r\n              method: api.putContainer.method,\r\n              data: { ...value, id: defaultValue.id },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postContainer.url,\r\n              method: api.postContainer.method,\r\n              data: value,\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n\r\n          console.log(value);\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"情境名稱\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"請輸入情境\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入情境名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"股票id\"\r\n          name=\"stockId\"\r\n          rules={[{ required: true, message: \"請選擇股票\" }]}\r\n        >\r\n          <Select\r\n            placeholder=\"請選擇股票\"\r\n            options={[{ value: 1, label: \"1號股票\" }]}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Select, Input, Typography } from \"antd\";\r\nimport { EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nconst { Search } = Input;\r\nconst { Title } = Typography;\r\nconst Case = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getContainer.url,\r\n      method: api.getContainer.method,\r\n      params: {\r\n        ...searchCondition,\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n      />\r\n      <Title level={5}>條件搜尋</Title>\r\n      <Row\r\n        className=\"mb-4 border border-gray-200 p-4\"\r\n        justify=\"space-around\"\r\n        align=\"bottom\"\r\n      >\r\n        <Col span={6}>\r\n          情境名稱\r\n          <Input\r\n            placeholder=\"輸入名稱\"\r\n            size=\"middle\"\r\n            onChange={(e) => {\r\n              setSearchCondition({\r\n                ...searchCondition,\r\n                name: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={6}>\r\n          股票名稱\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setSearchCondition({ ...searchCondition, stockId: e });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={2}>\r\n          <Button\r\n            onClick={() => {\r\n              setReset(Math.random());\r\n            }}\r\n          >\r\n            搜尋\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => {\r\n            defaultAxios({\r\n              url: api.deleteContainer.url,\r\n              method: api.deleteContainer.method,\r\n              data: {\r\n                id: checked,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                setChecked([]);\r\n                setReset(Math.random());\r\n              });\r\n          }}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增情境\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey={(record) => record.id}\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          // {\r\n          //   title: \"id\",\r\n          //   dataIndex: \"id\",\r\n          //   render: (data) => <span>{data || \"NULL\"}</span>,\r\n          //   sorter: (a, b) => a.id - b.id,\r\n          // },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n          },\r\n          {\r\n            title: \"情境名稱\",\r\n            dataIndex: \"name\",\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (data, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    console.log(record, \"data\");\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      name: record.name,\r\n                      stockId: record.stockId,\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => {\r\n                    defaultAxios({\r\n                      url: api.deleteContainer.url,\r\n                      method: api.deleteContainer.method,\r\n                      data: {\r\n                        id: [record.id],\r\n                      },\r\n                    })\r\n                      .catch((err) => {\r\n                        errorNotification(err?.response?.data);\r\n                      })\r\n                      .finally(() => {\r\n                        setReset(Math.random());\r\n                      });\r\n                  }}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Case;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Button,\r\n  DatePicker,\r\n  Select,\r\n  Switch,\r\n  Row,\r\n  Col,\r\n  InputNumber,\r\n  Tooltip,\r\n  Spin,\r\n} from \"antd\";\r\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nconst { Option } = Select;\r\nconst ORDER_FIELDS = [\r\n  \"count\",\r\n  \"method\",\r\n  \"subMethod\",\r\n  \"price\",\r\n  \"quantity\",\r\n  \"priceType\",\r\n  \"timeRestriction\",\r\n  \"stockId\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\nconst TRANSACTION_FIELDS = [\r\n  \"count\",\r\n  \"stockId\",\r\n  \"price\",\r\n  \"quantity\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\nconst DISPLAY_FIELDS = [\r\n  \"count\",\r\n  \"mthpx\",\r\n  \"mthsz\",\r\n  \"a1px\",\r\n  \"a1sz\",\r\n  \"a2px\",\r\n  \"a2sz\",\r\n  \"a3px\",\r\n  \"a3sz\",\r\n  \"a4px\",\r\n  \"a4sz\",\r\n  \"a5px\",\r\n  \"a5sz\",\r\n  \"b1px\",\r\n  \"b1sz\",\r\n  \"b2px\",\r\n  \"b2sz\",\r\n  \"b3px\",\r\n  \"b3sz\",\r\n  \"b4px\",\r\n  \"b4sz\",\r\n  \"b5px\",\r\n  \"b5sz\",\r\n  \"asz\",\r\n  \"bsz\",\r\n  \"sym\",\r\n  \"trdate\",\r\n  \"ts\",\r\n];\r\n\r\nconst getFileTypeFields = (fileType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return TRANSACTION_FIELDS;\r\n    case \"display\":\r\n      return DISPLAY_FIELDS;\r\n    default:\r\n      return ORDER_FIELDS;\r\n  }\r\n};\r\nconst getRealDataContentAPI = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockTransactionContent\r\n        : api.getRealDataFutureTransactionContent;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockDisplayContent\r\n        : api.getRealDataFutureDisplayContent;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockOrderContent\r\n        : api.getRealDataFutureOrderContent;\r\n  }\r\n};\r\n\r\nconst getRealDataAvailableAPI = (marketType) => {\r\n  switch (marketType) {\r\n    case \"stock\":\r\n      return api.getAvailableStock;\r\n    default:\r\n      return api.getAvailableFuture;\r\n  }\r\n};\r\n\r\nconst FILET_TYPE = [\r\n  { header: \"委託檔\", value: \"order\" },\r\n  { header: \"成交檔\", value: \"transaction\" },\r\n  { header: \"揭示檔\", value: \"display\" },\r\n];\r\nconst DATE_FORMAT = [\r\n  {\r\n    header: \"毫秒\",\r\n    value: 4,\r\n  },\r\n  {\r\n    header: \"秒\",\r\n    value: 3,\r\n  },\r\n  {\r\n    header: \"分\",\r\n    value: 0,\r\n  },\r\n  {\r\n    header: \"時\",\r\n    value: 1,\r\n  },\r\n  {\r\n    header: \"日\",\r\n    value: 2,\r\n  },\r\n];\r\nconst SAMPLE_MODE = [\r\n  {\r\n    header: \"第一筆\",\r\n    value: 0,\r\n  },\r\n  {\r\n    header: \"成交價最大\",\r\n    value: 1,\r\n  },\r\n  {\r\n    header: \"成交價最小\",\r\n    value: 2,\r\n  },\r\n  {\r\n    header: \"平均成交價\",\r\n    value: 3,\r\n  },\r\n];\r\n\r\nconst FrequentDataElement = function ({ marketType }) {\r\n  const [group, setGroup] = useState();\r\n  const [stocks, setStocks] = useState([]);\r\n  const [fileType, setFileType] = useState(\"order\");\r\n  const [datePickerMode, setDatePickerMode] = useState({\r\n    start: \"year\",\r\n    end: \"year\",\r\n  });\r\n  const [unit, setUnit] = useState(1);\r\n  const [isSample, setIsSample] = useState(true);\r\n  const [dateFormat, setDateFormat] = useState(3);\r\n  const [sampleMode, setSampleMode] = useState(0);\r\n  const [fields, setFields] = useState(ORDER_FIELDS);\r\n\r\n  const [availableDate, setAvailableDate] = useState([]);\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isButtonLoading, setIsButtonLoading] = useState(false);\r\n\r\n  const [isGroup, setIsGroup] = useState(false);\r\n\r\n  const [groupList, setGroupList] = useState();\r\n\r\n  const getTitle = (marketType) => {\r\n    switch (marketType) {\r\n      case \"stock\":\r\n        return \"證交\";\r\n      case \"future\":\r\n        return \"期交\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n  const handleStockSelectorChange = useCallback(() => {\r\n    if (stocks.length !== 0) {\r\n      setIsLoading(true);\r\n      const { url, method } = getRealDataAvailableAPI(marketType);\r\n      Promise.all(\r\n        stocks.map((stock) => {\r\n          return defaultAxios({\r\n            url: url + `/${stock}`,\r\n            method,\r\n            params: {\r\n              type: fileType,\r\n            },\r\n          });\r\n        })\r\n      )\r\n        .then((datas) => {\r\n          const dateSet = new Set();\r\n          datas.forEach(({ data }) => {\r\n            data.forEach((date) => {\r\n              dateSet.add(date);\r\n            });\r\n          });\r\n          setAvailableDate(Array.from(dateSet));\r\n          setIsLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  }, [fileType, marketType, stocks]);\r\n\r\n  useEffect(() => {\r\n    handleStockSelectorChange();\r\n  }, [handleStockSelectorChange]);\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getGroup.url,\r\n      method: api.getGroup.method,\r\n    })\r\n      .then(({ data: { content: groupList } }) => {\r\n        setGroupList(groupList);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <Spin spinning={isLoading}>\r\n      <div style={{ padding: \"20px\" }}>\r\n        {getTitle(marketType)}\r\n        <Row>\r\n          <Col span={6}>\r\n            {/* <Switch\r\n            checked={isGroup}\r\n            onChange={() => {\r\n              setIsGroup(!isGroup);\r\n            }}\r\n          /> */}\r\n            檔案類型\r\n            <Select\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setFileType(e);\r\n                setFields(getFileTypeFields(e));\r\n                setStartTime(null);\r\n                setEndTime(null);\r\n              }}\r\n              value={fileType}\r\n              placeholder=\"選擇檔案類型\"\r\n            >\r\n              {FILET_TYPE.map((fileType) => {\r\n                return (\r\n                  <Option key={Math.random()} value={fileType.value}>\r\n                    {fileType.header}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n          <Col span={6}>\r\n            {isGroup ? \"類股\" : \"股票\"}\r\n            <Select\r\n              style={{\r\n                width: \"100%\",\r\n                display: isGroup ? undefined : \"none\",\r\n              }}\r\n              onChange={(e) => {\r\n                setGroup(e);\r\n              }}\r\n              value={group}\r\n              placeholder=\"選擇類股\"\r\n            >\r\n              {groupList &&\r\n                groupList.map((group, index) => {\r\n                  return (\r\n                    <Option key={Math.random()} value={index}>\r\n                      {group.name}\r\n                    </Option>\r\n                  );\r\n                })}\r\n            </Select>\r\n            <StockSelector\r\n              isRealData={{\r\n                marketType,\r\n                fileType,\r\n              }}\r\n              style={{\r\n                width: \"100%\",\r\n                display: !isGroup ? undefined : \"none\",\r\n              }}\r\n              onChange={(e) => {\r\n                setStocks(e);\r\n              }}\r\n              // onEnd={handleStockSelectorChange}\r\n              mode=\"multiple\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={6}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Tooltip\r\n                title={`開始時間與結束時間間隔不可大於5天，沒資料的不可選`}\r\n              >\r\n                <ExclamationCircleOutlined />\r\n              </Tooltip>\r\n              開始時間\r\n            </div>\r\n            <DatePicker\r\n              picker=\"date\"\r\n              mode={datePickerMode.start}\r\n              onPanelChange={(value, mode) => {\r\n                setDatePickerMode({ ...datePickerMode, start: mode });\r\n              }}\r\n              onOpenChange={(open) => {\r\n                if (!open)\r\n                  setDatePickerMode({ ...datePickerMode, start: \"year\" });\r\n              }}\r\n              value={startTime}\r\n              allowClear\r\n              style={{ width: \"100%\" }}\r\n              placeholder=\"選擇開始時間\"\r\n              disabled={stocks.length === 0}\r\n              disabledDate={(current) => {\r\n                const transferedCurrent = current && current.startOf(\"day\");\r\n                const transferedEndTime = endTime && endTime;\r\n                return (\r\n                  (transferedCurrent && transferedCurrent > moment()) ||\r\n                  (transferedCurrent &&\r\n                    !availableDate.includes(\r\n                      transferedCurrent.format(\"YYYY-MM-DD\")\r\n                    )) ||\r\n                  (transferedEndTime &&\r\n                    transferedCurrent > transferedEndTime) ||\r\n                  (transferedEndTime &&\r\n                    transferedEndTime.diff(transferedCurrent) / 86400000 >= 5)\r\n                );\r\n              }}\r\n              onChange={(time) => {\r\n                setStartTime(time && time.startOf(\"day\"));\r\n              }}\r\n            />\r\n          </Col>\r\n          <Col span={6}>\r\n            結束時間\r\n            <DatePicker\r\n              picker=\"date\"\r\n              mode={datePickerMode.end}\r\n              onPanelChange={(value, mode) => {\r\n                setDatePickerMode({ ...datePickerMode, end: mode });\r\n              }}\r\n              onOpenChange={(open) => {\r\n                if (!open)\r\n                  setDatePickerMode({ ...datePickerMode, end: \"year\" });\r\n              }}\r\n              value={endTime}\r\n              allowClear\r\n              style={{ width: \"100%\" }}\r\n              placeholder=\"選擇結束時間\"\r\n              disabled={stocks.length === 0}\r\n              disabledDate={(current) => {\r\n                const transferedCurrent = current && current.startOf(\"day\");\r\n                const transferedStartTime = startTime && startTime;\r\n                return (\r\n                  (transferedCurrent && transferedCurrent > moment()) ||\r\n                  (transferedCurrent &&\r\n                    !availableDate.includes(\r\n                      transferedCurrent.format(\"YYYY-MM-DD\")\r\n                    )) ||\r\n                  (transferedStartTime &&\r\n                    transferedCurrent < transferedStartTime) ||\r\n                  (transferedStartTime &&\r\n                    transferedCurrent.diff(transferedStartTime) / 86400000 >= 5)\r\n                );\r\n              }}\r\n              onChange={(time) => {\r\n                setEndTime(time && time.startOf(\"day\"));\r\n              }}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={6}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Tooltip title={`若選擇不取樣，會將原始資料全部下載`}>\r\n                <ExclamationCircleOutlined />\r\n              </Tooltip>\r\n              {isSample ? \"時間頻率\" : \"不取樣\"}\r\n              <Switch\r\n                checked={isSample}\r\n                onChange={() => {\r\n                  setIsSample(!isSample);\r\n                }}\r\n              />\r\n            </div>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n              <InputNumber\r\n                disabled={!isSample}\r\n                style={{ width: \"100%\" }}\r\n                value={unit}\r\n                step={1}\r\n                onChange={(e) => {\r\n                  setUnit(Math.floor(e));\r\n                }}\r\n              />\r\n              <Select\r\n                disabled={!isSample}\r\n                allowClear\r\n                style={{ width: \"100%\" }}\r\n                onChange={(e) => {\r\n                  setDateFormat(e);\r\n                }}\r\n                value={dateFormat}\r\n                placeholder=\"選擇時間頻率\"\r\n              >\r\n                {DATE_FORMAT.map((dateFormat) => {\r\n                  return (\r\n                    <Option key={Math.random()} value={dateFormat.value}>\r\n                      {dateFormat.header}\r\n                    </Option>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </div>\r\n          </Col>\r\n          <Col span={6}>\r\n            取樣模式\r\n            <Select\r\n              disabled={dateFormat === undefined || !isSample}\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setSampleMode(e);\r\n              }}\r\n              value={sampleMode}\r\n              placeholder=\"選擇取樣模式\"\r\n            >\r\n              {SAMPLE_MODE.map((sampleMode) => {\r\n                return (\r\n                  <Option key={Math.random()} value={sampleMode.value}>\r\n                    {sampleMode.header}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Col span={12}>\r\n            欄位\r\n            <Select\r\n              style={{ width: \"100%\" }}\r\n              onChange={(e) => {\r\n                setFields(e);\r\n              }}\r\n              value={fields}\r\n              mode=\"multiple\"\r\n              placeholder=\"選擇欄位\"\r\n            >\r\n              {getFileTypeFields(fileType).map((field) => {\r\n                return (\r\n                  <Option key={Math.random()} value={field}>\r\n                    {field}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Col>\r\n        </Row>\r\n        <Row style={{ marginTop: \"20px\" }}>\r\n          <Button\r\n            loading={isButtonLoading}\r\n            onClick={async () => {\r\n              let stockIds = [];\r\n              if (isGroup) {\r\n                if (!isNaN(group)) {\r\n                  stockIds = groupList[group].stocks.map((stock) => stock.id);\r\n                }\r\n              } else {\r\n                if (stocks) stockIds = stocks;\r\n              }\r\n\r\n              if (stockIds.length && startTime && endTime) {\r\n                const { url, method } = getRealDataContentAPI(\r\n                  fileType,\r\n                  marketType\r\n                );\r\n                setIsButtonLoading(true);\r\n                await Promise.all(\r\n                  stockIds.map((stockId) => {\r\n                    return defaultAxios({\r\n                      url,\r\n                      method,\r\n                      params: {\r\n                        unit,\r\n                        dateFormat: isSample ? dateFormat : undefined,\r\n                        sampleMode,\r\n                        fields,\r\n                        stockId,\r\n                        futureId: stockId,\r\n                        startTime: startTime.startOf(\"day\").toISOString(),\r\n                        endTime: endTime.endOf(\"day\").toISOString(),\r\n                      },\r\n                    })\r\n                      .then(({ data, headers }) => {\r\n                        const fileName = headers[\"filename\"];\r\n                        const header = data.length\r\n                          ? Object.keys(data[0]).join(\",\") + \"\\n\"\r\n                          : \"\";\r\n                        const transferData =\r\n                          header +\r\n                          data\r\n                            .map((v) => {\r\n                              return Object.values(v).join(\",\");\r\n                            })\r\n                            .join(\"\\n\");\r\n\r\n                        const url = window.URL.createObjectURL(\r\n                          new Blob([transferData])\r\n                        );\r\n                        const link = document.createElement(\"a\");\r\n                        link.href = url;\r\n                        link.setAttribute(\"download\", fileName);\r\n                        document.body.appendChild(link);\r\n                        link.click();\r\n                        window.URL.revokeObjectURL(url);\r\n                        setIsButtonLoading(false);\r\n                      })\r\n                      .catch((err) => {\r\n                        errorNotification(err?.response?.data);\r\n                        setIsButtonLoading(false);\r\n                      });\r\n                  })\r\n                );\r\n              } else {\r\n                errorNotification({\r\n                  statusCode: 400,\r\n                  message: \"stock, startTime, endTime are required\",\r\n                });\r\n              }\r\n            }}\r\n          >\r\n            DOWNLOAD CSV\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    </Spin>\r\n  );\r\n};\r\n\r\nconst FrequentData = function () {\r\n  return (\r\n    <div>\r\n      <FrequentDataElement marketType=\"stock\" />\r\n      <FrequentDataElement marketType=\"future\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FrequentData;\r\n","import { Button, Table, Modal } from \"antd\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { DeleteOutlined } from \"@ant-design/icons\";\r\n\r\nconst ADDER_CONST = 600000;\r\n\r\nconst check = (...arg) => {\r\n  if (true) console.log(...arg);\r\n};\r\n\r\nconst getGetRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockTransaction\r\n        : api.getRealDataFutureTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockDisplay\r\n        : api.getRealDataFutureDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.getRealDataStockOrder\r\n        : api.getRealDataFutureOrder;\r\n  }\r\n};\r\n\r\nconst getPostRealDataApiByType = (fileType, marketType) => {\r\n  console.log(fileType, marketType);\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockTransaction\r\n        : api.postRealDataFutureTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockDisplay\r\n        : api.postRealDataFutureDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockOrder\r\n        : api.postRealDataFutureOrder;\r\n  }\r\n};\r\n\r\nconst getPutRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockTransaction\r\n        : api.putRealDataFutureTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockDisplay\r\n        : api.putRealDataFutureDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.putRealDataStockOrder\r\n        : api.putRealDataFutureOrder;\r\n  }\r\n};\r\n\r\nconst getDeleteRealDataApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockTransaction\r\n        : api.deleteRealDataFutureTransaction;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockDisplay\r\n        : api.deleteRealDataFutureDisplay;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.deleteRealDataStockOrder\r\n        : api.deleteRealDataFutureOrder;\r\n  }\r\n};\r\n\r\nconst getPostRealDataContentApiByType = (fileType, marketType) => {\r\n  switch (fileType) {\r\n    case \"transaction\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockTransactionContent\r\n        : api.postRealDataFutureTransactionContent;\r\n    case \"display\":\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockDisplayContent\r\n        : api.postRealDataFutureDisplayContent;\r\n    default:\r\n      return marketType === \"stock\"\r\n        ? api.postRealDataStockOrderContent\r\n        : api.postRealDataFutureOrderContent;\r\n  }\r\n};\r\n\r\nconst getRealData = async (fileType, marketType, page) => {\r\n  const { url, method } = getGetRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params: {\r\n      page,\r\n    },\r\n  });\r\n};\r\n\r\nconst postRealData = async (id, fileType, marketType) => {\r\n  const { url, method } = getPostRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: { id },\r\n  });\r\n};\r\n\r\nconst putRealData = async (id, fileType, marketType) => {\r\n  const { url, method } = getPutRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: { id },\r\n  });\r\n};\r\n\r\nconst deleteRealData = async (ids, fileType, marketType) => {\r\n  const { url, method } = getDeleteRealDataApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: ids,\r\n  });\r\n};\r\n\r\nconst postRealDataContent = async (id, fileType, marketType, data) => {\r\n  const { url, method } = getPostRealDataContentApiByType(fileType, marketType);\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data,\r\n    params: { id },\r\n  });\r\n};\r\n\r\nconst UploadProgress = ({ file, isLoading, fileType, marketType }) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [currentFile, setCurrentFile] = useState();\r\n  const [isError, setIsError] = useState(false);\r\n  const isFirstUpload = useRef(true);\r\n  const restString = useRef(\"\");\r\n\r\n  const handleNextProgress = useCallback(() => {\r\n    if (progress < currentFile.size) {\r\n      const ADDER = Math.min(ADDER_CONST, currentFile.size - progress);\r\n\r\n      const partFile = currentFile.slice(progress, progress + ADDER);\r\n      const fileReader = new FileReader();\r\n      fileReader.addEventListener(\"load\", (e) => {\r\n        const result = e.target.result.split(\"\\n\");\r\n        result[0] = restString.current + result[0];\r\n        restString.current = result[result.length - 1];\r\n        result.pop();\r\n\r\n        // insert real data content\r\n        check(2);\r\n        let insertArr = [];\r\n        if (result.length < 1000) insertArr.push(result);\r\n        else {\r\n          let cnt = 0;\r\n          while (cnt < result.length) {\r\n            insertArr.push(result.slice(cnt, cnt + 1000));\r\n            cnt += 1000;\r\n          }\r\n        }\r\n        Promise.all(\r\n          insertArr.map((arr) => {\r\n            return postRealDataContent(\r\n              currentFile.name,\r\n              fileType,\r\n              marketType,\r\n              arr\r\n            );\r\n          })\r\n        )\r\n          .then(() => {\r\n            setProgress(progress + ADDER);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n            setIsError(true);\r\n          });\r\n      });\r\n      fileReader.readAsText(partFile);\r\n    } else {\r\n      putRealData(currentFile.name, fileType, marketType)\r\n        .then(() => {\r\n          // toggle real data status\r\n          check(3);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n          setIsError(true);\r\n        });\r\n    }\r\n  }, [currentFile, progress, fileType, marketType]);\r\n\r\n  useEffect(() => {\r\n    //TODO 在按一次上傳 file為何會變??\r\n    setCurrentFile(file);\r\n    setProgress(0);\r\n  }, [file]);\r\n\r\n  useEffect(() => {\r\n    if (isLoading && currentFile && fileType) {\r\n      if (isFirstUpload.current) {\r\n        postRealData(currentFile.name, fileType, marketType)\r\n          .then(() => {\r\n            isFirstUpload.current = false;\r\n            handleNextProgress();\r\n            //insert real data\r\n            check(1);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n            setIsError(true);\r\n          });\r\n      } else handleNextProgress();\r\n    }\r\n  }, [isLoading, currentFile, fileType, marketType, handleNextProgress]);\r\n\r\n  return currentFile ? (\r\n    <div>\r\n      {currentFile.name}{\" \"}\r\n      {isError\r\n        ? \"ERROR\"\r\n        : ((progress / currentFile.size) * 100).toFixed(2) + \"%\"}\r\n    </div>\r\n  ) : (\r\n    <div />\r\n  );\r\n};\r\n\r\nconst ContentContainer = ({ fileType, marketType }) => {\r\n  const [fileList, setFileList] = useState([]);\r\n  const [isLoadingList, setIsLoadingList] = useState([]);\r\n  const [realData, setRealData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleGetRealData = useCallback(() => {\r\n    getRealData(fileType, marketType, { page, pageSize }).then(({ data }) => {\r\n      setRealData(data.content);\r\n      setTotalSize(data.totalSize);\r\n      setIsLoading(false);\r\n    });\r\n  }, [page, pageSize, fileType, marketType]);\r\n\r\n  useEffect(() => {\r\n    handleGetRealData();\r\n  }, [handleGetRealData]);\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"file\"\r\n        multiple\r\n        onChange={(e) => {\r\n          const { files } = e.target;\r\n          const fileArray = Array.from(files);\r\n          setFileList(fileArray);\r\n          setIsLoadingList([...new Array(fileArray.length)].fill(false));\r\n        }}\r\n      />\r\n      <Button\r\n        type=\"primary\"\r\n        onClick={() => {\r\n          setIsLoadingList(isLoadingList.map(() => true));\r\n        }}\r\n      >\r\n        上傳\r\n      </Button>\r\n      <Button\r\n        type=\"primary\"\r\n        danger\r\n        onClick={() => {\r\n          Modal.error({\r\n            closable: true,\r\n            content: \"確定要刪除嗎?\",\r\n            maskClosable: true,\r\n            okText: \"確定\",\r\n            onOk: () => {\r\n              setIsLoading(true);\r\n              const ids = realData\r\n                .filter((v) => v.isFinished === 0)\r\n                .map((v) => v.id);\r\n              deleteRealData(ids, fileType, marketType).then(() => {\r\n                handleGetRealData();\r\n              });\r\n            },\r\n          });\r\n        }}\r\n      >\r\n        刪除未完成\r\n      </Button>\r\n      <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n        {fileList.map((file, index) => {\r\n          return (\r\n            <UploadProgress\r\n              key={Math.random()}\r\n              file={file}\r\n              isLoading={isLoadingList[index]}\r\n              fileType={fileType}\r\n              marketType={marketType}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      <Table\r\n        loading={isLoading}\r\n        dataSource={realData.map((v) => {\r\n          return {\r\n            key: Math.random(),\r\n            ...v,\r\n          };\r\n        })}\r\n        columns={[\r\n          {\r\n            title: \"檔名\",\r\n            dataIndex: \"id\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"已完成\",\r\n            dataIndex: \"isFinished\",\r\n            render: (data) => {\r\n              return data === 0 ? \"否\" : \"是\";\r\n            },\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"刪除\",\r\n            dataIndex: \"action\",\r\n            render: (data, { id }) => (\r\n              <Button\r\n                type=\"link\"\r\n                shape=\"circle\"\r\n                className=\"inline-flex justify-center items-center\"\r\n                onClick={() => {\r\n                  Modal.error({\r\n                    closable: true,\r\n                    content: `確定要刪除${id}嗎?`,\r\n                    maskClosable: true,\r\n                    okText: \"確定\",\r\n                    onOk: () => {\r\n                      setIsLoading(true);\r\n                      deleteRealData([id], fileType, marketType).then(() => {\r\n                        handleGetRealData();\r\n                      });\r\n                    },\r\n                  });\r\n                }}\r\n                icon={<DeleteOutlined />}\r\n              />\r\n            ),\r\n          },\r\n        ]}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RealDataUpload = () => {\r\n  return (\r\n    <div style={{ textAlign: \"center\" }}>\r\n      <span style={{ color: \"red\" }}>\r\n        若\"已完成\"為否 請將該筆資料刪除後再重新上傳\r\n      </span>\r\n      {[\r\n        { marketType: \"stock\", title: \"證交\" },\r\n        { marketType: \"future\", title: \"期交\" },\r\n      ].map(({ marketType, title }) => {\r\n        return (\r\n          <div\r\n            style={{ marginTop: \"20px\", marginBottom: \"20px\" }}\r\n            key={Math.random()}\r\n          >\r\n            {title}\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-around\",\r\n              }}\r\n            >\r\n              <div>\r\n                委託檔\r\n                <ContentContainer fileType=\"order\" marketType={marketType} />\r\n              </div>\r\n              <div>\r\n                成交檔\r\n                <ContentContainer\r\n                  fileType=\"transaction\"\r\n                  marketType={marketType}\r\n                />\r\n              </div>\r\n              <div>\r\n                揭示檔\r\n                <ContentContainer fileType=\"display\" marketType={marketType} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\nexport default RealDataUpload;\r\n","import { Button, DatePicker, Table, Slider, Tabs, Select } from \"antd\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst getRealDataOrderContent = async (params) => {\r\n  const { url, method } = api.getRealDataStockOrderContent;\r\n  params.isSimulatedOrder = true;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params,\r\n  });\r\n};\r\n\r\nconst resetStock = (stockId) => {\r\n  return defaultAxios({\r\n    url: api.resetStock.url,\r\n    method: api.resetStock.method,\r\n    data: {\r\n      id: stockId,\r\n      isReset: true,\r\n      isAutoDisplay: false,\r\n    },\r\n  });\r\n};\r\n\r\nconst getOrder = (stockId, startTime, endTime) => {\r\n  const { url, method } = api.getOrder;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    params: {\r\n      stockId,\r\n      createdTime: {\r\n        min: startTime,\r\n        max: endTime,\r\n      },\r\n      order: {\r\n        orderBy: \"createdTime\",\r\n        order: \"ASC\",\r\n      },\r\n    },\r\n  });\r\n};\r\n\r\nconst sendOrder = ({ id, realDataOrderId, ...order }) => {\r\n  const { url, method } = api.postOrder;\r\n  return defaultAxios({\r\n    url,\r\n    method,\r\n    data: {\r\n      ...order,\r\n      investorId: null,\r\n    },\r\n  });\r\n};\r\n\r\nconst debugOrders = (orders, type) => {\r\n  if (false) {\r\n    console.log(type, orders);\r\n  }\r\n};\r\n\r\nexport const OrderSender = ({ orders, stockId, onReset }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isRunning, setIsRunnung] = useState(false);\r\n  const [speed, setSpeed] = useState(1);\r\n  const timeOut = useRef();\r\n  const speedRef = useRef(1);\r\n  const sliderDelay = useRef();\r\n\r\n  useEffect(() => {\r\n    if (timeOut.current) {\r\n      clearTimeout(timeOut.current);\r\n      timeOut.current = undefined;\r\n    }\r\n    setCurrentIndex(0);\r\n    setIsRunnung(false);\r\n\r\n    return () => {\r\n      if (sliderDelay.current) clearTimeout(sliderDelay.current);\r\n      if (timeOut.current) clearTimeout(timeOut.current);\r\n    };\r\n  }, [orders]);\r\n\r\n  const handleTimeOut = useCallback(() => {\r\n    const currentOrder = orders[currentIndex];\r\n    const nextOrder = orders[currentIndex + 1];\r\n    sendOrder(currentOrder).catch((err) => {\r\n      errorNotification(err?.response?.data);\r\n    });\r\n    if (nextOrder) {\r\n      const delay =\r\n        Date.parse(nextOrder.createdTime) -\r\n        Date.parse(currentOrder.createdTime);\r\n      timeOut.current = setTimeout(() => {\r\n        setCurrentIndex(currentIndex + 1);\r\n      }, Math.max(delay / speedRef.current, 50));\r\n    }\r\n  }, [currentIndex, orders]);\r\n\r\n  useEffect(() => {\r\n    if (isRunning) {\r\n      handleTimeOut();\r\n    } else if (timeOut.current) {\r\n      clearTimeout(timeOut.current);\r\n      timeOut.current = undefined;\r\n    }\r\n  }, [isRunning, handleTimeOut]);\r\n\r\n  useEffect(() => {\r\n    speedRef.current = speed;\r\n  }, [speed]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setIsRunnung(true);\r\n          }}\r\n          disabled={!stockId || !orders.length}\r\n        >\r\n          開始模擬\r\n        </Button>\r\n        <Button\r\n          style={{ background: \"#91A194\", color: \"white\" }}\r\n          onClick={() => {\r\n            setIsRunnung(false);\r\n          }}\r\n          disabled={!stockId || !isRunning}\r\n        >\r\n          暫停模擬\r\n        </Button>\r\n        <div style={{ width: \"200px\" }}>\r\n          播放速度 {speed} 倍\r\n          <Slider\r\n            value={speed}\r\n            max={10}\r\n            disabled={!stockId || !orders.length}\r\n            onChange={(e) => {\r\n              setSpeed(e);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div style={{ width: \"100%\" }}>\r\n        狀態({orders.length ? currentIndex + 1 : 0} / {orders.length} )\r\n        <Slider\r\n          value={currentIndex}\r\n          max={orders.length - 1}\r\n          disabled={!stockId || !orders.length}\r\n          onChange={(e) => {\r\n            setCurrentIndex(e);\r\n            setIsRunnung(false);\r\n            if (sliderDelay.current) clearTimeout(sliderDelay.current);\r\n            sliderDelay.current = setTimeout(() => {\r\n              onReset && onReset();\r\n              const order = orders[currentIndex];\r\n              resetStock(\r\n                order.stockId === stockId ? stockId : order.stockId\r\n              ).catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n            }, 1000);\r\n          }}\r\n        />\r\n        <Table\r\n          rowKey=\"id\"\r\n          columns={[\r\n            {\r\n              title: \"價格類型\",\r\n              dataIndex: \"priceType\",\r\n              render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"類型\",\r\n              dataIndex: \"method\",\r\n              render: (data) => <span>{data ? \"sell\" : \"buy\"}</span>,\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"價格\",\r\n              dataIndex: \"price\",\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"數量\",\r\n              dataIndex: \"quantity\",\r\n              key: Math.random(),\r\n            },\r\n\r\n            {\r\n              title: \"副類型\",\r\n              dataIndex: \"subMethod\",\r\n              render: (data) => (\r\n                <span>\r\n                  {data ? \"UPDATE\" : data === null ? \"NULL\" : \"CANCEL\"}\r\n                </span>\r\n              ),\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"時間限制\",\r\n              dataIndex: \"timeRestriction\",\r\n              render: (data) => (\r\n                <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n              ),\r\n              key: Math.random(),\r\n            },\r\n            {\r\n              title: \"時間\",\r\n              dataIndex: \"createdTime\",\r\n              render: (data) => (\r\n                <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n              ),\r\n            },\r\n          ]}\r\n          pagination={false}\r\n          dataSource={\r\n            orders.length && [{ ...orders[currentIndex], key: Math.random() }]\r\n          }\r\n          sticky\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst RealDataSimulator = ({ customResetStock, onReset }) => {\r\n  // Functional state\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  //Query state\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  debugOrders(orders, \"real\");\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          開始時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"選擇開始時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) setStartTime(dayjs(time).startOf(\"day\").toISOString());\r\n              else setStartTime(time);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          結束時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"選擇結束時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) setEndTime(dayjs(time).startOf(\"day\").toISOString());\r\n              else setEndTime(time);\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          danger\r\n          onClick={async () => {\r\n            let tempStockId = stockId;\r\n            if (customResetStock) {\r\n              tempStockId = await customResetStock(stockId);\r\n            } else {\r\n              await resetStock(stockId).catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n            }\r\n\r\n            console.log(startTime, endTime);\r\n            getRealDataOrderContent({\r\n              stockId,\r\n              createdTime: {\r\n                min: startTime,\r\n                max: endTime,\r\n              },\r\n            })\r\n              .then(({ data }) => {\r\n                setOrders(\r\n                  data.content.map((v) => {\r\n                    return {\r\n                      ...v,\r\n                      investorId: null,\r\n                      stockId: tempStockId,\r\n                    };\r\n                  })\r\n                );\r\n              })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n          }}\r\n          disabled={!stockId}\r\n        >\r\n          載入委託\r\n        </Button>\r\n      </div>\r\n      <OrderSender orders={orders} stockId={stockId} onReset={onReset} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ReplaySimulator = ({ customResetStock, onReset }) => {\r\n  // Functional state\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  //Query state\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n\r\n  debugOrders(orders, \"replay\");\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          開始時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇開始時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) setStartTime(dayjs(time).toISOString());\r\n              else setStartTime(time);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          結束時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇結束時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) setEndTime(dayjs(time).toISOString());\r\n              else setEndTime(time);\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          disabled={!stockId}\r\n          onClick={async () => {\r\n            let tempStockId = stockId;\r\n            if (customResetStock) {\r\n              tempStockId = await customResetStock(stockId);\r\n            }\r\n\r\n            getOrder(stockId, startTime, endTime)\r\n              .then(async ({ data }) => {\r\n                setOrders(\r\n                  data.content.map((v) => {\r\n                    return {\r\n                      ...v,\r\n                      investorId: null,\r\n                      stockId: tempStockId,\r\n                    };\r\n                  })\r\n                ).catch((err) => {\r\n                  errorNotification(err?.response?.data);\r\n                });\r\n                if (!customResetStock) {\r\n                  await resetStock(stockId).catch((err) => {\r\n                    errorNotification(err?.response?.data);\r\n                  });\r\n                }\r\n              })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n          }}\r\n        >\r\n          載入重播\r\n        </Button>\r\n      </div>\r\n      <OrderSender orders={orders} stockId={stockId} onReset={onReset} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst CaseSimulator = ({ customResetStock, onReset }) => {\r\n  // Functional state\r\n  const [orders, setOrders] = useState([]);\r\n  const [caseData, setCaseData] = useState([]);\r\n  const [selectedCaseId, setSelectedCaseId] = useState();\r\n\r\n  //Query state\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n\r\n  useEffect(() => {\r\n    if (stockId) {\r\n      defaultAxios({\r\n        url: api.getVirtualOrderContainer.url,\r\n        method: api.getVirtualOrderContainer.method,\r\n        params: {\r\n          stockId,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setCaseData(\r\n            res.data.content.map((content) => ({\r\n              label: content.name,\r\n              value: content.id,\r\n            }))\r\n          );\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }, [stockId]);\r\n\r\n  debugOrders(orders, \"case\");\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          選擇情境\r\n          <Select\r\n            className=\"w-full\"\r\n            options={caseData}\r\n            onChange={(caseId) => {\r\n              setSelectedCaseId(caseId);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          開始時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇開始時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) setStartTime(dayjs(time).toISOString());\r\n              else setStartTime(time);\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          disabled={!(stockId && selectedCaseId && startTime)}\r\n          onClick={async () => {\r\n            let tempStockId = stockId;\r\n            if (customResetStock) {\r\n              tempStockId = await customResetStock(stockId);\r\n            } else {\r\n              await resetStock(stockId).catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n            }\r\n\r\n            defaultAxios({\r\n              url: api.getVirtualOrder.url,\r\n              method: api.getVirtualOrder.method,\r\n              params: {\r\n                virtualOrderContainerId: selectedCaseId,\r\n              },\r\n            })\r\n              .then(({ data }) => {\r\n                const baseTime = Date.parse(startTime);\r\n                let accumulatedDelay = 0;\r\n                const orders = data.content.map(({ delay, id, ...order }) => {\r\n                  accumulatedDelay += delay || 1;\r\n                  const createdTime = new Date(\r\n                    baseTime + accumulatedDelay\r\n                  ).toISOString();\r\n                  return {\r\n                    ...order,\r\n                    createdTime,\r\n                    investorId: null,\r\n                    stockId: tempStockId,\r\n                  };\r\n                });\r\n\r\n                setOrders(orders);\r\n              })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n          }}\r\n        >\r\n          載入情境\r\n        </Button>\r\n      </div>\r\n      <OrderSender orders={orders} stockId={stockId} onReset={onReset} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Simulator = ({ customResetStock, onReset }) => {\r\n  return (\r\n    <Tabs type=\"card\" centered>\r\n      <TabPane tab=\"真實資料\" key=\"1\">\r\n        <RealDataSimulator\r\n          customResetStock={customResetStock}\r\n          onReset={onReset}\r\n        />\r\n        ;\r\n      </TabPane>\r\n      <TabPane tab=\"重播資料\" key=\"2\">\r\n        <ReplaySimulator\r\n          customResetStock={customResetStock}\r\n          onReset={onReset}\r\n        />\r\n        ;\r\n      </TabPane>\r\n      <TabPane tab=\"情境資料\" key=\"3\">\r\n        <CaseSimulator customResetStock={customResetStock} onReset={onReset} />;\r\n      </TabPane>\r\n    </Tabs>\r\n  );\r\n};\r\n\r\nexport default Simulator;\r\n","import { DatePicker } from \"antd\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst StockDatePicker = ({ onStockChange, onStartChange, onEndChange }) => {\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-around my-6 items-center\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              onStockChange && onStockChange(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          開始時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇開始時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              const tempTime = time ? dayjs(time).toISOString() : time;\r\n\r\n              onStartChange && onStartChange(tempTime);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-1/6\">\r\n          結束時間\r\n          <DatePicker\r\n            allowClear\r\n            style={{ width: \"100%\" }}\r\n            showTime\r\n            placeholder=\"選擇結束時間\"\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              const tempTime = time ? dayjs(time).toISOString() : time;\r\n\r\n              onEndChange && onEndChange(tempTime);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockDatePicker;\r\n","import { Button } from \"antd\";\r\nimport React from \"react\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst DownloadButton = ({ type, stockId, startTime, endTime }) => {\r\n  function download() {\r\n    const apiName = type === \"order\" ? \"getOrder\" : \"getTransaction\";\r\n    defaultAxios({\r\n      url: api[apiName].url,\r\n      method: api[apiName].method,\r\n      params: {\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const content = res.data.content.length === 0 ? [{}] : res.data.content;\r\n        const key = Object.keys(content[0]).join(\",\") + \"\\n\";\r\n        const csvFile = content.reduce(\r\n          (pre, cur) => pre + Object.values(cur).join(\",\") + \"\\n\",\r\n          key\r\n        );\r\n        const fileName = `${type}_` + new Date().getTime() + \".csv\";\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\r\n          \"href\",\r\n          \"data:text/csv;charset=utf-8,%EF%BB%BF\" + encodeURI(csvFile)\r\n        );\r\n        link.setAttribute(\"download\", fileName);\r\n        link.click();\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Button type=\"primary\" onClick={download}>\r\n      Download CSV\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default DownloadButton;\r\n","import { Table } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport StockDatePicker from \"../../../component/stock-date-picker\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport DownloadButton from \"../downloadButton\";\r\n\r\nconst OrderTable = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, stockId, startTime, endTime]);\r\n\r\n  return (\r\n    <div>\r\n      <StockDatePicker\r\n        onStockChange={(e) => {\r\n          setStockId(e);\r\n        }}\r\n        onStartChange={(e) => {\r\n          setStartTime(e);\r\n        }}\r\n        onEndChange={(e) => {\r\n          setEndTime(e);\r\n        }}\r\n      />\r\n      <DownloadButton\r\n        type=\"order\"\r\n        stockId={stockId}\r\n        startTime={startTime}\r\n        endTime={endTime}\r\n      />\r\n      <Table\r\n        columns={[\r\n          {\r\n            title: \"訂單 ID\",\r\n            dataIndex: \"orderId\",\r\n            render: (data) => <span>{data || \"NULL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"投資 ID\",\r\n            dataIndex: \"investorId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"類型\",\r\n            dataIndex: \"method\",\r\n            render: (data) => <span>{data ? \"sell\" : \"buy\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"副類型\",\r\n            dataIndex: \"subMethod\",\r\n            render: (data) => (\r\n              <span>{data ? \"UPDATE\" : data === null ? \"NULL\" : \"CANCEL\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格\",\r\n            dataIndex: \"price\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"數量\",\r\n            dataIndex: \"quantity\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格類型\",\r\n            dataIndex: \"priceType\",\r\n            render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"status\",\r\n            render: (data) => <span>{data ? \"FULL\" : \"PARTIAL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"時間限制\",\r\n            dataIndex: \"timeRestriction\",\r\n            render: (data) => (\r\n              <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"委託時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderTable;\r\n","import { Table } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport StockDatePicker from \"../../../component/stock-date-picker\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport DownloadButton from \"../downloadButton\";\r\n\r\nconst PriceTable = () => {\r\n  const [orederData, setOrderData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [stockId, setStockId] = useState();\r\n  const [startTime, setStartTime] = useState();\r\n  const [endTime, setEndTime] = useState();\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getTransaction.url,\r\n      method: api.getTransaction.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        stockId,\r\n        createdTime: { min: startTime, max: endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setOrderData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, stockId, startTime, endTime]);\r\n  return (\r\n    <div>\r\n      <StockDatePicker\r\n        onStockChange={(e) => {\r\n          setStockId(e);\r\n        }}\r\n        onStartChange={(e) => {\r\n          setStartTime(e);\r\n        }}\r\n        onEndChange={(e) => {\r\n          setEndTime(e);\r\n        }}\r\n      />\r\n      <DownloadButton\r\n        type=\"investor\"\r\n        stockId={stockId}\r\n        startTime={startTime}\r\n        endTime={endTime}\r\n      />\r\n      <Table\r\n        columns={[\r\n          {\r\n            title: \"投資 ID\",\r\n            dataIndex: \"investorId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"股票 ID\",\r\n            dataIndex: \"stockId\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"類型\",\r\n            dataIndex: \"method\",\r\n            render: (data) => <span>{data ? \"sell\" : \"buy\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格\",\r\n            dataIndex: \"price\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"數量\",\r\n            dataIndex: \"quantity\",\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"價格類型\",\r\n            dataIndex: \"priceType\",\r\n            render: (data) => <span>{data ? \"LIMIT\" : \"MARKET\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"status\",\r\n            render: (data) => <span>{data ? \"FULL\" : \"PARTIAL\"}</span>,\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"時間限制\",\r\n            dataIndex: \"timeRestriction\",\r\n            render: (data) => (\r\n              <span>{data ? \"IOC\" : data === 2 ? \"FOK\" : \"ROD\"}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n          {\r\n            title: \"成交時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n            key: Math.random(),\r\n          },\r\n        ]}\r\n        dataSource={orederData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PriceTable;\r\n","import React, { Component } from \"react\";\r\n\r\nimport { CSVReader } from \"react-papaparse\";\r\nimport { api, defaultAxios } from \"../../../environment/api\";\r\nimport errorNotification from \"../../../utils/errorNotification\";\r\nimport { Button } from \"antd\";\r\n\r\nconst buttonRef = React.createRef();\r\n\r\nexport default class ReadFile extends Component {\r\n  handleOpenDialog = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.open(e);\r\n    }\r\n  };\r\n\r\n  handleOnFileLoad = (data) => {\r\n    console.log(\"---------------------------\");\r\n    console.log(data);\r\n\r\n    data.forEach(function (obj, index) {\r\n      if (index > 0 && obj.data[0] != \"\") {\r\n        console.log(index, obj.data);\r\n\r\n        let sendData = {\r\n          method: Number(obj.data[0]), // BUY = 0, SELL = 1\r\n          price: Number(obj.data[1]),\r\n          quantity: Number(obj.data[2]),\r\n          priceType: Number(obj.data[3]), // MARKET = 0, LIMIT = 1\r\n          timeRestriction: Number(obj.data[4]), // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: Number(obj.data[6]),\r\n          delay: Number(obj.data[7]),\r\n        };\r\n\r\n        if (obj.data[5] == \"0\") {\r\n          sendData = {\r\n            method: Number(obj.data[0]), // BUY = 0, SELL = 1\r\n            price: Number(obj.data[1]),\r\n            quantity: Number(obj.data[2]),\r\n            priceType: Number(obj.data[3]), // MARKET = 0, LIMIT = 1\r\n            timeRestriction: Number(obj.data[4]), // ROD = 0, IOC = 1, FOK = 2\r\n            virtualOrderContainerId: Number(obj.data[6]),\r\n            delay: Number(obj.data[7]),\r\n            subMethod: Number(obj.data[5]),\r\n          };\r\n        }\r\n\r\n        // 限價單\r\n        defaultAxios({\r\n          url: api.postVirtualOrder.url,\r\n          method: api.postVirtualOrder.method,\r\n          data: sendData,\r\n        })\r\n          .then((res) => {\r\n            // setData(res.data);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  handleOnError = (err, file, inputElem, reason) => {\r\n    console.log(err);\r\n  };\r\n\r\n  handleOnRemoveFile = (data) => {\r\n    console.log(\"---------------------------\");\r\n    console.log(data);\r\n    console.log(\"---------------------------\");\r\n  };\r\n\r\n  handleRemoveFile = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.removeFile(e);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <CSVReader\r\n        ref={buttonRef}\r\n        onFileLoad={this.handleOnFileLoad}\r\n        onError={this.handleOnError}\r\n        noClick\r\n        noDrag\r\n        onRemoveFile={this.handleOnRemoveFile}\r\n      >\r\n        {({ file }) => (\r\n          <aside\r\n            style={{\r\n              display: \"flex\",\r\n              flexDirection: \"row\",\r\n              marginBottom: 10,\r\n            }}\r\n          >\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.handleOpenDialog}\r\n              style={{\r\n                borderRadius: 0,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                width: \"40%\",\r\n                paddingLeft: 0,\r\n                paddingRight: 0,\r\n              }}\r\n            >\r\n              匯入情境(.csv)\r\n            </Button>\r\n            <div\r\n              style={{\r\n                borderWidth: 1,\r\n                borderStyle: \"solid\",\r\n                borderColor: \"#ccc\",\r\n                height: 32,\r\n                lineHeight: 1.75,\r\n                marginTop: 0,\r\n                marginBottom: 5,\r\n                paddingLeft: 13,\r\n                paddingTop: 3,\r\n                width: \"60%\",\r\n              }}\r\n            >\r\n              {file && file.name}\r\n            </div>\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              style={{\r\n                borderRadius: 0,\r\n                marginLeft: 0,\r\n                marginRight: 0,\r\n                paddingLeft: 20,\r\n                paddingRight: 20,\r\n              }}\r\n              onClick={this.handleRemoveFile}\r\n            >\r\n              Remove\r\n            </Button>\r\n          </aside>\r\n        )}\r\n      </CSVReader>\r\n    );\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n// import ReactDOM from 'react-dom';\r\n// import CSVReader from 'react-csv-reader';\r\nimport ReadFile from \"./read-file\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Button, Checkbox, InputNumber, Select } from \"antd\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\n\r\nconst QuickOrder = () => {\r\n  let timer;\r\n  const [stockId, setStockId] = useState(undefined);\r\n  const [isRunning, setIsRunning] = useState(true);\r\n  const [containerData, setContainerData] = useState([]);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [showType, setShowType] = useState(\"請選擇情境\");\r\n  const [timeRestriction, setTimeRestriction] = useState(0);\r\n  const [isAutoTime, setIsAutoTime] = useState(false);\r\n  // const [isSimulated, setIsSimulated] = useState(false);\r\n\r\n  const [display, setDisplay] = useState();\r\n\r\n  // 標記A1、B1\r\n  function matchFiveTick(price, type) {\r\n    if (display) {\r\n      if (type == \"buyQuantity\") {\r\n        return price == display.B1;\r\n      } else if (type == \"sellQuantity\") {\r\n        return price == display.A1;\r\n      }\r\n    }\r\n  }\r\n\r\n  // 限價單\r\n  function sendOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      if (stockId)\r\n        defaultAxios({\r\n          url: api.postOrder.url,\r\n          method: api.postOrder.method,\r\n          data: {\r\n            // investorId: 1,\r\n            stockId,\r\n            method: data.method, // BUY = 0, SELL = 1\r\n            price: data.price,\r\n            quantity: data.quantity,\r\n            priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n            timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n            isAutoTime,\r\n          },\r\n        })\r\n          .then((res) => {\r\n            refreshDisplay(showType);\r\n          })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  // 市價單\r\n  function sendMarketOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      defaultAxios({\r\n        url: api.postOrder.url,\r\n        method: api.postOrder.method,\r\n        data: {\r\n          // investorId: 1,\r\n          stockId,\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          isAutoTime,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          refreshDisplay(showType);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  // 取消單\r\n  function cancelOrder(data) {\r\n    if (showType == \"請選擇情境\") {\r\n      defaultAxios({\r\n        url: api.postOrder.url,\r\n        method: api.postOrder.method,\r\n        data: {\r\n          // investorId: 1,\r\n          stockId,\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          subMethod: 0,\r\n          isAutoTime,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          refreshDisplay(showType);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.postVirtualOrder.url,\r\n        method: api.postVirtualOrder.method,\r\n        data: {\r\n          method: data.method, // BUY = 0, SELL = 1\r\n          price: data.price,\r\n          quantity: data.quantity,\r\n          priceType: data.priceType, // MARKET = 0, LIMIT = 1\r\n          timeRestriction: timeRestriction, // ROD = 0, IOC = 1, FOK = 2\r\n          subMethod: 0,\r\n          virtualOrderContainerId: showType,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n  function refreshDisplay(showType) {\r\n    if (showType == \"請選擇情境\") {\r\n      if (stockId)\r\n        defaultAxios({\r\n          url: api.getDisplay.url,\r\n          method: api.getDisplay.method,\r\n          params: {\r\n            stockId,\r\n            isGetLatest: true,\r\n          },\r\n        }).then((res) => {\r\n          setData(res.data);\r\n        });\r\n    } else {\r\n      defaultAxios({\r\n        url: api.getVirtualOrder.url + \"/\" + showType,\r\n        method: api.getVirtualOrder.method,\r\n        params: {\r\n          isGetLatest: true,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          setData(res.data.display);\r\n        })\r\n        .catch((err) => {\r\n          errorNotification(err?.response?.data);\r\n        });\r\n    }\r\n  }\r\n\r\n  function setData(data) {\r\n    let newFiveTickRangeData = JSON.parse(JSON.stringify(data.fiveTickRange));\r\n    newFiveTickRangeData = newFiveTickRangeData.sort(\r\n      (a, b) => a.price - b.price\r\n    );\r\n\r\n    data.fiveTickRange.forEach(function (item) {\r\n      if (item.sellQuantity > 0) {\r\n        data.A1 = item.price;\r\n      }\r\n    });\r\n    newFiveTickRangeData.forEach(function (item) {\r\n      if (item.buyQuantity > 0) {\r\n        data.B1 = item.price;\r\n      }\r\n    });\r\n    setDisplay(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getVirtualOrderContainer.url,\r\n      method: api.getVirtualOrderContainer.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        let data = [];\r\n        res.data.content.forEach(function (content) {\r\n          data.push({\r\n            label: content.name,\r\n            value: content.id,\r\n          });\r\n        });\r\n        setContainerData(data);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n\r\n    if (isRunning) {\r\n      timer = setInterval(() => {\r\n        refreshDisplay(showType);\r\n      }, 1000);\r\n    } else {\r\n      // refreshDisplay(showType);\r\n    }\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isRunning, stockId]);\r\n\r\n  return (\r\n    <div className=\"w-10/12 mx-auto\">\r\n      {/* <div>\r\n        <ReadFile />\r\n        <hr className=\"mb-5\" />\r\n      </div> */}\r\n      <div>\r\n        <Select\r\n          value={showType}\r\n          style={{ width: 120, marginBottom: \"10px\", marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setIsRunning(value === \"請選擇情境\");\r\n            clearInterval(timer);\r\n            setShowType(value);\r\n            refreshDisplay(value);\r\n          }}\r\n          options={[\r\n            { label: \"請選擇情境\", value: \"請選擇情境\" },\r\n            ...containerData,\r\n          ]}\r\n        />\r\n\r\n        <InputNumber\r\n          min={1}\r\n          defaultValue={quantity}\r\n          style={{ marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setQuantity(value);\r\n          }}\r\n        />\r\n\r\n        <Select\r\n          value={timeRestriction}\r\n          style={{ width: 120, marginBottom: \"10px\", marginRight: \"10px\" }}\r\n          onChange={(value) => {\r\n            setTimeRestriction(value);\r\n          }}\r\n          options={[\r\n            {\r\n              label: \"ROD\",\r\n              value: 0,\r\n            },\r\n            {\r\n              label: \"IOC\",\r\n              value: 1,\r\n            },\r\n            {\r\n              label: \"FOK\",\r\n              value: 2,\r\n            },\r\n          ]}\r\n        />\r\n        {showType == \"請選擇情境\" ? (\r\n          <StockSelector\r\n            style={{ width: 120 }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        ) : (\r\n          <Button\r\n            type=\"primary\"\r\n            danger\r\n            onClick={() => {\r\n              defaultAxios({\r\n                url: api.resetVirtualOrder.url + \"/\" + showType,\r\n                method: api.resetVirtualOrder.method,\r\n                data: {\r\n                  id: 1,\r\n                  isReset: true,\r\n                },\r\n              })\r\n                .then(() => {\r\n                  refreshDisplay(showType);\r\n                })\r\n                .catch((err) => {\r\n                  errorNotification(err?.response?.data);\r\n                });\r\n            }}\r\n          >\r\n            Reset\r\n          </Button>\r\n        )}\r\n        {/* <Checkbox\r\n          checked={isAutoTime}\r\n          onChange={(e) => {\r\n            const { checked } = e.target;\r\n            setIsAutoTime(checked);\r\n            // if (!checked) {\r\n            //   setIsSimulated(false);\r\n            // }\r\n          }}\r\n        >\r\n          是否自動填入過去時間\r\n        </Checkbox> */}\r\n        {/* <Checkbox\r\n          checked={isSimulated}\r\n          onChange={(e) => {\r\n            setIsSimulated(e.target.checked);\r\n          }}\r\n          disabled={!isAutoTime}\r\n        >\r\n          是否為虛擬單\r\n        </Checkbox> */}\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          display: showType === \"請選擇情境\" && !stockId ? \"none\" : undefined,\r\n        }}\r\n      >\r\n        <div className=\"flex mb-1 items-center\">\r\n          <Button\r\n            className=\"w-full\"\r\n            style={{ background: \"lightpink\", borderColor: \"lightpink\" }}\r\n            onClick={() => {\r\n              sendMarketOrder({\r\n                method: 0,\r\n                price: 0,\r\n                quantity: quantity,\r\n                priceType: 0,\r\n              });\r\n            }}\r\n          >\r\n            &nbsp;\r\n          </Button>\r\n          <div className={\"bg-blue-300 text-center w-1/4 mx-1 h-full py-1.5\"}>\r\n            市價\r\n          </div>\r\n          <Button\r\n            className=\"w-full py-3\"\r\n            style={{ background: \"lightgreen\", borderColor: \"lightgreen\" }}\r\n            onClick={() => {\r\n              sendMarketOrder({\r\n                method: 1,\r\n                price: 0,\r\n                quantity: quantity,\r\n                priceType: 0,\r\n              });\r\n            }}\r\n          >\r\n            &nbsp;\r\n          </Button>\r\n        </div>\r\n        <hr className=\"my-2\" />\r\n        <div className=\"flex mb-1 items-center\">\r\n          <Button\r\n            className=\"w-1/2 mr-1\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            取消單\r\n          </Button>\r\n          <Button\r\n            className=\"w-1/2\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            限價單\r\n          </Button>\r\n          <div className={\"text-center w-1/4 mx-1 h-full py-1.5\"}>&nbsp;</div>\r\n          <Button\r\n            className=\"w-1/2 mr-1\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            限價單\r\n          </Button>\r\n          <Button\r\n            className=\"w-1/2\"\r\n            style={{ background: \"none\", border: \"none\" }}\r\n          >\r\n            取消單\r\n          </Button>\r\n        </div>\r\n        {display &&\r\n          display.tickRange.map((range, key) => (\r\n            <div key={key} className=\"flex mb-1 items-center\">\r\n              <Button\r\n                className=\"w-1/2 mr-1\"\r\n                style={{ background: \"#ffb6c180\", borderColor: \"lightpink\" }}\r\n                onClick={() => {\r\n                  cancelOrder({\r\n                    method: 0,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.investorBuyQuantity || \" \"}\r\n              </Button>\r\n              <Button\r\n                className=\"w-1/2\"\r\n                style={{\r\n                  background: matchFiveTick(range.price, \"buyQuantity\")\r\n                    ? \"lightcoral\"\r\n                    : \"lightpink\",\r\n                  borderColor: \"lightpink\",\r\n                }}\r\n                onClick={() => {\r\n                  sendOrder({\r\n                    method: 0,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.buyQuantity > 0 ? range.buyQuantity : \" \"}\r\n              </Button>\r\n              <div\r\n                className={\r\n                  (display && display.matchPrice == range.price\r\n                    ? \"bg-yellow-400\"\r\n                    : \"bg-yellow-200\") + \" text-center w-1/4 mx-1 h-full py-1.5\"\r\n                }\r\n              >\r\n                {range.price}\r\n              </div>\r\n              <Button\r\n                className=\"w-1/2 mr-1\"\r\n                style={{\r\n                  background: matchFiveTick(range.price, \"sellQuantity\")\r\n                    ? \"lightseagreen\"\r\n                    : \"lightgreen\",\r\n                  borderColor: \"lightgreen\",\r\n                }}\r\n                onClick={() => {\r\n                  sendOrder({\r\n                    method: 1,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.sellQuantity > 0 ? range.sellQuantity : \" \"}\r\n              </Button>\r\n              <Button\r\n                className=\"w-1/2\"\r\n                style={{ background: \"#90ee9080\", borderColor: \"lightgreen\" }}\r\n                onClick={() => {\r\n                  cancelOrder({\r\n                    method: 1,\r\n                    price: range.price,\r\n                    quantity: quantity,\r\n                    priceType: 1,\r\n                  });\r\n                }}\r\n              >\r\n                {range.investorSellQuantity || \" \"}\r\n              </Button>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuickOrder;\r\n","import React, { useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport DisplayChart from \"../../component/chart\";\r\nimport Simulator from \"../simulator\";\r\n\r\nconst ReplayChart = () => {\r\n  const [replayStockId, setReplayStockId] = useState();\r\n  const [isResetChart, setIsResetChart] = useState(false);\r\n\r\n  return (\r\n    <div>\r\n      <DisplayChart\r\n        isResetChart={isResetChart}\r\n        setIsResetChart={setIsResetChart}\r\n        stock={replayStockId ? { id: replayStockId } : {}}\r\n      />\r\n      {/*       <div className=\"m-4 flex justify-around  items-end\">\r\n        <div className=\"w-1/6\">\r\n          選擇股票\r\n          <StockSelector\r\n            style={{ width: \"100%\" }}\r\n            onChange={(e) => {\r\n              setStockId(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"w-2/6\">\r\n          選擇重播資料時間區間\r\n          <RangePicker\r\n            showTime\r\n            placeholder={[\"開始時間\", \"結束時間\"]}\r\n            disabledDate={(current) => current && current > dayjs()}\r\n            onChange={(time) => {\r\n              if (time) {\r\n                setDataTime({\r\n                  ...dataTime,\r\n                  start: time[0],\r\n                  end: time[1],\r\n                });\r\n              } else {\r\n                setDataTime({\r\n                  ...dataTime,\r\n                  start: null,\r\n                  end: null,\r\n                });\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n        <Button\r\n          type=\"primary\"\r\n          disabled={!(dataTime.start && dataTime.end && stockId)}\r\n          onClick={() => {\r\n            setIsResetButtonLoading(true);\r\n            defaultAxios({\r\n              url: api.resetStock.url,\r\n              method: api.resetStock.method,\r\n              data: {\r\n                id: stockId,\r\n                startTime: dayjs(dataTime.start).toISOString(),\r\n                endTime: dayjs(dataTime.end).toISOString(),\r\n                replayTime: dataTime.reply\r\n                  ? dayjs(dataTime.reply).toISOString()\r\n                  : undefined,\r\n                isReset: false,\r\n              },\r\n            })\r\n              .then((res) => {\r\n                setRestData(res.data.orders);\r\n                setReplayStockId(res.data.display.stockId);\r\n                setIsResetButtonLoading(false);\r\n              })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              });\r\n            latestChartTime.current = null;\r\n          }}\r\n          loading={isResetButtonLoading}\r\n        >\r\n          載入重播\r\n        </Button>\r\n      </div> */}\r\n      <Simulator\r\n        onReset={() => {\r\n          setIsResetChart(true);\r\n        }}\r\n        customResetStock={async (stockId) => {\r\n          const { url, method } = api.resetStock;\r\n          return await defaultAxios({\r\n            url,\r\n            method,\r\n            data: { id: stockId, isReset: false },\r\n          }).then(({ data }) => {\r\n            setReplayStockId(data.display.stockId);\r\n            return data.display.stockId;\r\n          });\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReplayChart;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, InputNumber, Select } from \"antd\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nconst { Option } = Select;\r\n\r\nconst CreateAndEdit = ({ isVisible, setIsVisible, initVal, reload }) => {\r\n  const [form] = Form.useForm();\r\n  console.log(initVal);\r\n  useEffect(() => {\r\n    if (initVal) {\r\n      form.setFieldsValue(initVal);\r\n    }\r\n  }, [initVal]);\r\n  return (\r\n    <Modal\r\n      title={`${initVal ? \"修改\" : \"新增\"}股票`}\r\n      visible={isVisible}\r\n      cancelText=\"取消\"\r\n      okText=\"確認\"\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setIsVisible(false);\r\n      }}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n    >\r\n      <Form\r\n        form={form}\r\n        layout=\"vertical\"\r\n        onFinish={(value) => {\r\n          console.log(value);\r\n          const axiosType = initVal ? \"putStock\" : \"postStock\";\r\n          console.log({\r\n            url: api[axiosType].url,\r\n            method: api[axiosType].method,\r\n          });\r\n          defaultAxios({\r\n            url: api[axiosType].url,\r\n            method: api[axiosType].method,\r\n            data: { ...value, groupId: [] },\r\n          })\r\n            .then(() => {\r\n              form.resetFields();\r\n              setIsVisible(false);\r\n              reload(Math.random());\r\n            })\r\n            .catch((err) => {\r\n              errorNotification(err?.response?.data);\r\n            });\r\n        }}\r\n      >\r\n        <Form.Item\r\n          label=\"ID\"\r\n          name=\"id\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"收盤價格\"\r\n          name=\"closedPrice\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"漲跌幅(%)\"\r\n          name=\"priceLimit\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"最近價格\"\r\n          name=\"currentPrice\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <InputNumber type=\"number\" className=\"w-full\" min={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"類別\"\r\n          name=\"type\"\r\n          rules={[{ required: true, message: \"Require\" }]}\r\n        >\r\n          <Select className=\"w-full\">\r\n            <Option value={0}>現股</Option>\r\n            <Option value={1}>ETF</Option>\r\n            <Option value={2}>權證</Option>\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CreateAndEdit;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button, Space, Form, Input, DatePicker } from \"antd\";\r\nimport { DeleteOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport CreateAndEdit from \"./modal\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst TYPE_MAPPING = [\"現股\", \"ETF\", \"權證\"];\r\n\r\nconst Stock = () => {\r\n  const [data, setData] = useState([]);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n  const [selectStock, setSelectStock] = useState([]);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reloadData, setReloadData] = useState(0);\r\n  const [editData, setEditData] = useState();\r\n  function deleteAxios(id) {\r\n    defaultAxios({\r\n      url: api.deleteStock.url,\r\n      method: api.deleteStock.method,\r\n      data: {\r\n        id,\r\n      },\r\n    })\r\n      .then(() => {\r\n        setReloadData(Math.random());\r\n        setSelectStock([]);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getStock.url,\r\n      method: api.getStock.method,\r\n      params: {\r\n        page: { page: page, pageSize: pageSize },\r\n        ...searchCondition,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, searchCondition, reloadData]);\r\n  useEffect(() => {\r\n    if (!visible) {\r\n      setEditData(null);\r\n    }\r\n  }, [visible]);\r\n  return (\r\n    <div className=\"p-4\">\r\n      <CreateAndEdit\r\n        initVal={editData}\r\n        isVisible={visible}\r\n        setIsVisible={setVisible}\r\n        reload={setReloadData}\r\n      />\r\n      <Form\r\n        layout=\"vertical\"\r\n        className=\"grid grid-cols-3 gap-x-4\"\r\n        onFinish={(value) => {\r\n          if (value.createdTime) {\r\n            setSearchCondition({\r\n              ...value,\r\n              createdTime: {\r\n                min: value.createdTime[0],\r\n                max: value.createdTime[1],\r\n              },\r\n            });\r\n          } else setSearchCondition(value);\r\n        }}\r\n      >\r\n        <Form.Item label=\"ID\" name=\"id\">\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label=\"收盤價格\" name=\"closedPrice\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"closedPrice\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"closedPrice\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"漲跌幅\" name=\"priceLimit\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"priceLimit\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"priceLimit\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"最近價格\" name=\"currentPrice\">\r\n          <Input.Group className=\"grid grid-cols-11 gap-x-4\">\r\n            <Form.Item name={[\"currentPrice\", \"min\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Minimum\"\r\n              />\r\n            </Form.Item>\r\n            <span className=\"p-0 col-span-1 text-center\">~</span>\r\n            <Form.Item name={[\"currentPrice\", \"max\"]} noStyle>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                className=\"col-span-5\"\r\n                placeholder=\"Maximum\"\r\n              />\r\n            </Form.Item>\r\n          </Input.Group>\r\n        </Form.Item>\r\n        <Form.Item label=\"建立時間\" name=\"createdTime\">\r\n          <DatePicker.RangePicker className=\"w-full\" />\r\n        </Form.Item>\r\n        <Form.Item label=\" \">\r\n          <div className=\"grid grid-cols-2 justify-end gap-4\">\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              搜尋\r\n            </Button>\r\n            <Button htmlType=\"reset\">清空</Button>\r\n          </div>\r\n        </Form.Item>\r\n      </Form>\r\n      <Space size=\"small\" className=\"mb-4\">\r\n        <Button type=\"primary\" onClick={() => setVisible(true)}>\r\n          新增股票\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          danger\r\n          disabled={!selectStock.length}\r\n          onClick={() => deleteAxios(selectStock)}\r\n        >\r\n          刪除所選股票\r\n        </Button>\r\n      </Space>\r\n      <Table\r\n        dataSource={data}\r\n        rowKey=\"id\"\r\n        columns={[\r\n          {\r\n            title: \"ID\",\r\n            dataIndex: \"id\",\r\n          },\r\n          {\r\n            title: \"最近價格\",\r\n            dataIndex: \"currentPrice\",\r\n          },\r\n          {\r\n            title: \"收盤價格\",\r\n            dataIndex: \"closedPrice\",\r\n          },\r\n          {\r\n            title: \"漲跌幅(%)\",\r\n            dataIndex: \"priceLimit\",\r\n          },\r\n          {\r\n            title: \"類別\",\r\n            dataIndex: \"type\",\r\n            render: (data) => <span>{TYPE_MAPPING[data]}</span>,\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"建立時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"修改 / 刪除\",\r\n            render: (data, record) => (\r\n              <Space size=\"small\">\r\n                <Button\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditData(record);\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  icon={<DeleteOutlined />}\r\n                  onClick={() => {\r\n                    deleteAxios([data.id]);\r\n                  }}\r\n                />\r\n              </Space>\r\n            ),\r\n          },\r\n        ]}\r\n        rowSelection={{\r\n          onChange: (key) => {\r\n            setSelectStock(key);\r\n          },\r\n        }}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Stock;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  Slider,\r\n  Tabs,\r\n  Typography,\r\n  Table,\r\n  Button,\r\n  DatePicker,\r\n  Form,\r\n} from \"antd\";\r\nimport { StockSelector } from \"../../component/stock-selector\";\r\nimport { api, defaultAxios } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst Q1Chart = () => {\r\n  const [form] = Form.useForm();\r\n  const rowBuffer = useRef({});\r\n  const [q1Variable, setQ1Variable] = useState({\r\n    startTime: \"\",\r\n    endTime: \"\",\r\n    s: 2,\r\n    a: 10,\r\n    b: 10,\r\n    g: 2,\r\n  });\r\n  const [table, setTable] = useState({\r\n    columns: [\r\n      {\r\n        title: \"b \\\\ a\",\r\n        dataIndex: \"name\",\r\n      },\r\n    ],\r\n    dataSource: [],\r\n  });\r\n\r\n  function columnCount() {\r\n    const newColumn = [];\r\n    for (let index = q1Variable.a; index > 0; index -= q1Variable.g) {\r\n      newColumn.unshift({\r\n        title: index,\r\n        dataIndex: index,\r\n        render: ({ raise, total }) => {\r\n          console.log(raise, total);\r\n          return (raise / total || 0).toFixed(2);\r\n        },\r\n      });\r\n      rowBuffer.current = {\r\n        ...rowBuffer.current,\r\n        [index]: { last: 0, total: 0, raise: 0 },\r\n      };\r\n    }\r\n    newColumn.unshift({\r\n      title: \"b \\\\ a\",\r\n      dataIndex: \"name\",\r\n    });\r\n    return newColumn;\r\n  }\r\n\r\n  function rowCount() {\r\n    let newRow = {};\r\n    for (let index = q1Variable.b; index > 0; index -= q1Variable.g) {\r\n      newRow = {\r\n        ...newRow,\r\n        [index]: JSON.parse(JSON.stringify(rowBuffer.current)),\r\n      };\r\n    }\r\n    return newRow;\r\n  }\r\n  function getData(columns, rowData) {\r\n    defaultAxios({\r\n      url: api.getDisplay.url,\r\n      method: api.getDisplay.method,\r\n      params: {\r\n        stockId: 1,\r\n        createdTime: { min: q1Variable.startTime, max: q1Variable.endTime },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data.content);\r\n        const filteredData = res.data.content.filter(\r\n          (data) => data.firstOrderBuyPrice && data.firstOrderSellPrice\r\n        );\r\n\r\n        const timeTicker =\r\n          Math.round(\r\n            (filteredData[0].fiveTickRange[0].price -\r\n              filteredData[0].fiveTickRange[1].price) *\r\n              1e2\r\n          ) / 1e2;\r\n\r\n        for (let index = 0; index < filteredData.length; index++) {\r\n          const targetData = filteredData[index];\r\n          let a1 = 0;\r\n          let b1 = 0;\r\n          let s =\r\n            Math.round(\r\n              (targetData.firstOrderSellPrice - targetData.firstOrderBuyPrice) *\r\n                1e2\r\n            ) /\r\n            1e2 /\r\n            timeTicker;\r\n\r\n          if (s !== q1Variable.s) continue;\r\n\r\n          targetData.fiveTickRange.forEach((ticker) => {\r\n            if (ticker.price === targetData.firstOrderBuyPrice) {\r\n              b1 = ticker.buyQuantity;\r\n            }\r\n            if (ticker.price === targetData.firstOrderSellPrice) {\r\n              a1 = ticker.sellQuantity;\r\n            }\r\n          });\r\n\r\n          if (rowData[b1] && rowData[b1][a1]) {\r\n            let m =\r\n              (targetData.firstOrderBuyPrice + targetData.firstOrderSellPrice) /\r\n              2;\r\n            if (\r\n              rowData[b1][a1].last &&\r\n              rowData[b1][a1].last !== m &&\r\n              rowData[b1][a1].last < m\r\n            ) {\r\n              rowData[b1][a1].raise++;\r\n            }\r\n            rowData[b1][a1].total++;\r\n            rowData[b1][a1].last = m;\r\n          }\r\n        }\r\n\r\n        const dataSource = Object.entries(rowData).map(([key, val]) => ({\r\n          name: key,\r\n          ...val,\r\n        }));\r\n        setTable({ columns, dataSource });\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <div className=\"px-4\">\r\n      <Title className=\"mt-4 mb-3\" level={5}>\r\n        Q1 數值表格\r\n      </Title>\r\n      <div className=\"flex flex-col items-start pb-5\">\r\n        <Form\r\n          form={form}\r\n          initialValues={{\r\n            s: 2,\r\n            a: 10,\r\n            b: 10,\r\n            g: 2,\r\n          }}\r\n          onValuesChange={(_, allValues) => {\r\n            const { createdTime = [], ...other } = allValues;\r\n            setQ1Variable({\r\n              ...other,\r\n              startTime: dayjs(createdTime[0]).toISOString(),\r\n              endTime: dayjs(createdTime[1]).toISOString(),\r\n            });\r\n          }}\r\n          onFinish={() => {\r\n            getData(columnCount(), rowCount());\r\n          }}\r\n        >\r\n          {/* <Form.Item\r\n            rules={[{ required: true, message: \"請選擇股票\" }]}\r\n            label=\"選擇股票\"\r\n            name=\"stock\"\r\n          >\r\n            <StockSelector style={{ width: \"100%\" }} />\r\n          </Form.Item> */}\r\n          <Form.Item\r\n            rules={[{ required: true, message: \"請選擇時間\" }]}\r\n            label=\"播放時間\"\r\n            name=\"createdTime\"\r\n          >\r\n            <DatePicker.RangePicker showTime className=\"w-full\" />\r\n          </Form.Item>\r\n          <Form.Item label={`s: ${q1Variable.s}`} name=\"s\">\r\n            <Slider min={1} max={5} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`a: ${q1Variable.a}`} name=\"a\">\r\n            <Slider min={1} max={100} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`b: ${q1Variable.b}`} name=\"b\">\r\n            <Slider min={1} max={100} step={1} />\r\n          </Form.Item>\r\n          <Form.Item label={`g: ${q1Variable.g}`} name=\"g\">\r\n            <Slider min={1} max={10} step={1} />\r\n          </Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            開始計算\r\n          </Button>\r\n        </Form>\r\n      </div>\r\n      <Table\r\n        className=\"max-w-full\"\r\n        dataSource={table.dataSource}\r\n        columns={table.columns}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Q1Chart;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({\r\n  visible,\r\n  setVisible,\r\n  defaultValue,\r\n  reset,\r\n  permission = [],\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    console.log(defaultValue, \"de\");\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改角色\" : \"新增角色\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n        console.log(\"cancel\");\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putRole.url,\r\n              method: api.putRole.method,\r\n              data: { ...value, id: defaultValue.id },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postRole.url,\r\n              method: api.postRole.method,\r\n              data: value,\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n\r\n          console.log(value);\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"角色名稱\"\r\n          name=\"name\"\r\n          rules={[{ required: true, message: \"請輸入角色\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入角色名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"每日請求上限\"\r\n          name=\"totalApiTime\"\r\n          rules={[\r\n            { required: true, message: \"請輸入上限\" },\r\n            {\r\n              validator: (_, value) => {\r\n                if (value > 0) return Promise.resolve();\r\n                return Promise.reject(\"不可小於1\");\r\n              },\r\n            },\r\n          ]}\r\n        >\r\n          <Input type=\"number\" placeholder=\"請輸入數字\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"可瀏覽頁面\"\r\n          name=\"permissions\"\r\n          rules={[{ required: true, message: \"請選擇\" }]}\r\n        >\r\n          <Select\r\n            mode=\"multiple\"\r\n            placeholder=\"請選擇\"\r\n            options={permission.map((val) => ({ value: val, label: val }))}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Modal, Input, Typography } from \"antd\";\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { confirm } = Modal;\r\n\r\nconst { Title } = Typography;\r\nconst RoleManagement = () => {\r\n  const [roleData, setRoleData] = useState([]);\r\n  const [permissionData, setPermissionData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n  const [searchCondition, setSearchCondition] = useState({});\r\n\r\n  function showDeleteConfirm(id) {\r\n    confirm({\r\n      title: \"確定要刪除?\",\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: \"刪除後將無法復原\",\r\n      okText: \"確定\",\r\n      okType: \"danger\",\r\n      cancelText: \"取消\",\r\n      onOk() {\r\n        defaultAxios({\r\n          url: api.deleteRole.url,\r\n          method: api.deleteRole.method,\r\n          data: {\r\n            id,\r\n          },\r\n        })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          })\r\n          .finally(() => {\r\n            setChecked([]);\r\n            setReset(Math.random());\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRolePermission.url,\r\n      method: api.getRolePermission.method,\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setPermissionData(res.data);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRole.url,\r\n      method: api.getRole.method,\r\n      params: {\r\n        ...searchCondition,\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setRoleData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n        permission={permissionData}\r\n      />\r\n      <Title level={5}>條件搜尋</Title>\r\n      <Row\r\n        className=\"mb-4 border border-gray-200 p-4\"\r\n        justify=\"space-around\"\r\n        align=\"bottom\"\r\n      >\r\n        <Col span={6}>\r\n          名稱\r\n          <Input\r\n            placeholder=\"輸入名稱\"\r\n            size=\"middle\"\r\n            onChange={(e) => {\r\n              setSearchCondition({\r\n                ...searchCondition,\r\n                name: e.target.value,\r\n              });\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={2}>\r\n          <Button\r\n            onClick={() => {\r\n              setReset(Math.random());\r\n            }}\r\n          >\r\n            搜尋\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => {\r\n            showDeleteConfirm(checked);\r\n          }}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增角色\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey=\"id\"\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          {\r\n            title: \"名稱\",\r\n            dataIndex: \"name\",\r\n          },\r\n          {\r\n            title: \"每日請求上限\",\r\n            dataIndex: \"totalApiTime\",\r\n          },\r\n          {\r\n            title: \"允許頁面\",\r\n            dataIndex: \"permissions\",\r\n            render: (data) => (\r\n              <span className=\"whitespace-pre-line\">\r\n                {data.reduce((prev, curr) => prev + curr.id + \"\\n\", \"\")}\r\n              </span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (_, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      name: record.name,\r\n                      totalApiTime: record.totalApiTime,\r\n                      permissions: record.permissions.map((data) => data.id),\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => showDeleteConfirm([record.id])}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={roleData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoleManagement;\r\n","import React, { useEffect } from \"react\";\r\nimport { Modal, Form, Input, Select } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nconst Create = ({ visible, setVisible, defaultValue, reset, role = [] }) => {\r\n  const [form] = Form.useForm();\r\n  useEffect(() => {\r\n    if (defaultValue) {\r\n      form.setFieldsValue(defaultValue);\r\n    }\r\n  }, [defaultValue]);\r\n  return (\r\n    <Modal\r\n      title={defaultValue ? \"修改權限\" : \"新增權限\"}\r\n      visible={visible}\r\n      onOk={() => {\r\n        form.submit();\r\n      }}\r\n      onCancel={() => {\r\n        form.resetFields();\r\n        setVisible(false);\r\n        console.log(\"cancel\");\r\n      }}\r\n      okText=\"確認\"\r\n      cancelText=\"取消\"\r\n    >\r\n      <Form\r\n        name=\"basic\"\r\n        layout=\"vertical\"\r\n        form={form}\r\n        onFinish={(value) => {\r\n          const { restApiTime, ...other } = value;\r\n          if (defaultValue) {\r\n            defaultAxios({\r\n              url: api.putInvestor.url,\r\n              method: api.putInvestor.method,\r\n              data: {\r\n                id: defaultValue.id,\r\n                restApiTime: parseInt(restApiTime),\r\n                ...other,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          } else {\r\n            defaultAxios({\r\n              url: api.postInvestor.url,\r\n              method: api.postInvestor.method,\r\n              data: {\r\n                restApiTime: parseInt(restApiTime),\r\n                ...other,\r\n              },\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally(() => {\r\n                reset(Math.random());\r\n                form.resetFields();\r\n                setVisible(false);\r\n              });\r\n          }\r\n        }}\r\n        initialValues={{ remember: true }}\r\n      >\r\n        <Form.Item\r\n          label=\"帳戶名稱\"\r\n          name=\"account\"\r\n          rules={[{ required: true, message: \"請輸入帳戶名稱\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入帳戶名稱\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"密碼\"\r\n          name=\"password\"\r\n          rules={[{ required: !defaultValue, message: \"請輸入密碼\" }]}\r\n        >\r\n          <Input placeholder=\"請輸入密碼\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"剩餘請求次數\"\r\n          name=\"restApiTime\"\r\n          rules={[\r\n            { required: defaultValue ? true : false, message: \"請輸入次數\" },\r\n          ]}\r\n          style={{ display: defaultValue ? undefined : \"none\" }}\r\n        >\r\n          <Input type=\"number\" placeholder=\"請輸入數字\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"角色\"\r\n          name=\"roleId\"\r\n          rules={[{ required: defaultValue ? true : false, message: \"請選擇\" }]}\r\n          style={{ display: defaultValue ? undefined : \"none\" }}\r\n        >\r\n          <Select\r\n            placeholder=\"請選擇\"\r\n            options={role?.map((val) => ({ value: val.id, label: val.name }))}\r\n          />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\nimport { Table, Button, Row, Col, Select, Modal, Typography } from \"antd\";\r\nimport {\r\n  EditOutlined,\r\n  DeleteOutlined,\r\n  ExclamationCircleOutlined,\r\n} from \"@ant-design/icons\";\r\nimport Create from \"./create\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { confirm } = Modal;\r\nconst { Title } = Typography;\r\nconst InvestorManagement = () => {\r\n  const [investorData, setInvestorData] = useState([]);\r\n  const [roleData, setRoleData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(20);\r\n  const [totalSize, setTotalSize] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [reset, setReset] = useState(0);\r\n  const [editValue, setEditValue] = useState();\r\n  const [checked, setChecked] = useState([]);\r\n\r\n  function showDeleteConfirm(id) {\r\n    confirm({\r\n      title: \"確定要刪除?\",\r\n      icon: <ExclamationCircleOutlined />,\r\n      content: \"刪除後將無法復原\",\r\n      okText: \"確定\",\r\n      okType: \"danger\",\r\n      cancelText: \"取消\",\r\n      onOk() {\r\n        defaultAxios({\r\n          url: api.deleteInvestor.url,\r\n          method: api.deleteInvestor.method,\r\n          data: {\r\n            id,\r\n          },\r\n        })\r\n          .catch((err) => {\r\n            errorNotification(err?.response?.data);\r\n          })\r\n          .finally(() => {\r\n            setChecked([]);\r\n            setReset(Math.random());\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRole.url,\r\n      method: api.getRole.method,\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setRoleData(res.data.content);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getInvestor.url,\r\n      method: api.getInvestor.method,\r\n      params: {\r\n        page: { page, pageSize },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setInvestorData(res.data.content);\r\n        setTotalSize(res.data.totalSize);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [page, pageSize, reset]);\r\n\r\n  const rowSelection = {\r\n    selectedRowKeys: checked,\r\n    onChange: (selectedRowKeys, selectedRows) => {\r\n      setChecked(selectedRows.map((deta) => deta.id));\r\n    },\r\n    preserveSelectedRowKeys: false,\r\n  };\r\n  return (\r\n    <div className=\"px-10\">\r\n      <Create\r\n        visible={visible}\r\n        setVisible={setVisible}\r\n        reset={setReset}\r\n        defaultValue={editValue}\r\n        role={roleData}\r\n      />\r\n      <div className=\"flex justify-end my-5\">\r\n        <Button\r\n          disabled={!checked.length}\r\n          type=\"default\"\r\n          className=\"mr-4\"\r\n          onClick={() => showDeleteConfirm(checked)}\r\n        >\r\n          刪除勾選\r\n        </Button>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            setEditValue(null);\r\n            setVisible(true);\r\n          }}\r\n        >\r\n          新增帳戶\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        rowKey=\"id\"\r\n        rowSelection={{\r\n          type: \"checkbox\",\r\n          ...rowSelection,\r\n        }}\r\n        columns={[\r\n          {\r\n            title: \"名稱\",\r\n            dataIndex: \"account\",\r\n          },\r\n          {\r\n            title: \"憑證\",\r\n            dataIndex: \"token\",\r\n          },\r\n\r\n          {\r\n            title: \"剩餘請求次數\",\r\n            dataIndex: \"restApiTime\",\r\n          },\r\n          {\r\n            title: \"角色\",\r\n            dataIndex: \"role\",\r\n            render: (data) => data.name,\r\n          },\r\n          {\r\n            title: \"創建時間\",\r\n            dataIndex: \"createdTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"更新時間\",\r\n            dataIndex: \"updatedTime\",\r\n            width: 200,\r\n            render: (data) => (\r\n              <span>{dayjs(data).format(\"YYYY/MM/DD HH:mm:ss\")}</span>\r\n            ),\r\n          },\r\n          {\r\n            title: \"狀態\",\r\n            dataIndex: \"action\",\r\n            render: (_, record) => (\r\n              <span>\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center mr-2\"\r\n                  icon={<EditOutlined />}\r\n                  onClick={() => {\r\n                    setEditValue({\r\n                      id: record.id,\r\n                      account: record.account,\r\n                      password: record.password,\r\n                      restApiTime: record.restApiTime,\r\n                      roleId: record.role.id,\r\n                    });\r\n                    setVisible(true);\r\n                  }}\r\n                />\r\n                <Button\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  className=\"inline-flex justify-center items-center\"\r\n                  onClick={() => showDeleteConfirm([record.id])}\r\n                  icon={<DeleteOutlined />}\r\n                />\r\n              </span>\r\n            ),\r\n          },\r\n        ]}\r\n        dataSource={investorData}\r\n        pagination={{\r\n          pageSize: pageSize,\r\n          total: totalSize,\r\n          onChange: (page) => {\r\n            setPage(page);\r\n          },\r\n          onShowSizeChange: (cur, size) => {\r\n            setPageSize(size);\r\n          },\r\n        }}\r\n        sticky\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvestorManagement;\r\n","import AutoChart from \"../src/pages/auto-chart\";\r\nimport Case from \"../src/pages/case\";\r\nimport FrequentData from \"../src/pages/frequent-data\";\r\nimport RealDataUpload from \"../src/pages/real-data-upload\";\r\nimport Simulator from \"../src/pages/simulator\";\r\nimport OrderTable from \"../src/pages/table/order-table\";\r\nimport PriceTable from \"../src/pages/table/price-table\";\r\nimport QuickOrder from \"../src/pages/quick-order\";\r\nimport ReplayChart from \"../src/pages/replay\";\r\nimport Stock from \"../src/pages/stock\";\r\nimport Q1Chart from \"../src/pages/Q1-chart\";\r\nimport RoleManagement from \"../src/pages/role-manage\";\r\nimport InvestorManagement from \"../src/pages/investor-manage\";\r\n\r\nconst AUTH_MAPPING_DATA = {\r\n  stock: Stock,\r\n  \"investor-management\": InvestorManagement,\r\n  \"role-management\": RoleManagement,\r\n  \"auto-chart\": AutoChart,\r\n  \"replay-chart\": ReplayChart,\r\n  case: Case,\r\n  simulator: Simulator,\r\n  \"Q1-chart\": Q1Chart,\r\n  \"quick-order\": QuickOrder,\r\n  \"order-table\": OrderTable,\r\n  \"price-table\": PriceTable,\r\n  \"real-data-upload\": RealDataUpload,\r\n  \"frequent-data\": FrequentData,\r\n};\r\n\r\nconst LINK_MAPPING_DATA = {\r\n  stock: \"股票管理\",\r\n  \"investor-management\": \"帳戶管理\",\r\n  \"role-management\": \"角色管理\",\r\n  \"auto-chart\": \"LOB 圖表\",\r\n  \"replay-chart\": \"重播紀錄\",\r\n  case: \"情境管理\",\r\n  simulator: \"模擬下單\",\r\n  \"Q1-chart\": \"Q1 圖表\",\r\n  \"quick-order\": \"閃電下單\",\r\n  \"order-table\": \"委託紀錄表單\",\r\n  \"price-table\": \"成交紀錄表單\",\r\n  \"real-data-upload\": \"上傳真實資料\",\r\n  \"frequent-data\": \"高頻資料\",\r\n};\r\n\r\nexport { AUTH_MAPPING_DATA, LINK_MAPPING_DATA };\r\n","import { NavLink } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { defaultAxios, api } from \"../../environment/api\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport errorNotification from \"../../utils/errorNotification\";\r\n\r\nimport { LINK_MAPPING_DATA } from \"../../authData\";\r\n\r\nconst RouterLink = ({ setToken, permission }) => {\r\n  const history = useHistory();\r\n  return (\r\n    <ul className=\"sticky px-4 bg-gray-200 w-48 flex-shrink-0 min-h-screen\">\r\n      <li className=\" text-center text-xl border-b border-black\">\r\n        <Button\r\n          className=\"w-full\"\r\n          size=\"large\"\r\n          onClick={() => {\r\n            defaultAxios({\r\n              url: api.logout.url,\r\n              method: api.logout.method,\r\n            })\r\n              .catch((err) => {\r\n                errorNotification(err?.response?.data);\r\n              })\r\n              .finally((res) => {\r\n                setToken(null);\r\n                history.replace(\"/stock-font-end/login/\");\r\n              });\r\n          }}\r\n        >\r\n          登出\r\n        </Button>\r\n      </li>\r\n      <li className=\" py-5 text-xl border-b border-black\">\r\n        <NavLink to=\"/stock-font-end/\" exact>\r\n          首頁\r\n        </NavLink>\r\n      </li>\r\n      <li className=\"py-5 text-xl border-b border-black\">\r\n        <NavLink to=\"/stock-font-end/echart-example\">範例</NavLink>\r\n      </li>\r\n      {permission.map((data) => (\r\n        <li className=\"py-5 text-xl border-b border-black\">\r\n          <NavLink to={`/stock-font-end/${data}`}>\r\n            {LINK_MAPPING_DATA[data]}\r\n          </NavLink>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default RouterLink;\r\n","import \"antd/dist/antd.css\";\r\n\r\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\n\r\nimport EchartExample from \"./pages/echart-example\";\r\nimport Main from \"./pages/main\";\r\nimport Login from \"./pages/login\";\r\nimport RouterLink from \"./component/router-link\";\r\nimport { AUTH_MAPPING_DATA } from \"./authData\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { settingToken, api, defaultAxios } from \"./environment/api\";\r\nconst events = require(\"events\");\r\n\r\nexport const appEventEmitter = new events.EventEmitter();\r\n\r\nconst App = () => {\r\n  const [router, setRouter] = useState(\"\");\r\n  const [auth, setAuth] = useState(!!localStorage.getItem(\"token\"));\r\n  const [token, setToken] = useState(localStorage.getItem(\"token\") || \"\");\r\n  const [permission, setPermission] = useState(\r\n    JSON.parse(localStorage.getItem(\"permission\")) || []\r\n  );\r\n\r\n  const GuardedRoute = ({ component: Component, ...rest }) => {\r\n    setRouter(rest.path);\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={(props) =>\r\n          auth ? (\r\n            <Component {...props} />\r\n          ) : (\r\n            <Redirect to=\"/stock-font-end/login/\" />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    appEventEmitter.on(\"unauthorization\", (msg) => {\r\n      localStorage.removeItem(\"token\");\r\n      setAuth(false);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setAuth(!!token);\r\n    settingToken(token);\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    defaultAxios({\r\n      url: api.getRolePermission.url,\r\n      method: api.getRolePermission.method,\r\n    })\r\n      .then((res) => {\r\n        console.log(\"123\");\r\n        setPermission(res.data);\r\n      })\r\n      .catch((err) => {\r\n        errorNotification(err?.response?.data);\r\n      });\r\n  }, [router]);\r\n\r\n  return (\r\n    <HashRouter>\r\n      <div className=\"flex \">\r\n        {auth && <RouterLink setToken={setToken} permission={permission} />}\r\n        <div className=\"flex-1 my-10 \">\r\n          <Switch>\r\n            <Route\r\n              path=\"/stock-font-end/login/\"\r\n              component={() => (\r\n                <Login setToken={setToken} setPermission={setPermission} />\r\n              )}\r\n            />\r\n            <GuardedRoute path=\"/stock-font-end/\" exact component={Main} />\r\n            <GuardedRoute\r\n              path=\"/stock-font-end/echart-example\"\r\n              component={EchartExample}\r\n            />\r\n            {permission.map((data) => (\r\n              <GuardedRoute\r\n                path={`/stock-font-end/${data}`}\r\n                component={AUTH_MAPPING_DATA[data]}\r\n              />\r\n            ))}\r\n            <Redirect\r\n              from=\"*\"\r\n              to={auth ? \"/stock-font-end/\" : \"/stock-font-end/login\"}\r\n            />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </HashRouter>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App.jsx';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}