(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{223:function(e,t,a){},327:function(e,t){},329:function(e,t){},338:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),i=a.n(r),s=(a(223),a(9)),l=a(60),o=a(7),u=(a(224),a(32)),d=a(81),j=a(66),b=function(e){for(var t=[],a=[],n=0;n<e.length;n++)t.push(e[n].splice(0,1)[0]),a.push(e[n]);return{categoryData:t,values:a}}([["2013/1/24",2320.26,2320.26,2287.3,2362.94],["2013/1/25",2300,2291.3,2288.26,2308.38],["2013/1/28",2295.35,2346.5,2295.35,2346.92],["2013/1/29",2347.22,2358.98,2337.35,2363.8],["2013/1/30",2360.75,2382.48,2347.89,2383.76],["2013/1/31",2383.43,2385.42,2371.23,2391.82],["2013/2/1",2377.41,2419.02,2369.57,2421.15],["2013/2/4",2425.92,2428.15,2417.58,2440.38],["2013/2/5",2411,2433.13,2403.3,2437.42],["2013/2/6",2432.68,2434.48,2427.7,2441.73],["2013/2/7",2430.69,2418.53,2394.22,2433.89],["2013/2/8",2416.62,2432.4,2414.4,2443.03],["2013/2/18",2441.91,2421.56,2415.43,2444.8],["2013/2/19",2420.26,2382.91,2373.53,2427.07],["2013/2/20",2383.49,2397.18,2370.61,2397.94],["2013/2/21",2378.82,2325.95,2309.17,2378.82],["2013/2/22",2322.94,2314.16,2308.76,2330.88],["2013/2/25",2320.62,2325.82,2315.01,2338.78],["2013/2/26",2313.74,2293.34,2289.89,2340.71],["2013/2/27",2297.77,2313.22,2292.03,2324.63],["2013/2/28",2322.32,2365.59,2308.92,2366.16],["2013/3/1",2364.54,2359.51,2330.86,2369.65],["2013/3/4",2332.08,2273.4,2259.25,2333.54],["2013/3/5",2274.81,2326.31,2270.1,2328.14],["2013/3/6",2333.61,2347.18,2321.6,2351.44],["2013/3/7",2340.44,2324.29,2304.27,2352.02],["2013/3/8",2326.42,2318.61,2314.59,2333.67],["2013/3/11",2314.68,2310.59,2296.58,2320.96],["2013/3/12",2309.16,2286.6,2264.83,2333.29],["2013/3/13",2282.17,2263.97,2253.25,2286.33],["2013/3/14",2255.77,2270.28,2253.31,2276.22],["2013/3/15",2269.31,2278.4,2250,2312.08],["2013/3/18",2267.29,2240.02,2239.21,2276.05],["2013/3/19",2244.26,2257.43,2232.02,2261.31],["2013/3/20",2257.74,2317.37,2257.42,2317.86],["2013/3/21",2318.21,2324.24,2311.6,2330.81],["2013/3/22",2321.4,2328.28,2314.97,2332],["2013/3/25",2334.74,2326.72,2319.91,2344.89],["2013/3/26",2318.58,2297.67,2281.12,2319.99],["2013/3/27",2299.38,2301.26,2289,2323.48],["2013/3/28",2273.55,2236.3,2232.91,2273.55],["2013/3/29",2238.49,2236.62,2228.81,2246.87],["2013/4/1",2229.46,2234.4,2227.31,2243.95],["2013/4/2",2234.9,2227.74,2220.44,2253.42],["2013/4/3",2232.69,2225.29,2217.25,2241.34],["2013/4/8",2196.24,2211.59,2180.67,2212.59],["2013/4/9",2215.47,2225.77,2215.47,2234.73],["2013/4/10",2224.93,2226.13,2212.56,2233.04],["2013/4/11",2236.98,2219.55,2217.26,2242.48],["2013/4/12",2218.09,2206.78,2204.44,2226.26],["2013/4/15",2199.91,2181.94,2177.39,2204.99],["2013/4/16",2169.63,2194.85,2165.78,2196.43],["2013/4/17",2195.03,2193.8,2178.47,2197.51],["2013/4/18",2181.82,2197.6,2175.44,2206.03],["2013/4/19",2201.12,2244.64,2200.58,2250.11],["2013/4/22",2236.4,2242.17,2232.26,2245.12],["2013/4/23",2242.62,2184.54,2182.81,2242.62],["2013/4/24",2187.35,2218.32,2184.11,2226.12],["2013/4/25",2213.19,2199.31,2191.85,2224.63],["2013/4/26",2203.89,2177.91,2173.86,2210.58],["2013/5/2",2170.78,2174.12,2161.14,2179.65],["2013/5/3",2179.05,2205.5,2179.05,2222.81],["2013/5/6",2212.5,2231.17,2212.5,2236.07],["2013/5/7",2227.86,2235.57,2219.44,2240.26],["2013/5/8",2242.39,2246.3,2235.42,2255.21],["2013/5/9",2246.96,2232.97,2221.38,2247.86],["2013/5/10",2228.82,2246.83,2225.81,2247.67],["2013/5/13",2247.68,2241.92,2231.36,2250.85],["2013/5/14",2238.9,2217.01,2205.87,2239.93],["2013/5/15",2217.09,2224.8,2213.58,2225.19],["2013/5/16",2221.34,2251.81,2210.77,2252.87],["2013/5/17",2249.81,2282.87,2248.41,2288.09],["2013/5/20",2286.33,2299.99,2281.9,2309.39],["2013/5/21",2297.11,2305.11,2290.12,2305.3],["2013/5/22",2303.75,2302.4,2292.43,2314.18],["2013/5/23",2293.81,2275.67,2274.1,2304.95],["2013/5/24",2281.45,2288.53,2270.25,2292.59],["2013/5/27",2286.66,2293.08,2283.94,2301.7],["2013/5/28",2293.4,2321.32,2281.47,2322.1],["2013/5/29",2323.54,2324.02,2321.17,2334.33],["2013/5/30",2316.25,2317.75,2310.49,2325.72],["2013/5/31",2320.74,2300.59,2299.37,2325.53],["2013/6/3",2300.21,2299.25,2294.11,2313.43],["2013/6/4",2297.1,2272.42,2264.76,2297.1],["2013/6/5",2270.71,2270.93,2260.87,2276.86],["2013/6/6",2264.43,2242.11,2240.07,2266.69],["2013/6/7",2242.26,2210.9,2205.07,2250.63],["2013/6/13",2190.1,2148.35,2126.22,2190.1]]);var h=a(1);function m(e){for(var t=[],a=0,n=b.values.length;a<n;a++)if(a<e)t.push("-");else{for(var c=0,r=0;r<e;r++)c+=b.values[a-r][1];t.push(c/e)}return t}var O={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["\u65e5K","MA5","MA10","MA20","MA30"]},grid:{left:"10%",right:"10%",bottom:"15%"},xAxis:{type:"category",data:b.categoryData,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},yAxis:{scale:!0,splitArea:{show:!0}},dataZoom:[{type:"inside",start:50,end:100},{show:!0,type:"slider",top:"90%",start:50,end:100}],series:[{name:"\u65e5K",type:"candlestick",data:b.values,itemStyle:{color:"#ec0000",color0:"#00da3c",borderColor:"#8A0000",borderColor0:"#008F28"},markPoint:{label:{normal:{formatter:function(e){return null!=e?Math.round(e.value):""}}},data:[{name:"XX\u6a19\u9ede",coord:["2013/5/31",2300],value:2300,itemStyle:{color:"rgb(41,60,85)"}},{name:"highest value",type:"max",valueDim:"highest"},{name:"lowest value",type:"min",valueDim:"lowest"},{name:"average value on close",type:"average",valueDim:"close"}],tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}}},markLine:{symbol:["none","none"],data:[[{name:"from lowest to highest",type:"min",valueDim:"lowest",symbol:"circle",symbolSize:10,label:{show:!1},emphasis:{label:{show:!1}}},{type:"max",valueDim:"highest",symbol:"circle",symbolSize:10,label:{show:!1},emphasis:{label:{show:!1}}}],{name:"min line on close",type:"min",valueDim:"close"},{name:"max line on close",type:"max",valueDim:"close"}]}},{name:"MA5",type:"line",data:m(5),smooth:!0,lineStyle:{opacity:.5}},{name:"MA10",type:"line",data:m(10),smooth:!0,lineStyle:{opacity:.5}},{name:"MA20",type:"line",data:m(20),smooth:!0,lineStyle:{opacity:.5}},{name:"MA30",type:"line",data:m(30),smooth:!0,lineStyle:{opacity:.5}}]},p=function(){return Object(h.jsx)(j.a,{option:O})},f=function(e){var t=e.originData,a=void 0===t?{}:t,c=e.showType,r=Object(n.useState)(10),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)({}),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(0),p=Object(o.a)(O,2),f=(p[0],p[1]);Object(n.useEffect)((function(){m(function(){var e=[],t=[],n=0,r=(a.tickRange||[]).sort((function(e,t){return e.price-t.price})),i=(a.fiveTickRange||[]).sort((function(e,t){return e.price-t.price}));switch(c){case"all":r.forEach((function(a){e.push(a.price),t.push(a.sellQuantity?a.sellQuantity:a.buyQuantity?-a.buyQuantity:0)}));break;case"allfive":i.forEach((function(a,c){if(e.push(a.price),t.push(a.sellQuantity?a.sellQuantity:a.buyQuantity?-a.buyQuantity:0),4===c){console.log("dec");for(var r=i[c].price,s=i[c+1].price;s-r>.5;)r+=.5,n++,e.push(r),t.push("0")}}));break;case"buyfive":i.forEach((function(a){void 0!==a.buyQuantity&&(e.push(a.price),t.push(-a.buyQuantity))}));break;case"sellfive":i.forEach((function(a){void 0!==a.sellQuantity&&(e.push(a.price),t.push(a.sellQuantity))}))}return f(n),{xAxis:e,series:t}}())}),[a,c]),Object(n.useEffect)((function(){var e;if(null===b||void 0===b||null===(e=b.series)||void 0===e?void 0:e.length){var t=10;b.series.forEach((function(e){Math.abs(e)>t&&(t=Math.abs(e))})),l(t)}}),[b]);var x={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){return"string"===typeof e[0].data?"":"Price: "+e[0].name+"<br/>"+e[0].seriesName+" : "+Math.abs(e[0].data)}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:b.xAxis}],yAxis:[{type:"value",splitNumber:10,max:s,min:-s,axisLabel:{formatter:function(e){return Math.abs(e)}}}],series:[{name:"\u59d4\u8a17\u91cf",type:"bar",data:b.series,itemStyle:{color:function(e){return(null===a||void 0===a?void 0:a.fiveTickRange)&&-1!==(null===a||void 0===a?void 0:a.fiveTickRange.findIndex((function(t){return t.price===b.xAxis[e.dataIndex]})))?e.data>0?"green":"red":e.data>0?"DarkSeaGreen":"LightCoral"}},markPoint:{symbol:"path://M479.046,283.925c-1.664-3.989-5.547-6.592-9.856-6.592H352.305V10.667C352.305,4.779,347.526,0,341.638,0H170.971 c-5.888,0-10.667,4.779-10.667,10.667v266.667H42.971c-4.309,0-8.192,2.603-9.856,6.571c-1.643,3.989-0.747,8.576,2.304,11.627 l212.8,213.504c2.005,2.005,4.715,3.136,7.552,3.136s5.547-1.131,7.552-3.115l213.419-213.504 C479.793,292.501,480.71,287.915,479.046,283.925z",symbolSize:30,itemStyle:{color:"black"},data:[{coord:["".concat(a.matchPrice),0],value:a.matchPrice,y:50,name:"qwe"}]}}]};return Object(h.jsx)(j.a,{option:x})},x=a(120),v=a(22),y=a.n(v),g=function(e){var t=e.data,a=void 0===t?{xAxis:[],price:[],quantity:[]}:t,c=e.onDateFormatChange,r=Object(n.useState)(10),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)(4),d=Object(o.a)(u,2),b=d[0],m=d[1],O={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},grid:{left:"3%",right:"4%",containLabel:!0},legend:{data:["\u6210\u4ea4\u50f9","\u6700\u4f73\u8cb7\u50f9","\u6700\u4f73\u8ce3\u50f9","\u6210\u4ea4\u91cf"]},xAxis:[{type:"category",boundaryGap:!0,data:a.xAxis,axisLabel:{formatter:function(e,t){return y()(e).format("HH:mm:ss")}}}],yAxis:[{type:"value",scale:!0,name:"\u6210\u4ea4\u50f9"},{type:"value",scale:!0,name:"\u6210\u4ea4\u91cf"}],dataZoom:[{show:!0,realtime:!0,startValue:s?a.xAxis.length-s:0,endValue:a.xAxis.length-1,onChange:function(e){console.log(e)}}],series:[{name:"\u6210\u4ea4\u50f9",type:"line",step:"end",data:a.price,itemStyle:{color:"black"}},{name:"\u6700\u4f73\u8cb7\u50f9",type:"line",step:"end",data:a.buy,itemStyle:{color:"red"}},{name:"\u6700\u4f73\u8ce3\u50f9",type:"line",step:"end",data:a.sell,itemStyle:{color:"green"}},{name:"\u6210\u4ea4\u91cf",type:"bar",yAxisIndex:1,data:a.quantity,itemStyle:{color:"yellow"}}]};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex flex-row",children:[Object(h.jsxs)("div",{className:"flex flex-col justify-end p-4",children:["\u5206\u6642\u8d70\u52e2\u5716\u986f\u793a\u7b46\u6578",Object(h.jsx)(x.a,{className:"w-40",value:s,options:[{label:"\u986f\u793a10\u7b46",value:10},{label:"\u986f\u793a50\u7b46",value:50},{label:"\u986f\u793a100\u7b46",value:100},{label:"\u986f\u793a\u5168\u90e8\u7b46",value:0}],onChange:function(e){return l(e)}})]}),Object(h.jsxs)("div",{className:"flex flex-col justify-end p-4",children:["\u5206\u6642\u8d70\u52e2\u5716\u6642\u9593\u683c\u5c40",Object(h.jsx)(x.a,{className:"w-40",value:b,options:[{label:"\u6beb\u79d2",value:4},{label:"\u79d2",value:3},{label:"\u5206",value:0},{label:"\u6642",value:1},{label:"\u65e5",value:2}],onChange:function(e){c&&c(e),m(e)}})]})]}),Object(h.jsx)(j.a,{option:O})]})},k=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(p,{}),Object(h.jsx)(f,{data:{100:15,102:11,108:23,109:2,111:12}}),Object(h.jsx)(g,{})]})},S=function(){return Object(h.jsx)("div",{})},T=a(355),C=a(349),I=a(354),_=a(41),w=a(196),R=a.n(w);console.log("production");var D=R.a.create({baseURL:"http://140.118.118.173:20023/"});D.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.token||(e.headers.token=t),e}));var A={login:{url:"api/investor/login",method:"POST"},logout:{url:"api/investor/logout",method:"POST"},getOrder:{url:"api/order",method:"GET"},postOrder:{url:"api/order",method:"POST"},deleteOrder:{url:"api/order",method:"DELETE"},getDisplay:{url:"api/display",method:"GET"},getDisplayChart:{url:"api/display/chart",method:"GET"},getTransaction:{url:"api/transaction",method:"GET"},getStock:{url:"api/stock",method:"GET"},postStock:{url:"api/stock",method:"POST"},putStock:{url:"api/stock",method:"PUT"},deleteStock:{url:"api/stock",method:"DELETE"},resetStock:{url:"api/stock/reset",method:"PUT"},getVirtualOrder:{url:"api/virtualOrder",method:"GET"},postVirtualOrder:{url:"api/virtualOrder",method:"POST"},resetVirtualOrder:{url:"api/virtualOrder",method:"PUT"},getVirtualOrderContainer:{url:"api/virtualOrder/container",method:"GET"},getContainer:{url:"api/virtualOrder/container",method:"GET"},postContainer:{url:"api/virtualOrder/container",method:"POST"},putContainer:{url:"api/virtualOrder/container",method:"PUT"},deleteContainer:{url:"api/virtualOrder/container",method:"DELETE"},getGroup:{url:"api/group",method:"GET"},getAvailableStock:{url:"api/available/stock",method:"GET"},getAvailableFuture:{url:"api/available/future",method:"GET"},getRealDataStockOrder:{url:"api/real-data/stock/order",method:"GET"},postRealDataStockOrder:{url:"api/real-data/stock/order",method:"POST"},putRealDataStockOrder:{url:"api/real-data/stock/order",method:"PUT"},deleteRealDataStockOrder:{url:"api/real-data/stock/order",method:"DELETE"},getRealDataStockOrderContent:{url:"api/real-data/stock/order/content",method:"GET"},postRealDataStockOrderContent:{url:"api/real-data/stock/order/content",method:"POST"},getRealDataStockTransaction:{url:"api/real-data/stock/transaction",method:"GET"},postRealDataStockTransaction:{url:"api/real-data/stock/transaction",method:"POST"},putRealDataStockTransaction:{url:"api/real-data/stock/transaction",method:"PUT"},deleteRealDataStockTransaction:{url:"api/real-data/stock/transaction",method:"DELETE"},getRealDataStockTransactionContent:{url:"api/real-data/stock/transaction/content",method:"GET"},postRealDataStockTransactionContent:{url:"api/real-data/stock/transaction/content",method:"POST"},getRealDataStockDisplay:{url:"api/real-data/stock/display",method:"GET"},postRealDataStockDisplay:{url:"api/real-data/stock/display",method:"POST"},putRealDataStockDisplay:{url:"api/real-data/stock/display",method:"PUT"},deleteRealDataStockDisplay:{url:"api/real-data/stock/display",method:"DELETE"},getRealDataStockDisplayContent:{url:"api/real-data/stock/display/content",method:"GET"},postRealDataStockDisplayContent:{url:"api/real-data/stock/display/content",method:"POST"},getRealDataFutureOrder:{url:"api/real-data/future/order",method:"GET"},postRealDataFutureOrder:{url:"api/real-data/future/order",method:"POST"},putRealDataFutureOrder:{url:"api/real-data/future/order",method:"PUT"},deleteRealDataFutureOrder:{url:"api/real-data/future/order",method:"DELETE"},getRealDataFutureOrderContent:{url:"api/real-data/future/order/content",method:"GET"},postRealDataFutureOrderContent:{url:"api/real-data/future/order/content",method:"POST"},getRealDataFutureTransaction:{url:"api/real-data/future/transaction",method:"GET"},postRealDataFutureTransaction:{url:"api/real-data/future/transaction",method:"POST"},putRealDataFutureTransaction:{url:"api/real-data/future/transaction",method:"PUT"},deleteRealDataFutureTransaction:{url:"api/real-data/future/transaction",method:"DELETE"},getRealDataFutureTransactionContent:{url:"api/real-data/future/transaction/content",method:"GET"},postRealDataFutureTransactionContent:{url:"api/real-data/future/transaction/content",method:"POST"},getRealDataFutureDisplay:{url:"api/real-data/future/display",method:"GET"},postRealDataFutureDisplay:{url:"api/real-data/future/display",method:"POST"},putRealDataFutureDisplay:{url:"api/real-data/future/display",method:"PUT"},deleteRealDataFutureDisplay:{url:"api/real-data/future/display",method:"DELETE"},getRealDataFutureDisplayContent:{url:"api/real-data/future/display/content",method:"GET"},postRealDataFutureDisplayContent:{url:"api/real-data/future/display/content",method:"POST"},getRole:{url:"api/rbac/role",method:"GET"},postRole:{url:"api/rbac/role",method:"POST"},putRole:{url:"api/rbac/role",method:"PUT"},deleteRole:{url:"api/rbac/role",method:"DELETE"},getRolePermission:{url:"api/rbac/permission",method:"GET"},getInvestor:{url:"api/investor",method:"GET"},postInvestor:{url:"api/investor",method:"POST"},putInvestor:{url:"api/investor",method:"PUT"},deleteInvestor:{url:"api/investor",method:"DELETE"}},N=a(214);var M=function(e){401===(null===e||void 0===e?void 0:e.statusCode)&&Vt.emit("unauthorization"),N.a.open({type:"error",message:null===e||void 0===e?void 0:e.statusCode,description:null===e||void 0===e?void 0:e.message,duration:3})},B=a(353),E=function(e){var t=e.visible,a=e.setVisible,n=C.a.useForm(),c=Object(o.a)(n,1)[0];return Object(h.jsx)(B.a,{title:"\u8a3b\u518a",visible:t,onOk:function(){c.submit()},onCancel:function(){c.resetFields(),a(!1)},okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",children:Object(h.jsxs)(C.a,{name:"basic",layout:"vertical",form:c,onFinish:function(e){D({url:A.postInvestor.url,method:A.postInvestor.method,data:e}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){c.resetFields(),a(!1)}))},initialValues:{remember:!0},children:[Object(h.jsx)(C.a.Item,{label:"\u5e33\u6236\u540d\u7a31",name:"account",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"})}),Object(h.jsx)(C.a.Item,{label:"\u5bc6\u78bc",name:"password",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u5bc6\u78bc"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"})})]})})},q=function(e){var t=e.setToken,a=e.setPermission,c=Object(n.useState)(),r=Object(o.a)(c,2),i=r[0],s=r[1],l=Object(n.useState)(!1),d=Object(o.a)(l,2),j=d[0],b=d[1],m=Object(u.g)();return Object(h.jsxs)("div",{className:" flex flex-col justify-center items-center",style:{height:"90vh"},children:[i&&Object(h.jsx)(T.a,{className:"w-96 mb-4",message:"\u767b\u5165\u932f\u8aa4",description:i,type:"error",showIcon:!0}),Object(h.jsxs)(C.a,{layout:"vertical",name:"login",className:"w-96",onChange:function(){s(null)},onFinish:function(e){D({url:A.login.url,method:A.login.method,data:e}).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("permission",JSON.stringify(e.data.permission)),t(e.data.token),a(e.data.permission),m.replace("/stock-font-end/")})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),s(e.message)}))},children:[Object(h.jsx)(C.a.Item,{name:"account",label:"\u5e33\u865f",rules:[{required:!0,message:"\u8acb\u586b\u5165\u5e33\u865f"}],children:Object(h.jsx)(I.a,{})}),Object(h.jsx)(C.a.Item,{name:"password",label:"\u5bc6\u78bc",rules:[{required:!0,message:"\u8acb\u586b\u5165\u5bc6\u78bc"}],children:Object(h.jsx)(I.a.Password,{})}),Object(h.jsx)(C.a.Item,{className:"mt-4",children:Object(h.jsx)(_.a,{type:"primary",htmlType:"submit",className:"w-full",children:"\u767b\u5165"})}),Object(h.jsx)(C.a.Item,{className:"mt-4",children:Object(h.jsx)(_.a,{onClick:function(){b(!0)},className:"w-full",children:"\u8a3b\u518a"})})]}),Object(h.jsx)(E,{visible:j,setVisible:b})]})},F=a(45);function P(e){if((e=Number(e))<=0)throw new TypeError("nextExponential: lambda must be greater than 0.");return-Math.log(1-Math.random())/e}function L(e){var t=e.reduce((function(e,t){return e+t}))*Math.random();return e.findIndex((function(e){return(t-=e)<0}))}function Q(e,t){if(t>e-t)return Q(e,e-t);for(var a=1,n=0;n<t;n++)a=a*(e-n)/(n+1);return Math.round(a)}function z(e,t,a,n){if(1==n){return function(e,t,a){for(var n=0,c=Math.pow(a,1/(t-e));;)if((n=Math.ceil(Math.log(1-Math.random())/Math.log(c))+(e-1))<=t)return n}(1,e,.5)}if(2==n)return function(e,t){for(var a=e-1,n=[],c=0;c<a+1;c++)n.push(Q(a,c)*Math.pow(t,c)*Math.pow(1-t,a-c));return L(n)}(t,a)}function V(e){D({url:A.postOrder.url,method:A.postOrder.method,data:{investorId:e.investorId,stockId:e.stockId,method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:e.timeRestriction,subMethod:e.subMethod}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}var Y=function(e,t,a,n,c){var r=e.current_tab,i=e.default_alpha_B,s=e.default_alpha_A,l=e.default_lambda_B,u=e.default_lambda_B_K,d=e.default_lambda_A,j=e.default_lambda_A_K,b=e.R_B,h=e.R_A,m=e.default_theta_B,O=e.default_theta_B1,p=e.default_theta_B2,f=e.default_theta_B3,x=e.default_theta_B4,v=e.default_theta_B5,y=e.default_theta_A,g=e.default_theta_A1,k=e.default_theta_A2,S=e.default_theta_A3,T=e.default_theta_A4,C=e.default_theta_A5,I=e.R_theta_B,_=e.R_theta_A,w=e.mu_B,R=e.mu_A,N=e.n,B=e.p,E=e.batch_size,q=(e.s,e.max_a,e.max_b,e.gap,t.array_a),F=t.array_b,L=t.q1_array,Q={},Y=0,G=null==a.firstOrderSellPrice?a.matchPrice:a.firstOrderSellPrice,H=null==a.firstOrderBuyPrice?a.matchPrice:a.firstOrderBuyPrice,K=[],U=[],J=[],Z=[];a.tickRange.forEach((function(e){e.price<G&&K.push(e.price),e.price<H&&J.push(e.price)}));var X=JSON.parse(JSON.stringify(a.tickRange));(X=X.sort((function(e,t){return e.price-t.price}))).forEach((function(e){e.price>G&&U.push(e.price),e.price>H&&Z.push(e.price)})),Y=0,K.forEach((function(e){var t=l*Math.pow(b,Y),a=m*Math.pow(I,Y);if(2==r)switch(t=u/Math.pow(Y+1,i),Y){case 0:return void(a=O);case 1:return void(a=p);case 2:return void(a=f);case 3:return void(a=x);default:return void(a=v)}Q["LB"+e]=P(t),Q["CB"+e]=P(a),Y++})),Y=0,U.forEach((function(e){var t=l*Math.pow(b,Y),a=m*Math.pow(I,Y);if(2==r)switch(t=u/Math.pow(Y+1,i),Y){case 0:return void(a=O);case 1:return void(a=p);case 2:return void(a=f);case 3:return void(a=x);default:return void(a=v)}Q["LB"+e]=P(t),Q["CB"+e]=P(a),Y++})),Y=0,J.forEach((function(e){var t=d*Math.pow(h,Y),a=y*Math.pow(_,Y);if(2==r)switch(t=j/Math.pow(Y+1,s),Y){case 0:return void(a=g);case 1:return void(a=k);case 2:return void(a=S);case 3:return void(a=T);default:return void(a=C)}Q["LA"+e]=P(t),Q["CA"+e]=P(a),Y++})),Y=0,Z.forEach((function(e){var t=d*Math.pow(h,Y),a=y*Math.pow(_,Y);if(2==r)switch(t=j/Math.pow(Y+1,s),Y){case 0:return void(a=g);case 1:return void(a=k);case 2:return void(a=S);case 3:return void(a=T);default:return void(a=C)}Q["LA"+e]=P(t),Q["CA"+e]=P(a),Y++})),Q.MB=P(w),Q.MS=P(R);var W=function(e){var t=Object.entries(e).sort((function(e,t){return Object(o.a)(e,2)[1]-Object(o.a)(t,2)[1]})),a=Object(o.a)(t,1)[0];return[a[0],a[1]]}(Q),$=1e3*W[1]*100,ee=W[0].substring(0,1),te=W[0].substring(1,2);if(!n)switch(ee){case"L":var ae=Number(W[0].substring(2,10)),ne=z(E,N,B,r);V({investorId:null,stockId:c,method:"B"==te?0:1,price:ae,quantity:ne,priceType:1,timeRestriction:0}),"B"==te?void 0!=F.find((function(e){return e==ne}))&&L.forEach((function(e,t){Object.keys(e)[0]==ne&&(L[t][ne]=!0,L[t].b_price=ae)})):void 0!=q.find((function(e){return e==ne}))&&L.forEach((function(e,t){Object.keys(e)[1]==ne&&(L[t][ne]=!0,L[t].a_price=ae)})),L.forEach((function(e,t){for(var a=!0,n=0,c=Object.entries(e);n<c.length;n++)0==c[n]&&(a=!1);1==a&&0==L[t].midprice?L[t].midprice=(e.b_price+e.a_price)/2:1==a&&L[t].midprice})),console.log("q1_array",L);break;case"M":V({investorId:null,stockId:c,method:"B"==te?0:1,price:0,quantity:z(E,N,B,r),priceType:0,timeRestriction:0});break;case"C":D({url:A.getOrder.url,method:A.getOrder.method}).then((function(e){var t=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]}(e.data.content.filter((function(e){return e.price==W[0].substring(2,10)})));t&&V({investorId:null,stockId:c,method:t.method,price:t.price,quantity:t.quantity,priceType:t.priceType,timeRestriction:t.timeRestriction,subMethod:0})})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}return $},G=a(351),H=a(348),K=a(350),U=(G.a.Title,H.a.TabPane);function J(e){var t=e.buttonStatus,a=void 0===t?"stop":t,c=e.stockId,r=Object(n.useRef)(),i=(Object(n.useRef)(),Object(n.useState)(0)),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(n.useState)({array_a:[],array_b:[],q1_array:[]}),b=Object(o.a)(j,2),m=b[0],O=(b[1],Object(n.useState)({current_tab:1,default_alpha_B:.52,default_alpha_A:.52,default_lambda_B:10,default_lambda_B_K:1.92,default_lambda_A:10,default_lambda_A_K:1.92,R_B:.8,R_A:.8,default_theta_B:10,default_theta_B1:.71,default_theta_B2:.81,default_theta_B3:.68,default_theta_B4:.56,default_theta_B5:.47,default_theta_A:10,default_theta_A1:.71,default_theta_A2:.81,default_theta_A3:.68,default_theta_A4:.56,default_theta_A5:.47,R_theta_B:.8,R_theta_A:.8,mu_B:.94,mu_A:.94,n:10,p:.5,batch_size:10,s:1,max_a:13,max_b:11,gap:3})),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useState)({columns:[{title:"b \\ a",dataIndex:"name",key:Math.random()},{title:1,dataIndex:1,key:Math.random()},{title:4,dataIndex:4,key:Math.random()},{title:7,dataIndex:7,key:Math.random()},{title:10,dataIndex:10,key:Math.random()},{title:13,dataIndex:13,key:Math.random()}],dataSource:[{key:2,name:2},{key:5,name:5},{key:8,name:8},{key:11,name:11}]}),y=Object(o.a)(v,2);y[0],y[1];Object(n.useEffect)((function(){D({url:A.getDisplay.url,method:A.getDisplay.method,params:{isGetLatest:!0}}).then((function(e){r.current=e.data,d(Y(f,m,e.data,!0))})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[]),Object(n.useEffect)((function(){u&&"stop"!==a&&setTimeout((function(){d((function(){return Y(f,m,r.current,!1,c)}))}),u)}),[u,a]);var g=function(e){x(Object(s.a)(Object(s.a)({},f),{},{mu_B:e}))},k=function(e){x(Object(s.a)(Object(s.a)({},f),{},{mu_A:e}))};return Object(h.jsx)("div",{className:"card-container px-5",children:Object(h.jsxs)(H.a,{type:"card",centered:!0,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{current_tab:e}))},children:[Object(h.jsx)(U,{tab:"Model (1)",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"flex justify-center",children:Object(h.jsxs)("div",{className:"w-full mx-5",children:[Object(h.jsxs)("div",{children:["batch size: ",f.batch_size]}),Object(h.jsx)(K.a,{min:1,max:100,step:1,value:f.batch_size,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{batch_size:e}))}})]})}),Object(h.jsxs)("div",{className:"flex justify-center mx-5",children:[Object(h.jsxs)("div",{className:"mr-5 pr-5 border-r w-1/2",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bb",Object(h.jsx)("sub",{children:"B"}),": ",f.default_lambda_B]}),Object(h.jsx)(K.a,{min:1,max:100,step:.1,value:f.default_lambda_B,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_lambda_B:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["R",Object(h.jsx)("sub",{children:"B"}),": ",f.R_B]}),Object(h.jsx)(K.a,{min:.1,max:5,step:.1,value:f.R_B,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{R_B:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B"}),": ",f.default_theta_B]}),Object(h.jsx)(K.a,{min:1,max:100,step:.1,value:f.default_theta_B,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["R",Object(h.jsx)("sub",{children:"B"}),": ",f.R_theta_B]}),Object(h.jsx)(K.a,{min:.1,max:5,step:.1,value:f.R_theta_B,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{R_theta_B:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bc",Object(h.jsx)("sub",{children:"B"}),": ",f.mu_B]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.mu_B,onChange:g})]})]}),Object(h.jsxs)("div",{className:"w-1/2",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bb",Object(h.jsx)("sub",{children:"A"}),": ",f.default_lambda_A]}),Object(h.jsx)(K.a,{min:1,max:100,step:.1,value:f.default_lambda_A,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_lambda_A:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["R",Object(h.jsx)("sub",{children:"A"}),": ",f.R_A]}),Object(h.jsx)(K.a,{min:.1,max:5,step:.1,value:f.R_A,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{R_A:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A"}),": ",f.default_theta_A]}),Object(h.jsx)(K.a,{min:1,max:100,step:.1,value:f.default_theta_A,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["R",Object(h.jsx)("sub",{children:"A"}),": ",f.R_theta_A]}),Object(h.jsx)(K.a,{min:.1,max:5,step:.1,value:f.R_theta_A,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{R_theta_A:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bc",Object(h.jsx)("sub",{children:"A"}),": ",f.mu_A]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.mu_A,onChange:k})]})]})]})]})},"1"),Object(h.jsx)(U,{tab:"Model (2)",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex justify-center mx-5 border-b pb-3",children:[Object(h.jsxs)("div",{className:"mr-5 pr-5 w-1/2",children:[Object(h.jsxs)("div",{children:["n: ",f.n]}),Object(h.jsx)(K.a,{min:1,max:100,step:1,value:f.n,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{n:e}))}})]}),Object(h.jsxs)("div",{className:"w-1/2",children:[Object(h.jsxs)("div",{children:["p: ",f.p]}),Object(h.jsx)(K.a,{min:0,max:1,step:.01,value:f.p,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{p:e}))}})]})]}),Object(h.jsxs)("div",{className:"flex justify-center mx-5 mt-3",children:[Object(h.jsxs)("div",{className:"mr-5 pr-5 border-r w-1/2",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b1",Object(h.jsx)("sub",{children:"B"}),": ",f.default_alpha_B]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_alpha_B,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_alpha_B:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["k",Object(h.jsx)("sub",{children:"B"}),": ",f.default_lambda_B_K]}),Object(h.jsx)(K.a,{min:1,max:10,step:.01,value:f.default_lambda_B_K,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_lambda_B_K:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B1"}),": ",f.default_theta_B1]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_B1,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B1:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B2"}),": ",f.default_theta_B2]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_B2,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B2:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B3"}),": ",f.default_theta_B3]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_B3,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B3:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B4"}),": ",f.default_theta_B4]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_B4,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B4:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"B5"}),": ",f.default_theta_B5]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_B5,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_B5:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bc",Object(h.jsx)("sub",{children:"B"}),": ",f.mu_B]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.mu_B,onChange:g})]})]}),Object(h.jsxs)("div",{className:"w-1/2",children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b1",Object(h.jsx)("sub",{children:"A"}),": ",f.default_alpha_A]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_alpha_A,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_alpha_A:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["k",Object(h.jsx)("sub",{children:"A"}),": ",f.default_lambda_A_K]}),Object(h.jsx)(K.a,{min:1,max:10,step:.01,value:f.default_lambda_A_K,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_lambda_A_K:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A1"}),": ",f.default_theta_A1]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_A1,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A1:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A2"}),": ",f.default_theta_A2]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_A2,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A2:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A3"}),": ",f.default_theta_A3]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_A3,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A3:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A4"}),": ",f.default_theta_A4]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_A4,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A4:e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03b8",Object(h.jsx)("sub",{children:"A5"}),": ",f.default_theta_A5]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.default_theta_A5,onChange:function(e){x(Object(s.a)(Object(s.a)({},f),{},{default_theta_A5:e}))}})]}),Object(h.jsx)("hr",{className:"my-3"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:["\u03bc",Object(h.jsx)("sub",{children:"A"}),": ",f.mu_A]}),Object(h.jsx)(K.a,{min:.01,max:10,step:.01,value:f.mu_A,onChange:k})]})]})]})]})},"2")]})})}var Z=function(e){var t=e.data,a=void 0===t?{xAxis:[],quantity:[],quantityA5:[],quantityA4:[],quantityA3:[],quantityA2:[],quantityA1:[],quantityB1:[],quantityB2:[],quantityB3:[],quantityB4:[],quantityB5:[],marketBuyQuantity:[],marketSellQuantity:[],charts:[],type:""}:t,c=e.onDateFormatChange,r=Object(n.useState)(1),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)(10),d=Object(o.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(4),p=Object(o.a)(O,2),f=p[0],v=p[1],g=Object(n.useState)([]),k=Object(o.a)(g,2),S=k[0],T=k[1],C={tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{backgroundColor:"#283b56"}}},grid:{left:"3%",right:"4%",containLabel:!0},legend:{data:["\u6210\u4ea4\u91cf"]},xAxis:[{type:"category",boundaryGap:!0,data:a.xAxis,axisLabel:{formatter:function(e,t){return y()(e).format("HH:mm:ss")}}}],yAxis:[{type:"value",scale:!0,name:"\u6210\u4ea4\u91cf"}],dataZoom:[{show:!0,realtime:!0,startValue:b?a.xAxis.length-b:0,endValue:a.xAxis.length-1,onChange:function(e){console.log(e)}}],series:[{name:"\u6210\u4ea4\u91cf",type:"bar",yAxisIndex:0,data:S,itemStyle:{color:"buy"==a.type?"LightCoral":"DarkSeaGreen"}}]};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex flex-row",children:[Object(h.jsxs)("div",{className:"flex flex-col justify-end p-4",children:["\u7d71\u8a08\u5716\u8868\u4e4b\u8868",Object(h.jsx)(x.a,{className:"w-40",value:s,options:[{label:"Market",value:0},{label:"Order "+a.charts[0],value:1},{label:"Order "+a.charts[1],value:2},{label:"Order "+a.charts[2],value:3},{label:"Order "+a.charts[3],value:4},{label:"Order "+a.charts[4],value:5}],onChange:function(e){l(e),function(e){if("buy"==a.type)switch(e){case 0:T(a.marketBuyQuantity);break;case 1:T(a.quantityB1);break;case 2:T(a.quantityB2);break;case 3:T(a.quantityB3);break;case 4:T(a.quantityB4);break;case 5:T(a.quantityB5);break;default:T(a.marketBuyQuantity)}else if("sell"==a.type)switch(e){case 0:T(a.marketSellQuantity);break;case 1:T(a.quantityA1);break;case 2:T(a.quantityA2);break;case 3:T(a.quantityA3);break;case 4:T(a.quantityA4);break;case 5:T(a.quantityA5);break;default:T(a.marketSellQuantity)}}(e)}})]}),Object(h.jsxs)("div",{className:"flex flex-col justify-end p-4",children:["\u7d71\u8a08\u5716\u8868\u986f\u793a\u7b46\u6578",Object(h.jsx)(x.a,{className:"w-40",value:b,options:[{label:"\u986f\u793a10\u7b46",value:10},{label:"\u986f\u793a50\u7b46",value:50},{label:"\u986f\u793a100\u7b46",value:100},{label:"\u986f\u793a\u5168\u90e8\u7b46",value:0}],onChange:function(e){return m(e)}})]}),Object(h.jsxs)("div",{className:"flex flex-col justify-end p-4",children:["\u7d71\u8a08\u5716\u8868\u6642\u9593\u683c\u5c40",Object(h.jsx)(x.a,{className:"w-40",value:f,options:[{label:"\u6beb\u79d2",value:4},{label:"\u79d2",value:3},{label:"\u5206",value:0},{label:"\u6642",value:1},{label:"\u65e5",value:2}],onChange:function(e){c&&c(e),v(e)}})]})]}),Object(h.jsx)(j.a,{option:C})]})},X=x.a.Option,W=function(e){var t=e.style,a=e.mode,c=e.onChange,r=e.isRealData,i=e.onEnd,l=Object(n.useState)(),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(n.useState)(),m=Object(o.a)(b,2),O=m[0],p=m[1];return Object(n.useEffect)((function(){if(r){var e=r.marketType,t=r.fileType,a="future"===e?A.getAvailableFuture:A.getAvailableStock,n=a.url,c=a.method;D({url:n,method:c,params:{type:t}}).then((function(e){var t=e.data;p(t.map((function(e){return{id:e}})))})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}else D({url:A.getStock.url,method:A.getStock.method}).then((function(e){var t=e.data.content;p(t)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[r]),Object(h.jsx)(x.a,{style:Object(s.a)({},t),onChange:function(e){j(e),c&&c(e)},mode:a,value:d,placeholder:"\u9078\u64c7\u80a1\u7968",showSearch:!0,onDropdownVisibleChange:function(e){!1===e&&i&&i()},children:O&&O.map((function(e){return Object(h.jsx)(X,{value:e.id,children:e.id},Math.random())}))})},$=["originCreatedTime"],ee=function(e){var t=e.data,a=void 0===t?{xAxis:[],price:[],quantity:[]}:t,n=e.onDateFormatChange;return Object(h.jsx)("div",{children:Object(h.jsx)(g,{data:a,onDateFormatChange:function(e){n&&n(e)}})})},te=function(e){var t=e.data,a=void 0===t?{xAxis:[],quantity:[],type:""}:t,n=e.onDateFormatChange;return Object(h.jsx)("div",{children:Object(h.jsx)(Z,{data:a,onDateFormatChange:function(e){n&&n(e)}})})},ae=function(e){var t=e.data,a=void 0===t?{}:t,c=Object(n.useState)("all"),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"flex justify-around my-6 items-center",children:Object(h.jsxs)("div",{children:["\u5716\u8868\u6a21\u5f0f",Object(h.jsx)(x.a,{value:i,style:{width:120,marginLeft:"20px"},onChange:function(e){s(e)},options:[{label:"\u5168\u90e8",value:"all"},{label:"\u8cb7\u8ce3\u4e94\u6a94",value:"allfive"},{label:"\u8cb7\u4e94\u6a94",value:"buyfive"},{label:"\u8ce3\u4e94\u6a94",value:"sellfive"}]})]})}),Object(h.jsx)(f,{originData:a,showType:i})]})},ne=function(e){var t=e.data,a=void 0===t?[]:t,n={xAxis:{type:"category",data:a.map((function(e){return e.x})),axisLabel:{formatter:function(e,t){return y()(e).format("HH:mm:ss")}}},yAxis:{type:"value"},series:[{data:a.map((function(e){return e.y})),type:"line"}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}}};return Object(h.jsx)(j.a,{option:n})},ce=function(e){var t=e.onStockIdChange,a=e.stock,c=e.isResetChart,r=e.setIsResetChart,i=Object(n.useState)(!1),s=Object(o.a)(i,2),u=s[0],d=s[1],j=Object(n.useState)(1),b=Object(o.a)(j,2),m=b[0],O=b[1],p=Object(n.useRef)(),f=Object(n.useState)(),v=Object(o.a)(f,2),y=v[0],g=v[1],k=Object(n.useState)(4),S=Object(o.a)(k,2),T=S[0],C=S[1],I=Object(n.useState)(),w=Object(o.a)(I,2),R=w[0],N=w[1],B=Object(n.useState)({}),E=Object(o.a)(B,2),q=E[0],F=E[1],P=Object(n.useState)([]),L=Object(o.a)(P,2),Q=L[0],z=L[1],V=Object(n.useState)([]),Y=Object(o.a)(V,2),G=Y[0],H=Y[1],K=Object(n.useState)([]),U=Object(o.a)(K,2),J=U[0],Z=U[1],X=function(){p.current&&window.clearInterval(p.current),p.current=void 0},ce=function(){F({}),z([]),H([]),Z([]),N(void 0)};Object(n.useEffect)((function(){ce()}),[a,y,T]),Object(n.useEffect)((function(){c&&(ce(),r(!1))}),[c,r]);var re=Object(n.useCallback)((function(){a&&a.id,p.current,Promise.all([D({url:A.getDisplay.url,method:A.getDisplay.method,params:{stockId:y,isGetLatest:!0}})]).then((function(e){var t=e[0].data,a=JSON.parse(JSON.stringify(G));a.push({xAxis:t.createdTime,fiveTickRange:t.fiveTickRange,marketBuyQuantity:t.marketBuyQuantity,marketSellQuantity:t.marketSellQuantity}),H(a)})),function(e,t,a){return Promise.all([D({url:A.getDisplay.url,method:A.getDisplay.method,params:{stockId:e,isGetLatest:!0}}),D({url:A.getDisplayChart.url,method:A.getDisplayChart.method,params:{stockId:e,dateFormat:t,createdTime:a&&JSON.stringify({min:new Date(a).toISOString()})}})])}(a&&a.id||y,T,R).then((function(e){var t=Object(o.a)(e,2),a=t[0].data,n=t[1].data;F(a);var c=JSON.parse(JSON.stringify(Q));n.length&&(n.forEach((function(e){var t=e.originCreatedTime,a=Object(l.a)(e,$),n=c.length;n&&c[n-1].xAxis===a.createdTime?c[n-1]={xAxis:a.createdTime,price:a.close,quantity:a.quantity+c[n-1].quantity,buy:a.firstOrderBuy,sell:a.firstOrderSell}:c.push({xAxis:a.createdTime,price:a.close,quantity:a.quantity,buy:a.firstOrderBuy,sell:a.firstOrderSell}),t&&N(new Date(t).getTime()+1)})),z(c),Z(c.slice(-10).map((function(e){var t=e.buy,a=e.sell;return{x:e.xAxis,y:a-t}}))))})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[a,y,T,Q,G,R]);return Object(n.useEffect)((function(){return X(),u&&(p.current=setInterval((function(){re()}),1e3*m)),function(){X()}}),[re,u,m]),Object(h.jsxs)("div",{children:[Object(n.useMemo)((function(){return Object(h.jsx)(ae,{data:q})}),[q]),Object(n.useMemo)((function(){return Object(h.jsx)(ee,{data:Q.reduce((function(e,t){var a=t.xAxis,n=t.price,c=t.quantity,r=t.buy,i=t.sell;return e.xAxis.push(a),e.price.push(n),e.quantity.push(c),e.buy.push(r),e.sell.push(i),e}),{xAxis:[],price:[],quantity:[],buy:[],sell:[]}),onDateFormatChange:function(e){C(e)}})}),[Q]),Object(n.useMemo)((function(){return Object(h.jsx)(ne,{data:J})}),[J]),Object(n.useMemo)((function(){return Object(h.jsxs)("div",{className:"flex justify-around mt-3 mb-0 items-center",children:[Object(h.jsx)("div",{className:"w-1/2",children:Object(h.jsx)(te,{data:G.reduce((function(e,t){var a=t.xAxis,n=t.fiveTickRange,c=t.marketBuyQuantity,r=t.marketSellQuantity;return e.xAxis.push(a),e.quantityB1.push(n[5].buyQuantity),e.quantityB2.push(n[6].buyQuantity),e.quantityB3.push(n[7].buyQuantity),e.quantityB4.push(n[8].buyQuantity),e.quantityB5.push(n[9].buyQuantity),e.marketBuyQuantity.push(c),e.marketSellQuantity.push(r),e}),{xAxis:[],quantityA5:[],quantityA4:[],quantityA3:[],quantityA2:[],quantityA1:[],quantityB1:[],quantityB2:[],quantityB3:[],quantityB4:[],quantityB5:[],fiveTickRange:[],marketBuyQuantity:[],marketSellQuantity:[],charts:["B1","B2","B3","B4","B5"],type:"buy"}),onDateFormatChange:function(e){C(e)}})}),Object(h.jsx)("div",{className:"w-1/2",children:Object(h.jsx)(te,{data:G.reduce((function(e,t){var a=t.xAxis,n=t.fiveTickRange,c=t.marketBuyQuantity,r=t.marketSellQuantity;return e.xAxis.push(a),e.quantityA5.push(n[0].sellQuantity),e.quantityA4.push(n[1].sellQuantity),e.quantityA3.push(n[2].sellQuantity),e.quantityA2.push(n[3].sellQuantity),e.quantityA1.push(n[4].sellQuantity),e.marketBuyQuantity.push(c),e.marketSellQuantity.push(r),e}),{xAxis:[],quantityA5:[],quantityA4:[],quantityA3:[],quantityA2:[],quantityA1:[],quantityB1:[],quantityB2:[],quantityB3:[],quantityB4:[],quantityB5:[],fiveTickRange:[],marketBuyQuantity:[],marketSellQuantity:[],charts:["A1","A2","A3","A4","A5"],type:"sell"}),onDateFormatChange:function(e){C(e)}})})]})}),[G]),Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsxs)("div",{className:"w-1/6",style:{display:a?"none":void 0},children:["\u9078\u64c7\u80a1\u7968",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){t&&t(e),g(e)}})]}),Object(h.jsx)(_.a,{type:"primary",onClick:function(){return d(!0)},disabled:!y&&!(a&&a.id),children:"\u958b\u59cb\u64ad\u653e"}),Object(h.jsx)(_.a,{style:{background:"#91A194",color:"white"},onClick:function(){return d(!1)},disabled:!u,children:"\u66ab\u505c\u64ad\u653e"}),Object(h.jsx)(_.a,{type:"primary",danger:!0,onClick:function(){ce()},disabled:!y&&!(a&&a.id),children:"\u91cd\u88fd\u756b\u9762"}),Object(h.jsxs)("div",{children:["\u5716\u8868\u66f4\u65b0\u983b\u7387",Object(h.jsx)(x.a,{className:"w-20 ml-2",value:m,options:[{value:60,label:"1m"},{value:10,label:"10s"},{value:5,label:"5s"},{value:1,label:"1s"},{value:.5,label:"0.5s"}],onChange:function(e){O(e)}})]})]})]})},re=a(346),ie=G.a.Title,se=function(e){var t=e.stockId,a=e.buttonStatus,c=C.a.useForm(),r=Object(o.a)(c,1)[0],i=Object(n.useRef)({}),l=Object(n.useRef)(""),u=Object(n.useRef)(),d=Object(n.useState)({s:2,a:10,b:10,g:2}),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)({columns:[{title:"b \\ a",dataIndex:"name"}],dataSource:[]}),p=Object(o.a)(O,2),f=p[0],x=p[1];return Object(n.useEffect)((function(){"start"===a?(l.current=y()().toISOString(),u.current=setInterval((function(){var e,a;e=function(){for(var e=[],t=b.a;t>0;t-=b.g)e.unshift({title:t,dataIndex:t,render:function(e){var t=e.raise,a=e.total;return console.log(t,a),(t/a||0).toFixed(2)}}),i.current=Object(s.a)(Object(s.a)({},i.current),{},Object(F.a)({},t,{last:0,total:0,raise:0}));return e.unshift({title:"b \\ a",dataIndex:"name"}),e}(),a=function(){for(var e={},t=b.b;t>0;t-=b.g)e=Object(s.a)(Object(s.a)({},e),{},Object(F.a)({},t,JSON.parse(JSON.stringify(i.current))));return e}(),D({url:A.getDisplay.url,method:A.getDisplay.method,params:{stockId:t,createdTime:{min:l.current,max:y()().toISOString()}}}).then((function(t){var n=t.data.content.filter((function(e){return e.firstOrderBuyPrice&&e.firstOrderSellPrice}));console.log(n);for(var c=Math.round(100*(n[0].fiveTickRange[0].price-n[0].fiveTickRange[1].price))/100,r=function(e){var t=n[e],r=0,i=0;if(Math.round(100*(t.firstOrderSellPrice-t.firstOrderBuyPrice))/100/c!==b.s)return"continue";if(t.fiveTickRange.forEach((function(e){e.price===t.firstOrderBuyPrice&&(i=e.buyQuantity),e.price===t.firstOrderSellPrice&&(r=e.sellQuantity)})),a[i]&&a[i][r]){var s=(t.firstOrderBuyPrice+t.firstOrderSellPrice)/2;a[i][r].last&&a[i][r].last!==s&&a[i][r].last<s&&a[i][r].raise++,a[i][r].total++,a[i][r].last=s}},i=0;i<n.length;i++)r(i);var l=Object.entries(a).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(s.a)({name:a},n)}));x({columns:e,dataSource:l})})).catch((function(e){var t;console.log(e),M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),1e3)):clearInterval(u.current)}),[a]),Object(h.jsxs)("div",{className:"px-4",children:[Object(h.jsx)(ie,{className:"mt-4 mb-3",level:5,children:"Q1 \u6578\u503c\u8868\u683c"}),Object(h.jsx)("div",{className:"flex flex-col items-start pb-5",children:Object(h.jsxs)(C.a,{form:r,className:"w-full",initialValues:{s:2,a:10,b:10,g:2},onValuesChange:function(e,t){m(t)},children:[Object(h.jsx)(C.a.Item,{label:"s: ".concat(b.s),name:"s",children:Object(h.jsx)(K.a,{min:1,max:5,step:1})}),Object(h.jsx)(C.a.Item,{label:"a: ".concat(b.a),name:"a",children:Object(h.jsx)(K.a,{min:1,max:100,step:1})}),Object(h.jsx)(C.a.Item,{label:"b: ".concat(b.b),name:"b",children:Object(h.jsx)(K.a,{min:1,max:100,step:1})}),Object(h.jsx)(C.a.Item,{label:"g: ".concat(b.g),name:"g",children:Object(h.jsx)(K.a,{min:1,max:10,step:1})})]})}),Object(h.jsx)(re.a,{className:"max-w-full",dataSource:f.dataSource,columns:f.columns})]})},le=G.a.Title,oe=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)("stop"),i=Object(o.a)(r,2),s=i[0],l=i[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(ce,{onStockIdChange:function(e){c(e)}}),Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsx)(_.a,{type:"primary",onClick:function(){return l("start")},disabled:!a,children:"\u958b\u59cb\u6a21\u64ec"}),Object(h.jsx)(_.a,{style:{background:"#91A194",color:"white"},onClick:function(){return l("stop")},disabled:!a,children:"\u66ab\u505c\u6a21\u64ec"}),Object(h.jsx)(_.a,{type:"primary",danger:!0,onClick:function(){D({url:A.resetStock.url,method:A.resetStock.method,data:{id:a,isReset:!0}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})),l("stop")},disabled:!a,children:"\u91cd\u88fd\u6a21\u64ec"})]}),Object(h.jsx)(le,{className:"m-4 mb-0",level:5,children:"\u4f7f\u7528\u60c5\u5883"}),Object(h.jsx)(J,{buttonStatus:s,stockId:a}),Object(h.jsx)(se,{stockId:a,buttonStatus:s})]})},ue=a(344),de=a(345),je=a(216),be=a(358),he=function(e){var t=e.visible,a=e.setVisible,c=e.defaultValue,r=e.reset,i=C.a.useForm(),l=Object(o.a)(i,1)[0];return Object(n.useEffect)((function(){console.log(c),c&&l.setFieldsValue(c)}),[c]),Object(h.jsx)(B.a,{title:c?"\u4fee\u6539\u60c5\u5883":"\u65b0\u589e\u60c5\u5883",visible:t,onOk:function(){l.submit()},onCancel:function(){l.resetFields(),a(!1),console.log("cancel")},okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",children:Object(h.jsxs)(C.a,{name:"basic",layout:"vertical",form:l,onFinish:function(e){c?D({url:A.putContainer.url,method:A.putContainer.method,data:Object(s.a)(Object(s.a)({},e),{},{id:c.id})}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),l.resetFields(),a(!1)})):D({url:A.postContainer.url,method:A.postContainer.method,data:e}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),l.resetFields(),a(!1)})),console.log(e)},initialValues:{remember:!0},children:[Object(h.jsx)(C.a.Item,{label:"\u60c5\u5883\u540d\u7a31",name:"name",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u60c5\u5883"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u60c5\u5883\u540d\u7a31"})}),Object(h.jsx)(C.a.Item,{label:"\u80a1\u7968id",name:"stockId",rules:[{required:!0,message:"\u8acb\u9078\u64c7\u80a1\u7968"}],children:Object(h.jsx)(x.a,{placeholder:"\u8acb\u9078\u64c7\u80a1\u7968",options:[{value:1,label:"1\u865f\u80a1\u7968"}]})})]})})},me=(I.a.Search,G.a.Title),Oe=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(1),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(20),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(0),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),k=g[0],S=g[1],T=Object(n.useState)(0),C=Object(o.a)(T,2),w=C[0],R=C[1],N=Object(n.useState)(),B=Object(o.a)(N,2),E=B[0],q=B[1],F=Object(n.useState)([]),P=Object(o.a)(F,2),L=P[0],Q=P[1],z=Object(n.useState)({}),V=Object(o.a)(z,2),Y=V[0],G=V[1];Object(n.useEffect)((function(){D({url:A.getContainer.url,method:A.getContainer.method,params:Object(s.a)(Object(s.a)({},Y),{},{page:{page:l,pageSize:b}})}).then((function(e){console.log(e.data),c(e.data.content),x(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[l,b,w]);var H={selectedRowKeys:L,onChange:function(e,t){Q(t.map((function(e){return e.id})))},preserveSelectedRowKeys:!1};return Object(h.jsxs)("div",{className:"px-10",children:[Object(h.jsx)(he,{visible:k,setVisible:S,reset:R,defaultValue:E}),Object(h.jsx)(me,{level:5,children:"\u689d\u4ef6\u641c\u5c0b"}),Object(h.jsxs)(ue.a,{className:"mb-4 border border-gray-200 p-4",justify:"space-around",align:"bottom",children:[Object(h.jsxs)(de.a,{span:6,children:["\u60c5\u5883\u540d\u7a31",Object(h.jsx)(I.a,{placeholder:"\u8f38\u5165\u540d\u7a31",size:"middle",onChange:function(e){G(Object(s.a)(Object(s.a)({},Y),{},{name:e.target.value}))}})]}),Object(h.jsxs)(de.a,{span:6,children:["\u80a1\u7968\u540d\u7a31",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){G(Object(s.a)(Object(s.a)({},Y),{},{stockId:e}))}})]}),Object(h.jsx)(de.a,{span:2,children:Object(h.jsx)(_.a,{onClick:function(){R(Math.random())},children:"\u641c\u5c0b"})})]}),Object(h.jsxs)("div",{className:"flex justify-end my-5",children:[Object(h.jsx)(_.a,{disabled:!L.length,type:"default",className:"mr-4",onClick:function(){D({url:A.deleteContainer.url,method:A.deleteContainer.method,data:{id:L}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){Q([]),R(Math.random())}))},children:"\u522a\u9664\u52fe\u9078"}),Object(h.jsx)(_.a,{type:"primary",onClick:function(){q(null),S(!0)},children:"\u65b0\u589e\u60c5\u5883"})]}),Object(h.jsx)(re.a,{rowKey:function(e){return e.id},rowSelection:Object(s.a)({type:"checkbox"},H),columns:[{title:"\u80a1\u7968 ID",dataIndex:"stockId"},{title:"\u60c5\u5883\u540d\u7a31",dataIndex:"name"},{title:"\u5275\u5efa\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u66f4\u65b0\u6642\u9593",dataIndex:"updatedTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u72c0\u614b",dataIndex:"action",render:function(e,t){return Object(h.jsxs)("span",{children:[Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center mr-2",icon:Object(h.jsx)(je.a,{}),onClick:function(){console.log(t,"data"),q({id:t.id,name:t.name,stockId:t.stockId}),S(!0)}}),Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center",onClick:function(){D({url:A.deleteContainer.url,method:A.deleteContainer.method,data:{id:[t.id]}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){R(Math.random())}))},icon:Object(h.jsx)(be.a,{})})]})}}],dataSource:a,pagination:{pageSize:b,total:f,onChange:function(e){u(e)},onShowSizeChange:function(e,t){m(t)}},sticky:!0})]})},pe=a(29),fe=a.n(pe),xe=a(43),ve=a(63),ye=a.n(ve),ge=a(201),ke=a(56),Se=a(347),Te=a(356),Ce=a(352),Ie=a(88),_e=x.a.Option,we=["count","method","subMethod","price","quantity","priceType","timeRestriction","stockId","trdate","ts"],Re=["count","stockId","price","quantity","trdate","ts"],De=["count","mthpx","mthsz","a1px","a1sz","a2px","a2sz","a3px","a3sz","a4px","a4sz","a5px","a5sz","b1px","b1sz","b2px","b2sz","b3px","b3sz","b4px","b4sz","b5px","b5sz","asz","bsz","sym","trdate","ts"],Ae=function(e){switch(e){case"transaction":return Re;case"display":return De;default:return we}},Ne=function(e,t){switch(e){case"transaction":return"stock"===t?A.getRealDataStockTransactionContent:A.getRealDataFutureTransactionContent;case"display":return"stock"===t?A.getRealDataStockDisplayContent:A.getRealDataFutureDisplayContent;default:return"stock"===t?A.getRealDataStockOrderContent:A.getRealDataFutureOrderContent}},Me=[{header:"\u59d4\u8a17\u6a94",value:"order"},{header:"\u6210\u4ea4\u6a94",value:"transaction"},{header:"\u63ed\u793a\u6a94",value:"display"}],Be=[{header:"\u6beb\u79d2",value:4},{header:"\u79d2",value:3},{header:"\u5206",value:0},{header:"\u6642",value:1},{header:"\u65e5",value:2}],Ee=[{header:"\u7b2c\u4e00\u7b46",value:0},{header:"\u6210\u4ea4\u50f9\u6700\u5927",value:1},{header:"\u6210\u4ea4\u50f9\u6700\u5c0f",value:2},{header:"\u5e73\u5747\u6210\u4ea4\u50f9",value:3}],qe=function(e){var t=e.marketType,a=Object(n.useState)(),c=Object(o.a)(a,2),r=c[0],i=c[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(n.useState)("order"),m=Object(o.a)(b,2),O=m[0],p=m[1],f=Object(n.useState)({start:"year",end:"year"}),v=Object(o.a)(f,2),y=v[0],g=v[1],k=Object(n.useState)(1),S=Object(o.a)(k,2),T=S[0],C=S[1],I=Object(n.useState)(!0),w=Object(o.a)(I,2),R=w[0],N=w[1],B=Object(n.useState)(3),E=Object(o.a)(B,2),q=E[0],F=E[1],P=Object(n.useState)(0),L=Object(o.a)(P,2),Q=L[0],z=L[1],V=Object(n.useState)(we),Y=Object(o.a)(V,2),G=Y[0],H=Y[1],K=Object(n.useState)([]),U=Object(o.a)(K,2),J=U[0],Z=U[1],X=Object(n.useState)(),$=Object(o.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(),ne=Object(o.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(n.useState)(!1),se=Object(o.a)(ie,2),le=se[0],oe=se[1],je=Object(n.useState)(!1),be=Object(o.a)(je,2),he=be[0],me=be[1],Oe=Object(n.useState)(!1),pe=Object(o.a)(Oe,2),ve=pe[0],Re=(pe[1],Object(n.useState)()),De=Object(o.a)(Re,2),qe=De[0],Fe=De[1],Pe=Object(n.useCallback)((function(){if(0!==d.length){oe(!0);var e=function(e){switch(e){case"stock":return A.getAvailableStock;default:return A.getAvailableFuture}}(t),a=e.url,n=e.method;Promise.all(d.map((function(e){return D({url:a+"/".concat(e),method:n,params:{type:O}})}))).then((function(e){var t=new Set;e.forEach((function(e){e.data.forEach((function(e){t.add(e)}))})),Z(Array.from(t)),oe(!1)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),oe(!1)}))}}),[O,t,d]);return Object(n.useEffect)((function(){Pe()}),[Pe]),Object(n.useEffect)((function(){D({url:A.getGroup.url,method:A.getGroup.method}).then((function(e){var t=e.data.content;Fe(t)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[]),Object(h.jsx)(ge.a,{spinning:le,children:Object(h.jsxs)("div",{style:{padding:"20px"},children:[function(e){switch(e){case"stock":return"\u8b49\u4ea4";case"future":return"\u671f\u4ea4";default:return""}}(t),Object(h.jsxs)(ue.a,{children:[Object(h.jsxs)(de.a,{span:6,children:["\u6a94\u6848\u985e\u578b",Object(h.jsx)(x.a,{style:{width:"100%"},onChange:function(e){p(e),H(Ae(e)),te(null),re(null)},value:O,placeholder:"\u9078\u64c7\u6a94\u6848\u985e\u578b",children:Me.map((function(e){return Object(h.jsx)(_e,{value:e.value,children:e.header},Math.random())}))})]}),Object(h.jsxs)(de.a,{span:6,children:[ve?"\u985e\u80a1":"\u80a1\u7968",Object(h.jsx)(x.a,{style:{width:"100%",display:ve?void 0:"none"},onChange:function(e){i(e)},value:r,placeholder:"\u9078\u64c7\u985e\u80a1",children:qe&&qe.map((function(e,t){return Object(h.jsx)(_e,{value:t,children:e.name},Math.random())}))}),Object(h.jsx)(W,{isRealData:{marketType:t,fileType:O},style:{width:"100%",display:ve?"none":void 0},onChange:function(e){j(e)},mode:"multiple"})]})]}),Object(h.jsxs)(ue.a,{style:{marginTop:"20px"},children:[Object(h.jsxs)(de.a,{span:6,children:[Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)(ke.a,{title:"\u958b\u59cb\u6642\u9593\u8207\u7d50\u675f\u6642\u9593\u9593\u9694\u4e0d\u53ef\u5927\u65bc5\u5929\uff0c\u6c92\u8cc7\u6599\u7684\u4e0d\u53ef\u9078",children:Object(h.jsx)(Ie.a,{})}),"\u958b\u59cb\u6642\u9593"]}),Object(h.jsx)(Se.a,{picker:"date",mode:y.start,onPanelChange:function(e,t){g(Object(s.a)(Object(s.a)({},y),{},{start:t}))},onOpenChange:function(e){e||g(Object(s.a)(Object(s.a)({},y),{},{start:"year"}))},value:ee,allowClear:!0,style:{width:"100%"},placeholder:"\u9078\u64c7\u958b\u59cb\u6642\u9593",disabled:0===d.length,disabledDate:function(e){var t=e&&e.startOf("day"),a=ce&&ce;return t&&t>ye()()||t&&!J.includes(t.format("YYYY-MM-DD"))||a&&t>a||a&&a.diff(t)/864e5>=5},onChange:function(e){te(e&&e.startOf("day"))}})]}),Object(h.jsxs)(de.a,{span:6,children:["\u7d50\u675f\u6642\u9593",Object(h.jsx)(Se.a,{picker:"date",mode:y.end,onPanelChange:function(e,t){g(Object(s.a)(Object(s.a)({},y),{},{end:t}))},onOpenChange:function(e){e||g(Object(s.a)(Object(s.a)({},y),{},{end:"year"}))},value:ce,allowClear:!0,style:{width:"100%"},placeholder:"\u9078\u64c7\u7d50\u675f\u6642\u9593",disabled:0===d.length,disabledDate:function(e){var t=e&&e.startOf("day"),a=ee&&ee;return t&&t>ye()()||t&&!J.includes(t.format("YYYY-MM-DD"))||a&&t<a||a&&t.diff(a)/864e5>=5},onChange:function(e){re(e&&e.startOf("day"))}})]})]}),Object(h.jsxs)(ue.a,{style:{marginTop:"20px"},children:[Object(h.jsxs)(de.a,{span:6,children:[Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)(ke.a,{title:"\u82e5\u9078\u64c7\u4e0d\u53d6\u6a23\uff0c\u6703\u5c07\u539f\u59cb\u8cc7\u6599\u5168\u90e8\u4e0b\u8f09",children:Object(h.jsx)(Ie.a,{})}),R?"\u6642\u9593\u983b\u7387":"\u4e0d\u53d6\u6a23",Object(h.jsx)(Te.a,{checked:R,onChange:function(){N(!R)}})]}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(h.jsx)(Ce.a,{disabled:!R,style:{width:"100%"},value:T,step:1,onChange:function(e){C(Math.floor(e))}}),Object(h.jsx)(x.a,{disabled:!R,allowClear:!0,style:{width:"100%"},onChange:function(e){F(e)},value:q,placeholder:"\u9078\u64c7\u6642\u9593\u983b\u7387",children:Be.map((function(e){return Object(h.jsx)(_e,{value:e.value,children:e.header},Math.random())}))})]})]}),Object(h.jsxs)(de.a,{span:6,children:["\u53d6\u6a23\u6a21\u5f0f",Object(h.jsx)(x.a,{disabled:void 0===q||!R,style:{width:"100%"},onChange:function(e){z(e)},value:Q,placeholder:"\u9078\u64c7\u53d6\u6a23\u6a21\u5f0f",children:Ee.map((function(e){return Object(h.jsx)(_e,{value:e.value,children:e.header},Math.random())}))})]})]}),Object(h.jsx)(ue.a,{style:{marginTop:"20px"},children:Object(h.jsxs)(de.a,{span:12,children:["\u6b04\u4f4d",Object(h.jsx)(x.a,{style:{width:"100%"},onChange:function(e){H(e)},value:G,mode:"multiple",placeholder:"\u9078\u64c7\u6b04\u4f4d",children:Ae(O).map((function(e){return Object(h.jsx)(_e,{value:e,children:e},Math.random())}))})]})}),Object(h.jsx)(ue.a,{style:{marginTop:"20px"},children:Object(h.jsx)(_.a,{loading:he,onClick:Object(xe.a)(fe.a.mark((function e(){var a,n,c,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],ve?isNaN(r)||(a=qe[r].stocks.map((function(e){return e.id}))):d&&(a=d),!(a.length&&ee&&ce)){e.next=9;break}return n=Ne(O,t),c=n.url,i=n.method,me(!0),e.next=7,Promise.all(a.map((function(e){return D({url:c,method:i,params:{unit:T,dateFormat:R?q:void 0,sampleMode:Q,fields:G,stockId:e,futureId:e,startTime:ee.startOf("day").toISOString(),endTime:ce.endOf("day").toISOString()}}).then((function(e){var t=e.data,a=e.headers.filename,n=(t.length?Object.keys(t[0]).join(",")+"\n":"")+t.map((function(e){return Object.values(e).join(",")})).join("\n"),c=window.URL.createObjectURL(new Blob([n])),r=document.createElement("a");r.href=c,r.setAttribute("download",a),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(c),me(!1)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),me(!1)}))})));case 7:e.next=10;break;case 9:M({statusCode:400,message:"stock, startTime, endTime are required"});case 10:case"end":return e.stop()}}),e)}))),children:"DOWNLOAD CSV"})})]})})},Fe=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(qe,{marketType:"stock"}),Object(h.jsx)(qe,{marketType:"future"})]})},Pe=a(146),Le=function(){var e;(e=console).log.apply(e,arguments)},Qe=function(e,t){switch(e){case"transaction":return"stock"===t?A.getRealDataStockTransaction:A.getRealDataFutureTransaction;case"display":return"stock"===t?A.getRealDataStockDisplay:A.getRealDataFutureDisplay;default:return"stock"===t?A.getRealDataStockOrder:A.getRealDataFutureOrder}},ze=function(e,t){switch(console.log(e,t),e){case"transaction":return"stock"===t?A.postRealDataStockTransaction:A.postRealDataFutureTransaction;case"display":return"stock"===t?A.postRealDataStockDisplay:A.postRealDataFutureDisplay;default:return"stock"===t?A.postRealDataStockOrder:A.postRealDataFutureOrder}},Ve=function(e,t){switch(e){case"transaction":return"stock"===t?A.putRealDataStockTransaction:A.putRealDataFutureTransaction;case"display":return"stock"===t?A.putRealDataStockDisplay:A.putRealDataFutureDisplay;default:return"stock"===t?A.putRealDataStockOrder:A.putRealDataFutureOrder}},Ye=function(e,t){switch(e){case"transaction":return"stock"===t?A.deleteRealDataStockTransaction:A.deleteRealDataFutureTransaction;case"display":return"stock"===t?A.deleteRealDataStockDisplay:A.deleteRealDataFutureDisplay;default:return"stock"===t?A.deleteRealDataStockOrder:A.deleteRealDataFutureOrder}},Ge=function(e,t){switch(e){case"transaction":return"stock"===t?A.postRealDataStockTransactionContent:A.postRealDataFutureTransactionContent;case"display":return"stock"===t?A.postRealDataStockDisplayContent:A.postRealDataFutureDisplayContent;default:return"stock"===t?A.postRealDataStockOrderContent:A.postRealDataFutureOrderContent}},He=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a,n){var c,r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Qe(t,a),r=c.url,i=c.method,e.abrupt("return",D({url:r,method:i,params:{page:n}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a,n){var c,r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=ze(a,n),r=c.url,i=c.method,e.abrupt("return",D({url:r,method:i,data:{id:t}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a,n){var c,r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Ve(a,n),r=c.url,i=c.method,e.abrupt("return",D({url:r,method:i,data:{id:t}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Je=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a,n){var c,r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Ye(a,n),r=c.url,i=c.method,e.abrupt("return",D({url:r,method:i,data:t}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(xe.a)(fe.a.mark((function e(t,a,n,c){var r,i,s;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ge(a,n),i=r.url,s=r.method,e.abrupt("return",D({url:i,method:s,data:c,params:{id:t}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,c){return e.apply(this,arguments)}}(),Xe=function(e){var t=e.file,a=e.isLoading,c=e.fileType,r=e.marketType,i=Object(n.useState)(0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(n.useState)(),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(!1),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useRef)(!0),y=Object(n.useRef)(""),g=Object(n.useCallback)((function(){if(l<b.size){var e=Math.min(6e5,b.size-l),t=b.slice(l,l+e),a=new FileReader;a.addEventListener("load",(function(t){var a=t.target.result.split("\n");a[0]=y.current+a[0],y.current=a[a.length-1],a.pop(),Le(2);var n=[];if(a.length<1e3)n.push(a);else for(var i=0;i<a.length;)n.push(a.slice(i,i+1e3)),i+=1e3;Promise.all(n.map((function(e){return Ze(b.name,c,r,e)}))).then((function(){u(l+e)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),x(!0)}))})),a.readAsText(t)}else Ue(b.name,c,r).then((function(){Le(3)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),x(!0)}))}),[b,l,c,r]);return Object(n.useEffect)((function(){m(t),u(0)}),[t]),Object(n.useEffect)((function(){a&&b&&c&&(v.current?Ke(b.name,c,r).then((function(){v.current=!1,g(),Le(1)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data),x(!0)})):g())}),[a,b,c,r,g]),b?Object(h.jsxs)("div",{children:[b.name," ",f?"ERROR":(l/b.size*100).toFixed(2)+"%"]}):Object(h.jsx)("div",{})},We=function(e){var t=e.fileType,a=e.marketType,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)([]),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(1),v=Object(o.a)(x,2),y=v[0],g=v[1],k=Object(n.useState)(20),S=Object(o.a)(k,2),T=S[0],C=S[1],I=Object(n.useState)(0),w=Object(o.a)(I,2),R=w[0],D=w[1],A=Object(n.useState)(!1),N=Object(o.a)(A,2),M=N[0],E=N[1],q=Object(n.useCallback)((function(){He(t,a,{page:y,pageSize:T}).then((function(e){var t=e.data;f(t.content),D(t.totalSize),E(!1)}))}),[y,T,t,a]);return Object(n.useEffect)((function(){q()}),[q]),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",multiple:!0,onChange:function(e){var t=e.target.files,a=Array.from(t);l(a),b(Object(Pe.a)(new Array(a.length)).fill(!1))}}),Object(h.jsx)(_.a,{type:"primary",onClick:function(){b(j.map((function(){return!0})))},children:"\u4e0a\u50b3"}),Object(h.jsx)(_.a,{type:"primary",danger:!0,onClick:function(){B.a.error({closable:!0,content:"\u78ba\u5b9a\u8981\u522a\u9664\u55ce?",maskClosable:!0,okText:"\u78ba\u5b9a",onOk:function(){E(!0);var e=p.filter((function(e){return 0===e.isFinished})).map((function(e){return e.id}));Je(e,t,a).then((function(){q()}))}})},children:"\u522a\u9664\u672a\u5b8c\u6210"}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:i.map((function(e,n){return Object(h.jsx)(Xe,{file:e,isLoading:j[n],fileType:t,marketType:a},Math.random())}))}),Object(h.jsx)(re.a,{loading:M,dataSource:p.map((function(e){return Object(s.a)({key:Math.random()},e)})),columns:[{title:"\u6a94\u540d",dataIndex:"id",key:Math.random()},{title:"\u5df2\u5b8c\u6210",dataIndex:"isFinished",render:function(e){return 0===e?"\u5426":"\u662f"},key:Math.random()},{title:"\u522a\u9664",dataIndex:"action",render:function(e,n){var c=n.id;return Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center",onClick:function(){B.a.error({closable:!0,content:"\u78ba\u5b9a\u8981\u522a\u9664".concat(c,"\u55ce?"),maskClosable:!0,okText:"\u78ba\u5b9a",onOk:function(){E(!0),Je([c],t,a).then((function(){q()}))}})},icon:Object(h.jsx)(be.a,{})})}}],pagination:{pageSize:T,total:R,onChange:function(e){g(e)},onShowSizeChange:function(e,t){C(t)}}})]})},$e=function(){return Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("span",{style:{color:"red"},children:'\u82e5"\u5df2\u5b8c\u6210"\u70ba\u5426 \u8acb\u5c07\u8a72\u7b46\u8cc7\u6599\u522a\u9664\u5f8c\u518d\u91cd\u65b0\u4e0a\u50b3'}),[{marketType:"stock",title:"\u8b49\u4ea4"},{marketType:"future",title:"\u671f\u4ea4"}].map((function(e){var t=e.marketType,a=e.title;return Object(h.jsxs)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:[a,Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:[Object(h.jsxs)("div",{children:["\u59d4\u8a17\u6a94",Object(h.jsx)(We,{fileType:"order",marketType:t})]}),Object(h.jsxs)("div",{children:["\u6210\u4ea4\u6a94",Object(h.jsx)(We,{fileType:"transaction",marketType:t})]}),Object(h.jsxs)("div",{children:["\u63ed\u793a\u6a94",Object(h.jsx)(We,{fileType:"display",marketType:t})]})]})]},Math.random())}))]})},et=["id","realDataOrderId"],tt=["delay","id"],at=H.a.TabPane,nt=function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a,n,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(a=A.getRealDataStockOrderContent).url,c=a.method,t.isSimulatedOrder=!0,e.abrupt("return",D({url:n,method:c,params:t}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){return D({url:A.resetStock.url,method:A.resetStock.method,data:{id:e,isReset:!0,isAutoDisplay:!1}})},rt=function(e,t,a){var n=A.getOrder,c=n.url,r=n.method;return D({url:c,method:r,params:{stockId:e,createdTime:{min:t,max:a},order:{orderBy:"createdTime",order:"ASC"}}})},it=function(e,t){0},st=function(e){var t=e.orders,a=e.stockId,c=e.onReset,r=Object(n.useState)(0),i=Object(o.a)(r,2),u=i[0],d=i[1],j=Object(n.useState)(!1),b=Object(o.a)(j,2),m=b[0],O=b[1],p=Object(n.useState)(1),f=Object(o.a)(p,2),x=f[0],v=f[1],g=Object(n.useRef)(),k=Object(n.useRef)(1),S=Object(n.useRef)();Object(n.useEffect)((function(){return g.current&&(clearTimeout(g.current),g.current=void 0),d(0),O(!1),function(){S.current&&clearTimeout(S.current),g.current&&clearTimeout(g.current)}}),[t]);var T=Object(n.useCallback)((function(){var e=t[u],a=t[u+1];if(function(e){e.id,e.realDataOrderId;var t=Object(l.a)(e,et),a=A.postOrder,n=a.url,c=a.method;return D({url:n,method:c,data:Object(s.a)(Object(s.a)({},t),{},{investorId:null})})}(e).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})),a){var n=Date.parse(a.createdTime)-Date.parse(e.createdTime);g.current=setTimeout((function(){d(u+1)}),Math.max(n/k.current,50))}}),[u,t]);return Object(n.useEffect)((function(){m?T():g.current&&(clearTimeout(g.current),g.current=void 0)}),[m,T]),Object(n.useEffect)((function(){k.current=x}),[x]),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsx)(_.a,{type:"primary",onClick:function(){O(!0)},disabled:!a||!t.length,children:"\u958b\u59cb\u6a21\u64ec"}),Object(h.jsx)(_.a,{style:{background:"#91A194",color:"white"},onClick:function(){O(!1)},disabled:!a||!m,children:"\u66ab\u505c\u6a21\u64ec"}),Object(h.jsxs)("div",{style:{width:"200px"},children:["\u64ad\u653e\u901f\u5ea6 ",x," \u500d",Object(h.jsx)(K.a,{value:x,max:10,disabled:!a||!t.length,onChange:function(e){v(e)}})]})]}),Object(h.jsxs)("div",{style:{width:"100%"},children:["\u72c0\u614b(",t.length?u+1:0," / ",t.length," )",Object(h.jsx)(K.a,{value:u,max:t.length-1,disabled:!a||!t.length,onChange:function(e){d(e),O(!1),S.current&&clearTimeout(S.current),S.current=setTimeout((function(){c&&c();var e=t[u];ct(e.stockId===a?a:e.stockId).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),1e3)}}),Object(h.jsx)(re.a,{rowKey:"id",columns:[{title:"\u50f9\u683c\u985e\u578b",dataIndex:"priceType",render:function(e){return Object(h.jsx)("span",{children:e?"LIMIT":"MARKET"})},key:Math.random()},{title:"\u985e\u578b",dataIndex:"method",render:function(e){return Object(h.jsx)("span",{children:e?"sell":"buy"})},key:Math.random()},{title:"\u50f9\u683c",dataIndex:"price",key:Math.random()},{title:"\u6578\u91cf",dataIndex:"quantity",key:Math.random()},{title:"\u526f\u985e\u578b",dataIndex:"subMethod",render:function(e){return Object(h.jsx)("span",{children:e?"UPDATE":null===e?"NULL":"CANCEL"})},key:Math.random()},{title:"\u6642\u9593\u9650\u5236",dataIndex:"timeRestriction",render:function(e){return Object(h.jsx)("span",{children:e?"IOC":2===e?"FOK":"ROD"})},key:Math.random()},{title:"\u6642\u9593",dataIndex:"createdTime",render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}}],pagination:!1,dataSource:t.length&&[Object(s.a)(Object(s.a)({},t[u]),{},{key:Math.random()})],sticky:!0})]})]})},lt=function(e){var t=e.customResetStock,a=e.onReset,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)(),d=Object(o.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)(),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(),v=Object(o.a)(x,2),g=v[0],k=v[1];return it(),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsxs)("div",{className:"w-1/6",children:["\u9078\u64c7\u80a1\u7968",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){b(e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u958b\u59cb\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},placeholder:"\u9078\u64c7\u958b\u59cb\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){f(e?y()(e).startOf("day").toISOString():e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u7d50\u675f\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},placeholder:"\u9078\u64c7\u7d50\u675f\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){k(e?y()(e).startOf("day").toISOString():e)}})]}),Object(h.jsx)(_.a,{type:"primary",danger:!0,onClick:Object(xe.a)(fe.a.mark((function e(){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=j,!t){e.next=7;break}return e.next=4,t(j);case 4:a=e.sent,e.next=9;break;case 7:return e.next=9,ct(j).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 9:console.log(p,g),nt({stockId:j,createdTime:{min:p,max:g}}).then((function(e){var t=e.data;l(t.content.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{investorId:null,stockId:a})})))})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 11:case"end":return e.stop()}}),e)}))),disabled:!j,children:"\u8f09\u5165\u59d4\u8a17"})]}),Object(h.jsx)(st,{orders:i,stockId:j,onReset:a})]})},ot=function(e){var t=e.customResetStock,a=e.onReset,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)(),d=Object(o.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)(),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(),v=Object(o.a)(x,2),g=v[0],k=v[1];return it(),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsxs)("div",{className:"w-1/6",children:["\u9078\u64c7\u80a1\u7968",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){b(e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u958b\u59cb\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},showTime:!0,placeholder:"\u9078\u64c7\u958b\u59cb\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){f(e?y()(e).toISOString():e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u7d50\u675f\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},showTime:!0,placeholder:"\u9078\u64c7\u7d50\u675f\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){k(e?y()(e).toISOString():e)}})]}),Object(h.jsx)(_.a,{type:"primary",disabled:!j,onClick:Object(xe.a)(fe.a.mark((function e(){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=j,!t){e.next=5;break}return e.next=4,t(j);case 4:a=e.sent;case 5:rt(j,p,g).then(function(){var e=Object(xe.a)(fe.a.mark((function e(n){var c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.data,l(c.content.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{investorId:null,stockId:a})}))).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})),t){e.next=5;break}return e.next=5,ct(j).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 6:case"end":return e.stop()}}),e)}))),children:"\u8f09\u5165\u91cd\u64ad"})]}),Object(h.jsx)(st,{orders:i,stockId:j,onReset:a})]})},ut=function(e){var t=e.customResetStock,a=e.onReset,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],u=r[1],d=Object(n.useState)([]),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(),p=Object(o.a)(O,2),f=p[0],v=p[1],g=Object(n.useState)(),k=Object(o.a)(g,2),S=k[0],T=k[1],C=Object(n.useState)(),I=Object(o.a)(C,2),w=I[0],R=I[1];return Object(n.useEffect)((function(){S&&D({url:A.getVirtualOrderContainer.url,method:A.getVirtualOrderContainer.method,params:{stockId:S}}).then((function(e){m(e.data.content.map((function(e){return{label:e.name,value:e.id}})))})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[S]),it(),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsxs)("div",{className:"w-1/6",children:["\u9078\u64c7\u80a1\u7968",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){T(e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u9078\u64c7\u60c5\u5883",Object(h.jsx)(x.a,{className:"w-full",options:b,onChange:function(e){v(e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u958b\u59cb\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},showTime:!0,placeholder:"\u9078\u64c7\u958b\u59cb\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){R(e?y()(e).toISOString():e)}})]}),Object(h.jsx)(_.a,{type:"primary",disabled:!(S&&f&&w),onClick:Object(xe.a)(fe.a.mark((function e(){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=S,!t){e.next=7;break}return e.next=4,t(S);case 4:a=e.sent,e.next=9;break;case 7:return e.next=9,ct(S).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 9:D({url:A.getVirtualOrder.url,method:A.getVirtualOrder.method,params:{virtualOrderContainerId:f}}).then((function(e){var t=e.data,n=Date.parse(w),c=0,r=t.content.map((function(e){var t=e.delay,r=(e.id,Object(l.a)(e,tt)),i=new Date(n+(c+=t||1)).toISOString();return Object(s.a)(Object(s.a)({},r),{},{createdTime:i,investorId:null,stockId:a})}));u(r)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));case 10:case"end":return e.stop()}}),e)}))),children:"\u8f09\u5165\u60c5\u5883"})]}),Object(h.jsx)(st,{orders:i,stockId:S,onReset:a})]})},dt=function(e){var t=e.customResetStock,a=e.onReset;return Object(h.jsxs)(H.a,{type:"card",centered:!0,children:[Object(h.jsxs)(at,{tab:"\u771f\u5be6\u8cc7\u6599",children:[Object(h.jsx)(lt,{customResetStock:t,onReset:a}),";"]},"1"),Object(h.jsxs)(at,{tab:"\u91cd\u64ad\u8cc7\u6599",children:[Object(h.jsx)(ot,{customResetStock:t,onReset:a}),";"]},"2"),Object(h.jsxs)(at,{tab:"\u60c5\u5883\u8cc7\u6599",children:[Object(h.jsx)(ut,{customResetStock:t,onReset:a}),";"]},"3")]})},jt=function(e){var t=e.onStockChange,a=e.onStartChange,n=e.onEndChange;return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"flex justify-around my-6 items-center",children:[Object(h.jsxs)("div",{className:"w-1/6",children:["\u9078\u64c7\u80a1\u7968",Object(h.jsx)(W,{style:{width:"100%"},onChange:function(e){t&&t(e)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u958b\u59cb\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},showTime:!0,placeholder:"\u9078\u64c7\u958b\u59cb\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){var t=e?y()(e).toISOString():e;a&&a(t)}})]}),Object(h.jsxs)("div",{className:"w-1/6",children:["\u7d50\u675f\u6642\u9593",Object(h.jsx)(Se.a,{allowClear:!0,style:{width:"100%"},showTime:!0,placeholder:"\u9078\u64c7\u7d50\u675f\u6642\u9593",disabledDate:function(e){return e&&e>y()()},onChange:function(e){var t=e?y()(e).toISOString():e;n&&n(t)}})]})]})})},bt=function(e){var t=e.type,a=e.stockId,n=e.startTime,c=e.endTime;return Object(h.jsx)(_.a,{type:"primary",onClick:function(){var e="order"===t?"getOrder":"getTransaction";D({url:A[e].url,method:A[e].method,params:{stockId:a,createdTime:{min:n,max:c}}}).then((function(e){var a=0===e.data.content.length?[{}]:e.data.content,n=Object.keys(a[0]).join(",")+"\n",c=a.reduce((function(e,t){return e+Object.values(t).join(",")+"\n"}),n),r="".concat(t,"_")+(new Date).getTime()+".csv",i=document.createElement("a");i.setAttribute("href","data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURI(c)),i.setAttribute("download",r),i.click()})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},children:"Download CSV"})},ht=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(1),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)(20),d=Object(o.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)(0),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(),v=Object(o.a)(x,2),g=v[0],k=v[1],S=Object(n.useState)(),T=Object(o.a)(S,2),C=T[0],I=T[1],_=Object(n.useState)(),w=Object(o.a)(_,2),R=w[0],N=w[1];return Object(n.useEffect)((function(){D({url:A.getDisplay.url,method:A.getDisplay.method,params:{page:{page:s,pageSize:j},stockId:g,createdTime:{min:C,max:R}}}).then((function(e){c(e.data.content),f(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[s,j,g,C,R]),Object(h.jsxs)("div",{children:[Object(h.jsx)(jt,{onStockChange:function(e){k(e)},onStartChange:function(e){I(e)},onEndChange:function(e){N(e)}}),Object(h.jsx)(bt,{type:"order",stockId:g,startTime:C,endTime:R}),Object(h.jsx)(re.a,{columns:[{title:"\u8a02\u55ae ID",dataIndex:"orderId",render:function(e){return Object(h.jsx)("span",{children:e||"NULL"})},key:Math.random()},{title:"\u6295\u8cc7 ID",dataIndex:"investorId",key:Math.random()},{title:"\u80a1\u7968 ID",dataIndex:"stockId",key:Math.random()},{title:"\u985e\u578b",dataIndex:"method",render:function(e){return Object(h.jsx)("span",{children:e?"sell":"buy"})},key:Math.random()},{title:"\u526f\u985e\u578b",dataIndex:"subMethod",render:function(e){return Object(h.jsx)("span",{children:e?"UPDATE":null===e?"NULL":"CANCEL"})},key:Math.random()},{title:"\u50f9\u683c",dataIndex:"price",key:Math.random()},{title:"\u6578\u91cf",dataIndex:"quantity",key:Math.random()},{title:"\u50f9\u683c\u985e\u578b",dataIndex:"priceType",render:function(e){return Object(h.jsx)("span",{children:e?"LIMIT":"MARKET"})},key:Math.random()},{title:"\u72c0\u614b",dataIndex:"status",render:function(e){return Object(h.jsx)("span",{children:e?"FULL":"PARTIAL"})},key:Math.random()},{title:"\u6642\u9593\u9650\u5236",dataIndex:"timeRestriction",render:function(e){return Object(h.jsx)("span",{children:e?"IOC":2===e?"FOK":"ROD"})},key:Math.random()},{title:"\u59d4\u8a17\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})},key:Math.random()}],dataSource:a,pagination:{pageSize:j,total:p,onChange:function(e){l(e)},onShowSizeChange:function(e,t){b(t)}},sticky:!0})]})},mt=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(1),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)(20),d=Object(o.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)(0),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(),v=Object(o.a)(x,2),g=v[0],k=v[1],S=Object(n.useState)(),T=Object(o.a)(S,2),C=T[0],I=T[1],_=Object(n.useState)(),w=Object(o.a)(_,2),R=w[0],N=w[1];return Object(n.useEffect)((function(){D({url:A.getTransaction.url,method:A.getTransaction.method,params:{page:{page:s,pageSize:j},stockId:g,createdTime:{min:C,max:R}}}).then((function(e){c(e.data.content),f(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[s,j,g,C,R]),Object(h.jsxs)("div",{children:[Object(h.jsx)(jt,{onStockChange:function(e){k(e)},onStartChange:function(e){I(e)},onEndChange:function(e){N(e)}}),Object(h.jsx)(bt,{type:"investor",stockId:g,startTime:C,endTime:R}),Object(h.jsx)(re.a,{columns:[{title:"\u6295\u8cc7 ID",dataIndex:"investorId",key:Math.random()},{title:"\u80a1\u7968 ID",dataIndex:"stockId",key:Math.random()},{title:"\u985e\u578b",dataIndex:"method",render:function(e){return Object(h.jsx)("span",{children:e?"sell":"buy"})},key:Math.random()},{title:"\u50f9\u683c",dataIndex:"price",key:Math.random()},{title:"\u6578\u91cf",dataIndex:"quantity",key:Math.random()},{title:"\u50f9\u683c\u985e\u578b",dataIndex:"priceType",render:function(e){return Object(h.jsx)("span",{children:e?"LIMIT":"MARKET"})},key:Math.random()},{title:"\u72c0\u614b",dataIndex:"status",render:function(e){return Object(h.jsx)("span",{children:e?"FULL":"PARTIAL"})},key:Math.random()},{title:"\u6642\u9593\u9650\u5236",dataIndex:"timeRestriction",render:function(e){return Object(h.jsx)("span",{children:e?"IOC":2===e?"FOK":"ROD"})},key:Math.random()},{title:"\u6210\u4ea4\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})},key:Math.random()}],dataSource:a,pagination:{pageSize:j,total:p,onChange:function(e){l(e)},onShowSizeChange:function(e,t){b(t)}},sticky:!0})]})},Ot=a(203),pt=a(204),ft=a(215),xt=a(210),vt=a(205),yt=c.a.createRef(),gt=(n.Component,function(){var e,t=Object(n.useState)(void 0),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!0),s=Object(o.a)(i,2),l=s[0],u=s[1],d=Object(n.useState)([]),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(1),p=Object(o.a)(O,2),f=p[0],v=p[1],y=Object(n.useState)(1),g=Object(o.a)(y,2),k=g[0],S=(g[1],Object(n.useState)(20)),T=Object(o.a)(S,2),C=T[0],I=(T[1],Object(n.useState)(0)),w=Object(o.a)(I,2),R=(w[0],w[1]),N=Object(n.useState)("\u8acb\u9078\u64c7\u60c5\u5883"),B=Object(o.a)(N,2),E=B[0],q=B[1],F=Object(n.useState)(0),P=Object(o.a)(F,2),L=P[0],Q=P[1],z=Object(n.useState)(!1),V=Object(o.a)(z,2),Y=V[0],G=(V[1],Object(n.useState)()),H=Object(o.a)(G,2),K=H[0],U=H[1];function J(e,t){if(K){if("buyQuantity"==t)return e==K.B1;if("sellQuantity"==t)return e==K.A1}}function Z(e){"\u8acb\u9078\u64c7\u60c5\u5883"==E?c&&D({url:A.postOrder.url,method:A.postOrder.method,data:{stockId:c,method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,isAutoTime:Y}}).then((function(e){ee(E)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})):D({url:A.postVirtualOrder.url,method:A.postVirtualOrder.method,data:{method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,virtualOrderContainerId:E}}).then((function(e){te(e.data)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}function X(e){"\u8acb\u9078\u64c7\u60c5\u5883"==E?D({url:A.postOrder.url,method:A.postOrder.method,data:{stockId:c,method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,isAutoTime:Y}}).then((function(e){ee(E)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})):D({url:A.postVirtualOrder.url,method:A.postVirtualOrder.method,data:{method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,virtualOrderContainerId:E}}).then((function(e){te(e.data)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}function $(e){"\u8acb\u9078\u64c7\u60c5\u5883"==E?D({url:A.postOrder.url,method:A.postOrder.method,data:{stockId:c,method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,subMethod:0,isAutoTime:Y}}).then((function(e){ee(E)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})):D({url:A.postVirtualOrder.url,method:A.postVirtualOrder.method,data:{method:e.method,price:e.price,quantity:e.quantity,priceType:e.priceType,timeRestriction:L,subMethod:0,virtualOrderContainerId:E}}).then((function(e){te(e.data)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}function ee(e){"\u8acb\u9078\u64c7\u60c5\u5883"==e?c&&D({url:A.getDisplay.url,method:A.getDisplay.method,params:{stockId:c,isGetLatest:!0}}).then((function(e){te(e.data)})):D({url:A.getVirtualOrder.url+"/"+e,method:A.getVirtualOrder.method,params:{isGetLatest:!0}}).then((function(e){te(e.data.display)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}function te(e){var t=JSON.parse(JSON.stringify(e.fiveTickRange));t=t.sort((function(e,t){return e.price-t.price})),e.fiveTickRange.forEach((function(t){t.sellQuantity>0&&(e.A1=t.price)})),t.forEach((function(t){t.buyQuantity>0&&(e.B1=t.price)})),U(e)}return Object(n.useEffect)((function(){return D({url:A.getVirtualOrderContainer.url,method:A.getVirtualOrderContainer.method,params:{page:{page:k,pageSize:C}}}).then((function(e){var t=[];e.data.content.forEach((function(e){t.push({label:e.name,value:e.id})})),m(t),R(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})),l&&(e=setInterval((function(){ee(E)}),1e3)),function(){return clearInterval(e)}}),[l,c]),Object(h.jsxs)("div",{className:"w-10/12 mx-auto",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(x.a,{value:E,style:{width:120,marginBottom:"10px",marginRight:"10px"},onChange:function(t){u("\u8acb\u9078\u64c7\u60c5\u5883"===t),clearInterval(e),q(t),ee(t)},options:[{label:"\u8acb\u9078\u64c7\u60c5\u5883",value:"\u8acb\u9078\u64c7\u60c5\u5883"}].concat(Object(Pe.a)(b))}),Object(h.jsx)(Ce.a,{min:1,defaultValue:f,style:{marginRight:"10px"},onChange:function(e){v(e)}}),Object(h.jsx)(x.a,{value:L,style:{width:120,marginBottom:"10px",marginRight:"10px"},onChange:function(e){Q(e)},options:[{label:"ROD",value:0},{label:"IOC",value:1},{label:"FOK",value:2}]}),"\u8acb\u9078\u64c7\u60c5\u5883"==E?Object(h.jsx)(W,{style:{width:120},onChange:function(e){r(e)}}):Object(h.jsx)(_.a,{type:"primary",danger:!0,onClick:function(){D({url:A.resetVirtualOrder.url+"/"+E,method:A.resetVirtualOrder.method,data:{id:1,isReset:!0}}).then((function(){ee(E)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},children:"Reset"})]}),Object(h.jsxs)("div",{style:{display:"\u8acb\u9078\u64c7\u60c5\u5883"!==E||c?void 0:"none"},children:[Object(h.jsxs)("div",{className:"flex mb-1 items-center",children:[Object(h.jsx)(_.a,{className:"w-full",style:{background:"lightpink",borderColor:"lightpink"},onClick:function(){X({method:0,price:0,quantity:f,priceType:0})},children:"\xa0"}),Object(h.jsx)("div",{className:"bg-blue-300 text-center w-1/4 mx-1 h-full py-1.5",children:"\u5e02\u50f9"}),Object(h.jsx)(_.a,{className:"w-full py-3",style:{background:"lightgreen",borderColor:"lightgreen"},onClick:function(){X({method:1,price:0,quantity:f,priceType:0})},children:"\xa0"})]}),Object(h.jsx)("hr",{className:"my-2"}),Object(h.jsxs)("div",{className:"flex mb-1 items-center",children:[Object(h.jsx)(_.a,{className:"w-1/2 mr-1",style:{background:"none",border:"none"},children:"\u53d6\u6d88\u55ae"}),Object(h.jsx)(_.a,{className:"w-1/2",style:{background:"none",border:"none"},children:"\u9650\u50f9\u55ae"}),Object(h.jsx)("div",{className:"text-center w-1/4 mx-1 h-full py-1.5",children:"\xa0"}),Object(h.jsx)(_.a,{className:"w-1/2 mr-1",style:{background:"none",border:"none"},children:"\u9650\u50f9\u55ae"}),Object(h.jsx)(_.a,{className:"w-1/2",style:{background:"none",border:"none"},children:"\u53d6\u6d88\u55ae"})]}),K&&K.tickRange.map((function(e,t){return Object(h.jsxs)("div",{className:"flex mb-1 items-center",children:[Object(h.jsx)(_.a,{className:"w-1/2 mr-1",style:{background:"#ffb6c180",borderColor:"lightpink"},onClick:function(){$({method:0,price:e.price,quantity:f,priceType:1})},children:e.investorBuyQuantity||" "}),Object(h.jsx)(_.a,{className:"w-1/2",style:{background:J(e.price,"buyQuantity")?"lightcoral":"lightpink",borderColor:"lightpink"},onClick:function(){Z({method:0,price:e.price,quantity:f,priceType:1})},children:e.buyQuantity>0?e.buyQuantity:" "}),Object(h.jsx)("div",{className:(K&&K.matchPrice==e.price?"bg-yellow-400":"bg-yellow-200")+" text-center w-1/4 mx-1 h-full py-1.5",children:e.price}),Object(h.jsx)(_.a,{className:"w-1/2 mr-1",style:{background:J(e.price,"sellQuantity")?"lightseagreen":"lightgreen",borderColor:"lightgreen"},onClick:function(){Z({method:1,price:e.price,quantity:f,priceType:1})},children:e.sellQuantity>0?e.sellQuantity:" "}),Object(h.jsx)(_.a,{className:"w-1/2",style:{background:"#90ee9080",borderColor:"lightgreen"},onClick:function(){$({method:1,price:e.price,quantity:f,priceType:1})},children:e.investorSellQuantity||" "})]},t)}))]})]})}),kt=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(o.a)(r,2),s=i[0],l=i[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(ce,{isResetChart:s,setIsResetChart:l,stock:a?{id:a}:{}}),Object(h.jsx)(dt,{onReset:function(){l(!0)},customResetStock:function(){var e=Object(xe.a)(fe.a.mark((function e(t){var a,n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(a=A.resetStock).url,r=a.method,e.next=3,D({url:n,method:r,data:{id:t,isReset:!1}}).then((function(e){var t=e.data;return c(t.display.stockId),t.display.stockId}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},St=a(357),Tt=x.a.Option,Ct=function(e){var t=e.isVisible,a=e.setIsVisible,c=e.initVal,r=e.reload,i=C.a.useForm(),l=Object(o.a)(i,1)[0];return console.log(c),Object(n.useEffect)((function(){c&&l.setFieldsValue(c)}),[c]),Object(h.jsx)(B.a,{title:"".concat(c?"\u4fee\u6539":"\u65b0\u589e","\u80a1\u7968"),visible:t,cancelText:"\u53d6\u6d88",okText:"\u78ba\u8a8d",onCancel:function(){l.resetFields(),a(!1)},onOk:function(){l.submit()},children:Object(h.jsxs)(C.a,{form:l,layout:"vertical",onFinish:function(e){console.log(e);var t=c?"putStock":"postStock";console.log({url:A[t].url,method:A[t].method}),D({url:A[t].url,method:A[t].method,data:Object(s.a)(Object(s.a)({},e),{},{groupId:[]})}).then((function(){l.resetFields(),a(!1),r(Math.random())})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},children:[Object(h.jsx)(C.a.Item,{label:"ID",name:"id",rules:[{required:!0,message:"Require"}],children:Object(h.jsx)(I.a,{})}),Object(h.jsx)(C.a.Item,{label:"\u6536\u76e4\u50f9\u683c",name:"closedPrice",rules:[{required:!0,message:"Require"}],children:Object(h.jsx)(Ce.a,{type:"number",className:"w-full",min:0})}),Object(h.jsx)(C.a.Item,{label:"\u6f32\u8dcc\u5e45(%)",name:"priceLimit",rules:[{required:!0,message:"Require"}],children:Object(h.jsx)(Ce.a,{type:"number",className:"w-full",min:0})}),Object(h.jsx)(C.a.Item,{label:"\u6700\u8fd1\u50f9\u683c",name:"currentPrice",rules:[{required:!0,message:"Require"}],children:Object(h.jsx)(Ce.a,{type:"number",className:"w-full",min:0})}),Object(h.jsx)(C.a.Item,{label:"\u985e\u5225",name:"type",rules:[{required:!0,message:"Require"}],children:Object(h.jsxs)(x.a,{className:"w-full",children:[Object(h.jsx)(Tt,{value:0,children:"\u73fe\u80a1"}),Object(h.jsx)(Tt,{value:1,children:"ETF"}),Object(h.jsx)(Tt,{value:2,children:"\u6b0a\u8b49"})]})})]})})},It=["\u73fe\u80a1","ETF","\u6b0a\u8b49"],_t=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(0),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(1),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(20),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useState)({}),g=Object(o.a)(v,2),k=g[0],S=g[1],T=Object(n.useState)([]),w=Object(o.a)(T,2),R=w[0],N=w[1],B=Object(n.useState)(!1),E=Object(o.a)(B,2),q=E[0],F=E[1],P=Object(n.useState)(0),L=Object(o.a)(P,2),Q=L[0],z=L[1],V=Object(n.useState)(),Y=Object(o.a)(V,2),G=Y[0],H=Y[1];function K(e){D({url:A.deleteStock.url,method:A.deleteStock.method,data:{id:e}}).then((function(){z(Math.random()),N([])})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}return Object(n.useEffect)((function(){D({url:A.getStock.url,method:A.getStock.method,params:Object(s.a)({page:{page:b,pageSize:f}},k)}).then((function(e){c(e.data.content),u(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[b,f,k,Q]),Object(n.useEffect)((function(){q||H(null)}),[q]),Object(h.jsxs)("div",{className:"p-4",children:[Object(h.jsx)(Ct,{initVal:G,isVisible:q,setIsVisible:F,reload:z}),Object(h.jsxs)(C.a,{layout:"vertical",className:"grid grid-cols-3 gap-x-4",onFinish:function(e){e.createdTime?S(Object(s.a)(Object(s.a)({},e),{},{createdTime:{min:e.createdTime[0],max:e.createdTime[1]}})):S(e)},children:[Object(h.jsx)(C.a.Item,{label:"ID",name:"id",children:Object(h.jsx)(I.a,{})}),Object(h.jsx)(C.a.Item,{label:"\u6536\u76e4\u50f9\u683c",name:"closedPrice",children:Object(h.jsxs)(I.a.Group,{className:"grid grid-cols-11 gap-x-4",children:[Object(h.jsx)(C.a.Item,{name:["closedPrice","min"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Minimum"})}),Object(h.jsx)("span",{className:"p-0 col-span-1 text-center",children:"~"}),Object(h.jsx)(C.a.Item,{name:["closedPrice","max"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Maximum"})})]})}),Object(h.jsx)(C.a.Item,{label:"\u6f32\u8dcc\u5e45",name:"priceLimit",children:Object(h.jsxs)(I.a.Group,{className:"grid grid-cols-11 gap-x-4",children:[Object(h.jsx)(C.a.Item,{name:["priceLimit","min"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Minimum"})}),Object(h.jsx)("span",{className:"p-0 col-span-1 text-center",children:"~"}),Object(h.jsx)(C.a.Item,{name:["priceLimit","max"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Maximum"})})]})}),Object(h.jsx)(C.a.Item,{label:"\u6700\u8fd1\u50f9\u683c",name:"currentPrice",children:Object(h.jsxs)(I.a.Group,{className:"grid grid-cols-11 gap-x-4",children:[Object(h.jsx)(C.a.Item,{name:["currentPrice","min"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Minimum"})}),Object(h.jsx)("span",{className:"p-0 col-span-1 text-center",children:"~"}),Object(h.jsx)(C.a.Item,{name:["currentPrice","max"],noStyle:!0,children:Object(h.jsx)(I.a,{type:"number",min:0,className:"col-span-5",placeholder:"Maximum"})})]})}),Object(h.jsx)(C.a.Item,{label:"\u5efa\u7acb\u6642\u9593",name:"createdTime",children:Object(h.jsx)(Se.a.RangePicker,{className:"w-full"})}),Object(h.jsx)(C.a.Item,{label:" ",children:Object(h.jsxs)("div",{className:"grid grid-cols-2 justify-end gap-4",children:[Object(h.jsx)(_.a,{type:"primary",htmlType:"submit",children:"\u641c\u5c0b"}),Object(h.jsx)(_.a,{htmlType:"reset",children:"\u6e05\u7a7a"})]})})]}),Object(h.jsxs)(St.b,{size:"small",className:"mb-4",children:[Object(h.jsx)(_.a,{type:"primary",onClick:function(){return F(!0)},children:"\u65b0\u589e\u80a1\u7968"}),Object(h.jsx)(_.a,{type:"primary",danger:!0,disabled:!R.length,onClick:function(){return K(R)},children:"\u522a\u9664\u6240\u9078\u80a1\u7968"})]}),Object(h.jsx)(re.a,{dataSource:a,rowKey:"id",columns:[{title:"ID",dataIndex:"id"},{title:"\u6700\u8fd1\u50f9\u683c",dataIndex:"currentPrice"},{title:"\u6536\u76e4\u50f9\u683c",dataIndex:"closedPrice"},{title:"\u6f32\u8dcc\u5e45(%)",dataIndex:"priceLimit"},{title:"\u985e\u5225",dataIndex:"type",render:function(e){return Object(h.jsx)("span",{children:It[e]})}},{title:"\u66f4\u65b0\u6642\u9593",dataIndex:"updatedTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u5efa\u7acb\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u4fee\u6539 / \u522a\u9664",render:function(e,t){return Object(h.jsxs)(St.b,{size:"small",children:[Object(h.jsx)(_.a,{type:"text",shape:"circle",icon:Object(h.jsx)(je.a,{}),onClick:function(){H(t),F(!0)}}),Object(h.jsx)(_.a,{type:"text",shape:"circle",icon:Object(h.jsx)(be.a,{}),onClick:function(){K([e.id])}})]})}}],rowSelection:{onChange:function(e){N(e)}},pagination:{pageSize:f,total:l,onChange:function(e){m(e)},onShowSizeChange:function(e,t){x(t)}}})]})},wt=["createdTime"],Rt=G.a.Title,Dt=function(){var e=C.a.useForm(),t=Object(o.a)(e,1)[0],a=Object(n.useRef)({}),c=Object(n.useState)({startTime:"",endTime:"",s:2,a:10,b:10,g:2}),r=Object(o.a)(c,2),i=r[0],u=r[1],d=Object(n.useState)({columns:[{title:"b \\ a",dataIndex:"name"}],dataSource:[]}),j=Object(o.a)(d,2),b=j[0],m=j[1];return Object(h.jsxs)("div",{className:"px-4",children:[Object(h.jsx)(Rt,{className:"mt-4 mb-3",level:5,children:"Q1 \u6578\u503c\u8868\u683c"}),Object(h.jsx)("div",{className:"flex flex-col items-start pb-5",children:Object(h.jsxs)(C.a,{form:t,initialValues:{s:2,a:10,b:10,g:2},onValuesChange:function(e,t){var a=t.createdTime,n=void 0===a?[]:a,c=Object(l.a)(t,wt);u(Object(s.a)(Object(s.a)({},c),{},{startTime:y()(n[0]).toISOString(),endTime:y()(n[1]).toISOString()}))},onFinish:function(){var e,t;e=function(){for(var e=[],t=i.a;t>0;t-=i.g)e.unshift({title:t,dataIndex:t,render:function(e){var t=e.raise,a=e.total;return console.log(t,a),(t/a||0).toFixed(2)}}),a.current=Object(s.a)(Object(s.a)({},a.current),{},Object(F.a)({},t,{last:0,total:0,raise:0}));return e.unshift({title:"b \\ a",dataIndex:"name"}),e}(),t=function(){for(var e={},t=i.b;t>0;t-=i.g)e=Object(s.a)(Object(s.a)({},e),{},Object(F.a)({},t,JSON.parse(JSON.stringify(a.current))));return e}(),D({url:A.getDisplay.url,method:A.getDisplay.method,params:{stockId:1,createdTime:{min:i.startTime,max:i.endTime}}}).then((function(a){console.log(a.data.content);for(var n=a.data.content.filter((function(e){return e.firstOrderBuyPrice&&e.firstOrderSellPrice})),c=Math.round(100*(n[0].fiveTickRange[0].price-n[0].fiveTickRange[1].price))/100,r=function(e){var a=n[e],r=0,s=0;if(Math.round(100*(a.firstOrderSellPrice-a.firstOrderBuyPrice))/100/c!==i.s)return"continue";if(a.fiveTickRange.forEach((function(e){e.price===a.firstOrderBuyPrice&&(s=e.buyQuantity),e.price===a.firstOrderSellPrice&&(r=e.sellQuantity)})),t[s]&&t[s][r]){var l=(a.firstOrderBuyPrice+a.firstOrderSellPrice)/2;t[s][r].last&&t[s][r].last!==l&&t[s][r].last<l&&t[s][r].raise++,t[s][r].total++,t[s][r].last=l}},l=0;l<n.length;l++)r(l);var u=Object.entries(t).map((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(s.a)({name:a},n)}));m({columns:e,dataSource:u})})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},children:[Object(h.jsx)(C.a.Item,{rules:[{required:!0,message:"\u8acb\u9078\u64c7\u6642\u9593"}],label:"\u64ad\u653e\u6642\u9593",name:"createdTime",children:Object(h.jsx)(Se.a.RangePicker,{showTime:!0,className:"w-full"})}),Object(h.jsx)(C.a.Item,{label:"s: ".concat(i.s),name:"s",children:Object(h.jsx)(K.a,{min:1,max:5,step:1})}),Object(h.jsx)(C.a.Item,{label:"a: ".concat(i.a),name:"a",children:Object(h.jsx)(K.a,{min:1,max:100,step:1})}),Object(h.jsx)(C.a.Item,{label:"b: ".concat(i.b),name:"b",children:Object(h.jsx)(K.a,{min:1,max:100,step:1})}),Object(h.jsx)(C.a.Item,{label:"g: ".concat(i.g),name:"g",children:Object(h.jsx)(K.a,{min:1,max:10,step:1})}),Object(h.jsx)(_.a,{type:"primary",htmlType:"submit",children:"\u958b\u59cb\u8a08\u7b97"})]})}),Object(h.jsx)(re.a,{className:"max-w-full",dataSource:b.dataSource,columns:b.columns})]})},At=function(e){var t=e.visible,a=e.setVisible,c=e.defaultValue,r=e.reset,i=e.permission,l=void 0===i?[]:i,u=C.a.useForm(),d=Object(o.a)(u,1)[0];return Object(n.useEffect)((function(){console.log(c,"de"),c&&d.setFieldsValue(c)}),[c]),Object(h.jsx)(B.a,{title:c?"\u4fee\u6539\u89d2\u8272":"\u65b0\u589e\u89d2\u8272",visible:t,onOk:function(){d.submit()},onCancel:function(){d.resetFields(),a(!1),console.log("cancel")},okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",children:Object(h.jsxs)(C.a,{name:"basic",layout:"vertical",form:d,onFinish:function(e){c?D({url:A.putRole.url,method:A.putRole.method,data:Object(s.a)(Object(s.a)({},e),{},{id:c.id})}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),d.resetFields(),a(!1)})):D({url:A.postRole.url,method:A.postRole.method,data:e}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),d.resetFields(),a(!1)})),console.log(e)},initialValues:{remember:!0},children:[Object(h.jsx)(C.a.Item,{label:"\u89d2\u8272\u540d\u7a31",name:"name",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u89d2\u8272"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u89d2\u8272\u540d\u7a31"})}),Object(h.jsx)(C.a.Item,{label:"\u6bcf\u65e5\u8acb\u6c42\u4e0a\u9650",name:"totalApiTime",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u4e0a\u9650"},{validator:function(e,t){return t>0?Promise.resolve():Promise.reject("\u4e0d\u53ef\u5c0f\u65bc1")}}],children:Object(h.jsx)(I.a,{type:"number",placeholder:"\u8acb\u8f38\u5165\u6578\u5b57"})}),Object(h.jsx)(C.a.Item,{label:"\u53ef\u700f\u89bd\u9801\u9762",name:"permissions",rules:[{required:!0,message:"\u8acb\u9078\u64c7"}],children:Object(h.jsx)(x.a,{mode:"multiple",placeholder:"\u8acb\u9078\u64c7",options:l.map((function(e){return{value:e,label:e}}))})})]})})},Nt=B.a.confirm,Mt=G.a.Title,Bt=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(1),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(20),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useState)(0),g=Object(o.a)(v,2),k=g[0],S=g[1],T=Object(n.useState)(!1),C=Object(o.a)(T,2),w=C[0],R=C[1],N=Object(n.useState)(0),B=Object(o.a)(N,2),E=B[0],q=B[1],F=Object(n.useState)(),P=Object(o.a)(F,2),L=P[0],Q=P[1],z=Object(n.useState)([]),V=Object(o.a)(z,2),Y=V[0],G=V[1],H=Object(n.useState)({}),K=Object(o.a)(H,2),U=K[0],J=K[1];function Z(e){Nt({title:"\u78ba\u5b9a\u8981\u522a\u9664?",icon:Object(h.jsx)(Ie.a,{}),content:"\u522a\u9664\u5f8c\u5c07\u7121\u6cd5\u5fa9\u539f",okText:"\u78ba\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){D({url:A.deleteRole.url,method:A.deleteRole.method,data:{id:e}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){G([]),q(Math.random())}))}})}Object(n.useEffect)((function(){D({url:A.getRolePermission.url,method:A.getRolePermission.method}).then((function(e){console.log(e.data),u(e.data)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[]),Object(n.useEffect)((function(){D({url:A.getRole.url,method:A.getRole.method,params:Object(s.a)(Object(s.a)({},U),{},{page:{page:b,pageSize:f}})}).then((function(e){console.log(e.data),c(e.data.content),S(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[b,f,E]);var X={selectedRowKeys:Y,onChange:function(e,t){G(t.map((function(e){return e.id})))},preserveSelectedRowKeys:!1};return Object(h.jsxs)("div",{className:"px-10",children:[Object(h.jsx)(At,{visible:w,setVisible:R,reset:q,defaultValue:L,permission:l}),Object(h.jsx)(Mt,{level:5,children:"\u689d\u4ef6\u641c\u5c0b"}),Object(h.jsxs)(ue.a,{className:"mb-4 border border-gray-200 p-4",justify:"space-around",align:"bottom",children:[Object(h.jsxs)(de.a,{span:6,children:["\u540d\u7a31",Object(h.jsx)(I.a,{placeholder:"\u8f38\u5165\u540d\u7a31",size:"middle",onChange:function(e){J(Object(s.a)(Object(s.a)({},U),{},{name:e.target.value}))}})]}),Object(h.jsx)(de.a,{span:2,children:Object(h.jsx)(_.a,{onClick:function(){q(Math.random())},children:"\u641c\u5c0b"})})]}),Object(h.jsxs)("div",{className:"flex justify-end my-5",children:[Object(h.jsx)(_.a,{disabled:!Y.length,type:"default",className:"mr-4",onClick:function(){Z(Y)},children:"\u522a\u9664\u52fe\u9078"}),Object(h.jsx)(_.a,{type:"primary",onClick:function(){Q(null),R(!0)},children:"\u65b0\u589e\u89d2\u8272"})]}),Object(h.jsx)(re.a,{rowKey:"id",rowSelection:Object(s.a)({type:"checkbox"},X),columns:[{title:"\u540d\u7a31",dataIndex:"name"},{title:"\u6bcf\u65e5\u8acb\u6c42\u4e0a\u9650",dataIndex:"totalApiTime"},{title:"\u5141\u8a31\u9801\u9762",dataIndex:"permissions",render:function(e){return Object(h.jsx)("span",{className:"whitespace-pre-line",children:e.reduce((function(e,t){return e+t.id+"\n"}),"")})}},{title:"\u5275\u5efa\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u66f4\u65b0\u6642\u9593",dataIndex:"updatedTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u72c0\u614b",dataIndex:"action",render:function(e,t){return Object(h.jsxs)("span",{children:[Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center mr-2",icon:Object(h.jsx)(je.a,{}),onClick:function(){Q({id:t.id,name:t.name,totalApiTime:t.totalApiTime,permissions:t.permissions.map((function(e){return e.id}))}),R(!0)}}),Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center",onClick:function(){return Z([t.id])},icon:Object(h.jsx)(be.a,{})})]})}}],dataSource:a,pagination:{pageSize:f,total:k,onChange:function(e){m(e)},onShowSizeChange:function(e,t){x(t)}},sticky:!0})]})},Et=["restApiTime"],qt=function(e){var t=e.visible,a=e.setVisible,c=e.defaultValue,r=e.reset,i=e.role,u=void 0===i?[]:i,d=C.a.useForm(),j=Object(o.a)(d,1)[0];return Object(n.useEffect)((function(){c&&j.setFieldsValue(c)}),[c]),Object(h.jsx)(B.a,{title:c?"\u4fee\u6539\u6b0a\u9650":"\u65b0\u589e\u6b0a\u9650",visible:t,onOk:function(){j.submit()},onCancel:function(){j.resetFields(),a(!1),console.log("cancel")},okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",children:Object(h.jsxs)(C.a,{name:"basic",layout:"vertical",form:j,onFinish:function(e){var t=e.restApiTime,n=Object(l.a)(e,Et);c?D({url:A.putInvestor.url,method:A.putInvestor.method,data:Object(s.a)({id:c.id,restApiTime:parseInt(t)},n)}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),j.resetFields(),a(!1)})):D({url:A.postInvestor.url,method:A.postInvestor.method,data:Object(s.a)({restApiTime:parseInt(t)},n)}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){r(Math.random()),j.resetFields(),a(!1)}))},initialValues:{remember:!0},children:[Object(h.jsx)(C.a.Item,{label:"\u5e33\u6236\u540d\u7a31",name:"account",rules:[{required:!0,message:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u5e33\u6236\u540d\u7a31"})}),Object(h.jsx)(C.a.Item,{label:"\u5bc6\u78bc",name:"password",rules:[{required:!c,message:"\u8acb\u8f38\u5165\u5bc6\u78bc"}],children:Object(h.jsx)(I.a,{placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"})}),Object(h.jsx)(C.a.Item,{label:"\u5269\u9918\u8acb\u6c42\u6b21\u6578",name:"restApiTime",rules:[{required:!!c,message:"\u8acb\u8f38\u5165\u6b21\u6578"}],style:{display:c?void 0:"none"},children:Object(h.jsx)(I.a,{type:"number",placeholder:"\u8acb\u8f38\u5165\u6578\u5b57"})}),Object(h.jsx)(C.a.Item,{label:"\u89d2\u8272",name:"roleId",rules:[{required:!!c,message:"\u8acb\u9078\u64c7"}],style:{display:c?void 0:"none"},children:Object(h.jsx)(x.a,{placeholder:"\u8acb\u9078\u64c7",options:null===u||void 0===u?void 0:u.map((function(e){return{value:e.id,label:e.name}}))})})]})})},Ft=B.a.confirm,Pt=(G.a.Title,{stock:_t,"investor-management":function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(1),j=Object(o.a)(d,2),b=j[0],m=j[1],O=Object(n.useState)(20),p=Object(o.a)(O,2),f=p[0],x=p[1],v=Object(n.useState)(0),g=Object(o.a)(v,2),k=g[0],S=g[1],T=Object(n.useState)(!1),C=Object(o.a)(T,2),I=C[0],w=C[1],R=Object(n.useState)(0),N=Object(o.a)(R,2),B=N[0],E=N[1],q=Object(n.useState)(),F=Object(o.a)(q,2),P=F[0],L=F[1],Q=Object(n.useState)([]),z=Object(o.a)(Q,2),V=z[0],Y=z[1];function G(e){Ft({title:"\u78ba\u5b9a\u8981\u522a\u9664?",icon:Object(h.jsx)(Ie.a,{}),content:"\u522a\u9664\u5f8c\u5c07\u7121\u6cd5\u5fa9\u539f",okText:"\u78ba\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){D({url:A.deleteInvestor.url,method:A.deleteInvestor.method,data:{id:e}}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){Y([]),E(Math.random())}))}})}Object(n.useEffect)((function(){D({url:A.getRole.url,method:A.getRole.method}).then((function(e){console.log(e.data),u(e.data.content)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[]),Object(n.useEffect)((function(){D({url:A.getInvestor.url,method:A.getInvestor.method,params:{page:{page:b,pageSize:f}}}).then((function(e){console.log(e.data),c(e.data.content),S(e.data.totalSize)})).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[b,f,B]);var H={selectedRowKeys:V,onChange:function(e,t){Y(t.map((function(e){return e.id})))},preserveSelectedRowKeys:!1};return Object(h.jsxs)("div",{className:"px-10",children:[Object(h.jsx)(qt,{visible:I,setVisible:w,reset:E,defaultValue:P,role:l}),Object(h.jsxs)("div",{className:"flex justify-end my-5",children:[Object(h.jsx)(_.a,{disabled:!V.length,type:"default",className:"mr-4",onClick:function(){return G(V)},children:"\u522a\u9664\u52fe\u9078"}),Object(h.jsx)(_.a,{type:"primary",onClick:function(){L(null),w(!0)},children:"\u65b0\u589e\u5e33\u6236"})]}),Object(h.jsx)(re.a,{rowKey:"id",rowSelection:Object(s.a)({type:"checkbox"},H),columns:[{title:"\u540d\u7a31",dataIndex:"account"},{title:"\u6191\u8b49",dataIndex:"token"},{title:"\u5269\u9918\u8acb\u6c42\u6b21\u6578",dataIndex:"restApiTime"},{title:"\u89d2\u8272",dataIndex:"role",render:function(e){return e.name}},{title:"\u5275\u5efa\u6642\u9593",dataIndex:"createdTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u66f4\u65b0\u6642\u9593",dataIndex:"updatedTime",width:200,render:function(e){return Object(h.jsx)("span",{children:y()(e).format("YYYY/MM/DD HH:mm:ss")})}},{title:"\u72c0\u614b",dataIndex:"action",render:function(e,t){return Object(h.jsxs)("span",{children:[Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center mr-2",icon:Object(h.jsx)(je.a,{}),onClick:function(){L({id:t.id,account:t.account,password:t.password,restApiTime:t.restApiTime,roleId:t.role.id}),w(!0)}}),Object(h.jsx)(_.a,{type:"link",shape:"circle",className:"inline-flex justify-center items-center",onClick:function(){return G([t.id])},icon:Object(h.jsx)(be.a,{})})]})}}],dataSource:a,pagination:{pageSize:f,total:k,onChange:function(e){m(e)},onShowSizeChange:function(e,t){x(t)}},sticky:!0})]})},"role-management":Bt,"auto-chart":oe,"replay-chart":kt,case:Oe,simulator:dt,"Q1-chart":Dt,"quick-order":gt,"order-table":ht,"price-table":mt,"real-data-upload":$e,"frequent-data":Fe}),Lt={stock:"\u80a1\u7968\u7ba1\u7406","investor-management":"\u5e33\u6236\u7ba1\u7406","role-management":"\u89d2\u8272\u7ba1\u7406","auto-chart":"LOB \u5716\u8868","replay-chart":"\u91cd\u64ad\u7d00\u9304",case:"\u60c5\u5883\u7ba1\u7406",simulator:"\u6a21\u64ec\u4e0b\u55ae","Q1-chart":"Q1 \u5716\u8868","quick-order":"\u9583\u96fb\u4e0b\u55ae","order-table":"\u59d4\u8a17\u7d00\u9304\u8868\u55ae","price-table":"\u6210\u4ea4\u7d00\u9304\u8868\u55ae","real-data-upload":"\u4e0a\u50b3\u771f\u5be6\u8cc7\u6599","frequent-data":"\u9ad8\u983b\u8cc7\u6599"},Qt=function(e){var t=e.setToken,a=e.permission,n=Object(u.g)();return Object(h.jsxs)("ul",{className:"sticky px-4 bg-gray-200 w-48 flex-shrink-0 min-h-screen",children:[Object(h.jsx)("li",{className:" text-center text-xl border-b border-black",children:Object(h.jsx)(_.a,{className:"w-full",size:"large",onClick:function(){D({url:A.logout.url,method:A.logout.method}).catch((function(e){var t;M(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(e){t(null),n.replace("/stock-font-end/login/")}))},children:"\u767b\u51fa"})}),Object(h.jsx)("li",{className:" py-5 text-xl border-b border-black",children:Object(h.jsx)(d.b,{to:"/stock-font-end/",exact:!0,children:"\u9996\u9801"})}),Object(h.jsx)("li",{className:"py-5 text-xl border-b border-black",children:Object(h.jsx)(d.b,{to:"/stock-font-end/echart-example",children:"\u7bc4\u4f8b"})}),a.map((function(e){return Object(h.jsx)("li",{className:"py-5 text-xl border-b border-black",children:Object(h.jsx)(d.b,{to:"/stock-font-end/".concat(e),children:Lt[e]})})}))]})},zt=["component"],Vt=new(a(126).EventEmitter),Yt=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!!localStorage.getItem("token")),i=Object(o.a)(r,2),j=i[0],b=i[1],m=Object(n.useState)(localStorage.getItem("token")||""),O=Object(o.a)(m,2),p=O[0],f=O[1],x=Object(n.useState)(JSON.parse(localStorage.getItem("permission"))||[]),v=Object(o.a)(x,2),y=v[0],g=v[1],T=function(e){var t=e.component,a=Object(l.a)(e,zt);return c(a.path),Object(h.jsx)(u.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){return j?Object(h.jsx)(t,Object(s.a)({},e)):Object(h.jsx)(u.a,{to:"/stock-font-end/login/"})}}))};return Object(n.useEffect)((function(){Vt.on("unauthorization",(function(e){localStorage.removeItem("token"),b(!1)}))}),[]),Object(n.useEffect)((function(){b(!!p),function(e){D.defaults.headers.common.token=e}(p)}),[p]),Object(n.useEffect)((function(){D({url:A.getRolePermission.url,method:A.getRolePermission.method}).then((function(e){console.log("123"),g(e.data)})).catch((function(e){var t;errorNotification(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}),[a]),Object(h.jsx)(d.a,{children:Object(h.jsxs)("div",{className:"flex ",children:[j&&Object(h.jsx)(Qt,{setToken:f,permission:y}),Object(h.jsx)("div",{className:"flex-1 my-10 ",children:Object(h.jsxs)(u.d,{children:[Object(h.jsx)(u.b,{path:"/stock-font-end/login/",component:function(){return Object(h.jsx)(q,{setToken:f,setPermission:g})}}),Object(h.jsx)(T,{path:"/stock-font-end/",exact:!0,component:S}),Object(h.jsx)(T,{path:"/stock-font-end/echart-example",component:k}),y.map((function(e){return Object(h.jsx)(T,{path:"/stock-font-end/".concat(e),component:Pt[e]})})),Object(h.jsx)(u.a,{from:"*",to:j?"/stock-font-end/":"/stock-font-end/login"})]})})]})})};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(Yt,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.c6578d2d.chunk.js.map